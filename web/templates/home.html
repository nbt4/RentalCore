<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - RentalCore</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    <link href="/static/css/app.css" rel="stylesheet">
    <style>
        .feature-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .feature-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .main-action {
            background: linear-gradient(135deg, #007bff, #0056b3);
            border: none;
            padding: 1.5rem;
            font-size: 1.1rem;
        }
        .main-action:hover {
            background: linear-gradient(135deg, #0056b3, #004085);
            transform: translateY(-1px);
        }
        .section-header {
            border-left: 4px solid #007bff;
            padding-left: 1rem;
            margin-bottom: 1.5rem;
        }
        .advanced-toggle {
            cursor: pointer;
            user-select: none;
            transition: all 0.3s ease;
        }
        .advanced-toggle:hover {
            color: #007bff;
        }
        .stats-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border: none;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="bi bi-gear-wide-connected"></i> RentalCore
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="navbar-nav me-auto">
                    <a class="nav-link" href="/jobs">
                        <i class="bi bi-briefcase"></i> Jobs
                    </a>
                    <a class="nav-link" href="/devices">
                        <i class="bi bi-cpu"></i> Devices
                    </a>
                    <a class="nav-link" href="/customers">
                        <i class="bi bi-people"></i> Customers
                    </a>
                    <a class="nav-link" href="/cases">
                        <i class="bi bi-box"></i> Cases
                    </a>
                    <div class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="toolsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-tools"></i> Tools
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="toolsDropdown">
                            <li><a class="dropdown-item" href="/workflow/templates"><i class="bi bi-file-earmark-text"></i> Job Templates</a></li>
                            <li><a class="dropdown-item" href="/workflow/packages"><i class="bi bi-box-seam"></i> Equipment Packages</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/invoices"><i class="bi bi-file-text"></i> Invoices</a></li>
                            <li><a class="dropdown-item" href="/analytics"><i class="bi bi-graph-up"></i> Analytics</a></li>
                            <li><a class="dropdown-item" href="/financial"><i class="bi bi-calculator"></i> Financial</a></li>
                            <li><a class="dropdown-item" href="/documents"><i class="bi bi-file-earmark"></i> Documents</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/search/global"><i class="bi bi-search"></i> Advanced Search</a></li>
                            <li><a class="dropdown-item" href="/workflow/bulk"><i class="bi bi-gear"></i> Bulk Operations</a></li>
                        </ul>
                    </div>
                </div>
                <div class="navbar-nav">
                    <button class="btn btn-outline-light btn-sm me-2" onclick="toggleTheme()">
                        <i class="bi bi-moon-fill" id="theme-icon"></i>
                    </button>
                    {{if .user}}
                    <div class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle text-light" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-person-circle"></i> {{.user.Username}}
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                            <li><h6 class="dropdown-header">
                                <i class="bi bi-person"></i> {{.user.FirstName}} {{.user.LastName}}
                            </h6></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/users">
                                <i class="bi bi-people-fill"></i> User Management
                            </a></li>
                            <li><a class="dropdown-item" href="/security/roles">
                                <i class="bi bi-shield-check"></i> Security & Roles
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/logout">
                                <i class="bi bi-box-arrow-right"></i> Logout
                            </a></li>
                        </ul>
                    </div>
                    {{end}}
                </div>
            </div>
        </div>
    </nav>

    <main class="container mt-4">
        <!-- Welcome Header -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h2 class="mb-1">Welcome back{{if .user}}, {{.user.FirstName}}{{end}}!</h2>
                        <p class="text-muted mb-0">The core of your rental business</p>
                    </div>
                    <div class="text-end">
                        <a href="/scan/select" class="btn btn-success main-action">
                            <i class="bi bi-qr-code-scan me-2"></i>
                            Launch Scanner
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Core Management -->
        <div class="section-header">
            <h5 class="mb-0"><i class="bi bi-grid-3x3-gap me-2"></i>Core Management</h5>
        </div>
        
        <div class="row mb-5">
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="card feature-card h-100">
                    <div class="card-body text-center">
                        <i class="bi bi-briefcase display-5 text-primary mb-3"></i>
                        <h6>Jobs</h6>
                        <p class="text-muted small mb-3">Manage projects and equipment assignments</p>
                        <div class="d-grid gap-2">
                            <a href="/jobs" class="btn btn-primary">View All</a>
                            <a href="/jobs/new" class="btn btn-outline-primary btn-sm">New Job</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="card feature-card h-100">
                    <div class="card-body text-center">
                        <i class="bi bi-cpu display-5 text-success mb-3"></i>
                        <h6>Devices</h6>
                        <p class="text-muted small mb-3">Equipment inventory and tracking</p>
                        <div class="d-grid gap-2">
                            <a href="/devices" class="btn btn-success">View All</a>
                            <a href="/devices/new" class="btn btn-outline-success btn-sm">New Device</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="card feature-card h-100">
                    <div class="card-body text-center">
                        <i class="bi bi-people display-5 text-info mb-3"></i>
                        <h6>Customers</h6>
                        <p class="text-muted small mb-3">Customer database management</p>
                        <div class="d-grid gap-2">
                            <a href="/customers" class="btn btn-info">View All</a>
                            <a href="/customers/new" class="btn btn-outline-info btn-sm">New Customer</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="card feature-card h-100">
                    <div class="card-body text-center">
                        <i class="bi bi-box display-5 text-warning mb-3"></i>
                        <h6>Cases</h6>
                        <p class="text-muted small mb-3">Case management and device mapping</p>
                        <div class="d-grid gap-2">
                            <a href="/cases" class="btn btn-warning">View All</a>
                            <a href="/cases/new" class="btn btn-outline-warning btn-sm">New Case</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="section-header">
            <h5 class="mb-0"><i class="bi bi-lightning-fill me-2"></i>Quick Actions</h5>
        </div>
        
        <div class="row mb-5">
            <div class="col-md-4 mb-3">
                <div class="d-grid">
                    <a href="/scan/select" class="btn btn-outline-primary btn-lg">
                        <i class="bi bi-qr-code-scan me-2"></i>
                        Scan Equipment
                    </a>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="d-grid">
                    <a href="/jobs/new" class="btn btn-outline-success btn-lg">
                        <i class="bi bi-plus-circle me-2"></i>
                        Create New Job
                    </a>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="d-grid">
                    <a href="/search/global" class="btn btn-outline-secondary btn-lg">
                        <i class="bi bi-search me-2"></i>
                        Search Everything
                    </a>
                </div>
            </div>
        </div>

        <!-- Advanced Features (Collapsible) -->
        <div class="section-header advanced-toggle" data-bs-toggle="collapse" data-bs-target="#advancedFeatures" aria-expanded="false">
            <h5 class="mb-0">
                <i class="bi bi-gear-fill me-2"></i>
                Advanced Features
                <i class="bi bi-chevron-down float-end"></i>
            </h5>
        </div>
        
        <div class="collapse" id="advancedFeatures">
            <div class="row">
                <div class="col-lg-3 col-md-6 mb-3">
                    <div class="card feature-card">
                        <div class="card-body text-center">
                            <i class="bi bi-file-earmark-text display-6 text-primary mb-2"></i>
                            <h6>Templates & Packages</h6>
                            <div class="d-grid gap-1">
                                <a href="/workflow/templates" class="btn btn-outline-primary btn-sm">Job Templates</a>
                                <a href="/workflow/packages" class="btn btn-outline-primary btn-sm">Equipment Packages</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-3">
                    <div class="card feature-card">
                        <div class="card-body text-center">
                            <i class="bi bi-graph-up display-6 text-success mb-2"></i>
                            <h6>Reports & Analytics</h6>
                            <div class="d-grid gap-1">
                                <a href="/analytics" class="btn btn-outline-success btn-sm">Analytics Dashboard</a>
                                <a href="/financial" class="btn btn-outline-success btn-sm">Financial Reports</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-3">
                    <div class="card feature-card">
                        <div class="card-body text-center">
                            <i class="bi bi-file-earmark display-6 text-info mb-2"></i>
                            <h6>Documents</h6>
                            <div class="d-grid gap-1">
                                <a href="/documents" class="btn btn-outline-info btn-sm">View Documents</a>
                                <a href="/documents/upload" class="btn btn-outline-info btn-sm">Upload Files</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-3">
                    <div class="card feature-card">
                        <div class="card-body text-center">
                            <i class="bi bi-tools display-6 text-secondary mb-2"></i>
                            <h6>System Tools</h6>
                            <div class="d-grid gap-1">
                                <a href="/workflow/bulk" class="btn btn-outline-secondary btn-sm">Bulk Operations</a>
                                <a href="/security/audit" class="btn btn-outline-secondary btn-sm">Audit Logs</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-light mt-5 py-3">
        <div class="container text-center">
            <small class="text-muted">RentalCore - The core of your rental business</small>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/app.js"></script>
    <script>
        // Smooth icon rotation for collapsible
        document.querySelector('.advanced-toggle').addEventListener('click', function() {
            const icon = this.querySelector('.bi-chevron-down');
            icon.style.transform = icon.style.transform === 'rotate(180deg)' ? 'rotate(0deg)' : 'rotate(180deg)';
        });
    </script>
</body>
</html>