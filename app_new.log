2025/06/17 23:53:46 Database connection established successfully

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:77
[0m[33m[11.306ms] [34;1m[rows:-][0m SELECT DATABASE()

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:77
[0m[33m[22.486ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'TS-Lager%' ORDER BY SCHEMA_NAME='TS-Lager' DESC,SCHEMA_NAME limit 1

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:77
[0m[33m[23.282ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'TS-Lager' AND table_name = 'users' AND table_type = 'BASE TABLE'

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:77
[0m[33m[11.447ms] [34;1m[rows:-][0m SELECT DATABASE()

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:77
[0m[33m[23.453ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'TS-Lager%' ORDER BY SCHEMA_NAME='TS-Lager' DESC,SCHEMA_NAME limit 1

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:77
[0m[33m[11.802ms] [34;1m[rows:-][0m SELECT * FROM `users` LIMIT 1

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:77
[0m[33m[24.077ms] [34;1m[rows:-][0m SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'TS-Lager' AND table_name = 'users' ORDER BY ORDINAL_POSITION

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:77
[0m[33m[39.451ms] [34;1m[rows:0][0m ALTER TABLE `users` MODIFY COLUMN `is_active` boolean DEFAULT true

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:81
[0m[33m[11.703ms] [34;1m[rows:-][0m SELECT DATABASE()

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:81
[0m[33m[23.352ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'TS-Lager%' ORDER BY SCHEMA_NAME='TS-Lager' DESC,SCHEMA_NAME limit 1

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:81
[0m[33m[24.792ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'TS-Lager' AND table_name = 'sessions' AND table_type = 'BASE TABLE'

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:81
[0m[33m[11.260ms] [34;1m[rows:-][0m SELECT DATABASE()

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:81
[0m[33m[23.551ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'TS-Lager%' ORDER BY SCHEMA_NAME='TS-Lager' DESC,SCHEMA_NAME limit 1

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:81
[0m[33m[11.607ms] [34;1m[rows:-][0m SELECT * FROM `sessions` LIMIT 1

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:81
[0m[33m[24.435ms] [34;1m[rows:-][0m SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'TS-Lager' AND table_name = 'sessions' ORDER BY ORDINAL_POSITION

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:85
[0m[33m[11.109ms] [34;1m[rows:-][0m SELECT DATABASE()

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:85
[0m[33m[22.574ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'TS-Lager%' ORDER BY SCHEMA_NAME='TS-Lager' DESC,SCHEMA_NAME limit 1

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:85
[0m[33m[22.468ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'TS-Lager' AND table_name = 'sessions' AND table_type = 'BASE TABLE'

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:85
[0m[33m[11.300ms] [34;1m[rows:-][0m SELECT DATABASE()

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:85
[0m[33m[22.602ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'TS-Lager%' ORDER BY SCHEMA_NAME='TS-Lager' DESC,SCHEMA_NAME limit 1

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:85
[0m[33m[11.334ms] [34;1m[rows:-][0m SELECT * FROM `sessions` LIMIT 1

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:85
[0m[33m[22.703ms] [34;1m[rows:-][0m SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'TS-Lager' AND table_name = 'sessions' ORDER BY ORDINAL_POSITION

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:85
[0m[33m[11.210ms] [34;1m[rows:-][0m SELECT DATABASE()

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:85
[0m[33m[22.952ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'TS-Lager%' ORDER BY SCHEMA_NAME='TS-Lager' DESC,SCHEMA_NAME limit 1

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:85
[0m[33m[23.666ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'TS-Lager' AND table_name = 'users' AND table_type = 'BASE TABLE'

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:85
[0m[33m[11.195ms] [34;1m[rows:-][0m SELECT DATABASE()

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:85
[0m[33m[22.478ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'TS-Lager%' ORDER BY SCHEMA_NAME='TS-Lager' DESC,SCHEMA_NAME limit 1

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:85
[0m[33m[11.416ms] [34;1m[rows:-][0m SELECT * FROM `users` LIMIT 1

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:85
[0m[33m[23.048ms] [34;1m[rows:-][0m SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'TS-Lager' AND table_name = 'users' ORDER BY ORDINAL_POSITION

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:85
[0m[33m[30.245ms] [34;1m[rows:0][0m ALTER TABLE `users` MODIFY COLUMN `is_active` boolean DEFAULT true

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:85
[0m[33m[11.366ms] [34;1m[rows:-][0m SELECT DATABASE()

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:85
[0m[33m[22.643ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'TS-Lager%' ORDER BY SCHEMA_NAME='TS-Lager' DESC,SCHEMA_NAME limit 1

2025/06/17 23:53:46 [32m/opt/dev/go-barcode-webapp/cmd/server/main.go:85
[0m[33m[22.874ms] [34;1m[rows:-][0m SELECT count(*) FROM INFORMATION_SCHEMA.table_constraints WHERE constraint_schema = 'TS-Lager' AND table_name = 'users' AND constraint_name = 'fk_sessions_user'

2025/06/17 23:53:46 [31;1m/opt/dev/go-barcode-webapp/cmd/server/main.go:85 [35;1mError 1142 (42000): REFERENCES command denied to user 'tsweb'@'91.9.39.124' for table 'TS-Lager.sessions'
[0m[33m[11.275ms] [34;1m[rows:0][0m ALTER TABLE `users` ADD CONSTRAINT `fk_sessions_user` FOREIGN KEY (`userID`) REFERENCES `sessions`(`user_id`)
2025/06/17 23:53:46 Failed to auto-migrate equipment_packages table: Error 1142 (42000): REFERENCES command denied to user 'tsweb'@'91.9.39.124' for table 'TS-Lager.sessions'
[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] Loaded HTML Templates (61): 
	- analytics_dashboard.html
	- equipment_package_form.html
	- login.html
	- job_template_form.html
	- user_form.html
	- case_detail.html
	- devices.html
	- invoice_form_new.html
	- job_detail.html
	- transaction_detail.html
	- devices_standalone.html
	- job_form.html
	- content
	- customer_detail.html
	- equipment_package_form_enhanced.html
	- financial_reports.html
	- invoice_preview.html
	- bulk_operations.html
	- equipment_packages_list.html
	- job_templates_list.html
	- user_detail.html
	- device_detail.html
	- home_new.html.backup
	- invoice_detail.html
	- invoice_settings_form.html
	- jobs.html
	- document_upload_form.html
	- error.html
	- invoice_template_designer_simple.html
	- customers.html
	- equipment_package_detail.html
	- financial_dashboard.html
	- scan_select_job.html
	- company_settings_form.html
	- documents_list.html
	- invoices_list.html
	- scan_job.html
	- device_form.html
	- invoice_template_designer_new.html
	- job_template_detail.html
	- signature_form.html
	- case_form.html
	- invoice_template_designer_advanced.html
	- invoice_templates_list.html
	- 
	- security_roles.html
	- search_results.html
	- transactions_list.html
	- transaction_form.html
	- case_device_mapping.html
	- invoice_preview_new.html
	- invoice_template_designer.html
	- mobile_scanner_enhanced.html
	- security_audit.html
	- mobile_scanner.html
	- users_list.html
	- base.html
	- cases_list.html
	- customer_form.html
	- home.html
	- invoice_form.html

[GIN-debug] GET    /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (3 handlers)
[GIN-debug] HEAD   /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (3 handlers)
[GIN-debug] GET    /sw.js                    --> main.main.func17 (4 handlers)
[GIN-debug] GET    /manifest.json            --> main.main.func18 (4 handlers)

2025/06/17 23:53:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/security_handler.go:867
[0m[33m[23.083ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE name = 'admin' ORDER BY `roles`.`roleID` LIMIT 1

2025/06/17 23:53:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/security_handler.go:867
[0m[33m[22.482ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE name = 'manager' ORDER BY `roles`.`roleID` LIMIT 1

2025/06/17 23:53:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/security_handler.go:867
[0m[33m[22.933ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE name = 'employee' ORDER BY `roles`.`roleID` LIMIT 1

2025/06/17 23:53:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/security_handler.go:867
[0m[33m[22.925ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE name = 'viewer' ORDER BY `roles`.`roleID` LIMIT 1
[GIN-debug] GET    /login                    --> go-barcode-webapp/internal/handlers.(*AuthHandler).LoginForm-fm (4 handlers)
[GIN-debug] POST   /login                    --> go-barcode-webapp/internal/handlers.(*AuthHandler).Login-fm (4 handlers)
[GIN-debug] GET    /logout                   --> go-barcode-webapp/internal/handlers.(*AuthHandler).Logout-fm (4 handlers)
[GIN-debug] GET    /debug/invoice-test       --> main.setupRoutes.func1 (4 handlers)
[GIN-debug] GET    /debug/customer-selection --> main.setupRoutes.func2 (4 handlers)
[GIN-debug] GET    /                         --> go-barcode-webapp/internal/handlers.(*HomeHandler).Dashboard-fm (5 handlers)
[GIN-debug] GET    /jobs                     --> go-barcode-webapp/internal/handlers.(*JobHandler).ListJobs-fm (5 handlers)
[GIN-debug] GET    /jobs/new                 --> go-barcode-webapp/internal/handlers.(*JobHandler).NewJobForm-fm (5 handlers)
[GIN-debug] POST   /jobs                     --> go-barcode-webapp/internal/handlers.(*JobHandler).CreateJob-fm (5 handlers)
[GIN-debug] GET    /jobs/:id                 --> go-barcode-webapp/internal/handlers.(*JobHandler).GetJob-fm (5 handlers)
[GIN-debug] GET    /jobs/:id/edit            --> go-barcode-webapp/internal/handlers.(*JobHandler).EditJobForm-fm (5 handlers)
[GIN-debug] PUT    /jobs/:id                 --> go-barcode-webapp/internal/handlers.(*JobHandler).UpdateJob-fm (5 handlers)
[GIN-debug] DELETE /jobs/:id                 --> go-barcode-webapp/internal/handlers.(*JobHandler).DeleteJob-fm (5 handlers)
[GIN-debug] GET    /jobs/:id/devices         --> go-barcode-webapp/internal/handlers.(*JobHandler).GetJobDevices-fm (5 handlers)
[GIN-debug] POST   /jobs/:id/devices         --> go-barcode-webapp/internal/handlers.(*JobHandler).AssignDevice-fm (5 handlers)
[GIN-debug] DELETE /jobs/:id/devices/:deviceId --> go-barcode-webapp/internal/handlers.(*JobHandler).RemoveDevice-fm (5 handlers)
[GIN-debug] POST   /jobs/:id/bulk-scan       --> go-barcode-webapp/internal/handlers.(*JobHandler).BulkScanDevices-fm (5 handlers)
[GIN-debug] GET    /devices                  --> go-barcode-webapp/internal/handlers.(*DeviceHandler).ListDevices-fm (5 handlers)
[GIN-debug] GET    /devices/new              --> go-barcode-webapp/internal/handlers.(*DeviceHandler).NewDeviceForm-fm (5 handlers)
[GIN-debug] POST   /devices                  --> go-barcode-webapp/internal/handlers.(*DeviceHandler).CreateDevice-fm (5 handlers)
[GIN-debug] GET    /devices/:id              --> go-barcode-webapp/internal/handlers.(*DeviceHandler).GetDevice-fm (5 handlers)
[GIN-debug] GET    /devices/:id/edit         --> go-barcode-webapp/internal/handlers.(*DeviceHandler).EditDeviceForm-fm (5 handlers)
[GIN-debug] PUT    /devices/:id              --> go-barcode-webapp/internal/handlers.(*DeviceHandler).UpdateDevice-fm (5 handlers)
[GIN-debug] DELETE /devices/:id              --> go-barcode-webapp/internal/handlers.(*DeviceHandler).DeleteDevice-fm (5 handlers)
[GIN-debug] GET    /devices/:id/qr           --> go-barcode-webapp/internal/handlers.(*DeviceHandler).GetDeviceQR-fm (5 handlers)
[GIN-debug] GET    /devices/:id/barcode      --> go-barcode-webapp/internal/handlers.(*DeviceHandler).GetDeviceBarcode-fm (5 handlers)
[GIN-debug] GET    /devices/available        --> go-barcode-webapp/internal/handlers.(*DeviceHandler).GetAvailableDevices-fm (5 handlers)
[GIN-debug] GET    /customers                --> go-barcode-webapp/internal/handlers.(*CustomerHandler).ListCustomers-fm (5 handlers)
[GIN-debug] GET    /customers/new            --> go-barcode-webapp/internal/handlers.(*CustomerHandler).NewCustomerForm-fm (5 handlers)
[GIN-debug] POST   /customers                --> go-barcode-webapp/internal/handlers.(*CustomerHandler).CreateCustomer-fm (5 handlers)
[GIN-debug] GET    /customers/:id            --> go-barcode-webapp/internal/handlers.(*CustomerHandler).GetCustomer-fm (5 handlers)
[GIN-debug] GET    /customers/:id/edit       --> go-barcode-webapp/internal/handlers.(*CustomerHandler).EditCustomerForm-fm (5 handlers)
[GIN-debug] PUT    /customers/:id            --> go-barcode-webapp/internal/handlers.(*CustomerHandler).UpdateCustomer-fm (5 handlers)
[GIN-debug] DELETE /customers/:id            --> go-barcode-webapp/internal/handlers.(*CustomerHandler).DeleteCustomer-fm (5 handlers)
[GIN-debug] GET    /statuses                 --> go-barcode-webapp/internal/handlers.(*StatusHandler).ListStatuses-fm (5 handlers)
[GIN-debug] GET    /products                 --> go-barcode-webapp/internal/handlers.(*ProductHandler).ListProducts-fm (5 handlers)
[GIN-debug] GET    /cases                    --> go-barcode-webapp/internal/handlers.(*CaseHandler).ListCases-fm (5 handlers)
[GIN-debug] GET    /cases/new                --> go-barcode-webapp/internal/handlers.(*CaseHandler).NewCaseForm-fm (5 handlers)
[GIN-debug] POST   /cases                    --> go-barcode-webapp/internal/handlers.(*CaseHandler).CreateCase-fm (5 handlers)
[GIN-debug] GET    /cases/:id                --> go-barcode-webapp/internal/handlers.(*CaseHandler).GetCase-fm (5 handlers)
[GIN-debug] GET    /cases/:id/edit           --> go-barcode-webapp/internal/handlers.(*CaseHandler).EditCaseForm-fm (5 handlers)
[GIN-debug] PUT    /cases/:id                --> go-barcode-webapp/internal/handlers.(*CaseHandler).UpdateCase-fm (5 handlers)
[GIN-debug] DELETE /cases/:id                --> go-barcode-webapp/internal/handlers.(*CaseHandler).DeleteCase-fm (5 handlers)
[GIN-debug] GET    /cases/:id/devices        --> go-barcode-webapp/internal/handlers.(*CaseHandler).CaseDeviceMapping-fm (5 handlers)
[GIN-debug] POST   /cases/:id/devices        --> go-barcode-webapp/internal/handlers.(*CaseHandler).ScanDeviceToCase-fm (5 handlers)
[GIN-debug] DELETE /cases/:id/devices/:deviceId --> go-barcode-webapp/internal/handlers.(*CaseHandler).RemoveDeviceFromCase-fm (5 handlers)
[GIN-debug] GET    /barcodes/device/:serialNo/qr --> go-barcode-webapp/internal/handlers.(*BarcodeHandler).GenerateDeviceQR-fm (5 handlers)
[GIN-debug] GET    /barcodes/device/:serialNo/barcode --> go-barcode-webapp/internal/handlers.(*BarcodeHandler).GenerateDeviceBarcode-fm (5 handlers)
[GIN-debug] GET    /scan/select              --> go-barcode-webapp/internal/handlers.(*ScannerHandler).ScanJobSelection-fm (5 handlers)
[GIN-debug] GET    /scan/:jobId              --> go-barcode-webapp/internal/handlers.(*ScannerHandler).ScanJob-fm (5 handlers)
[GIN-debug] POST   /scan/:jobId/assign       --> go-barcode-webapp/internal/handlers.(*ScannerHandler).ScanDevice-fm (5 handlers)
[GIN-debug] DELETE /scan/:jobId/devices/:deviceId --> go-barcode-webapp/internal/handlers.(*ScannerHandler).RemoveDevice-fm (5 handlers)
[GIN-debug] GET    /analytics                --> go-barcode-webapp/internal/handlers.(*AnalyticsHandler).Dashboard-fm (5 handlers)
[GIN-debug] GET    /analytics/revenue        --> go-barcode-webapp/internal/handlers.(*AnalyticsHandler).GetRevenueAPI-fm (5 handlers)
[GIN-debug] GET    /analytics/equipment      --> go-barcode-webapp/internal/handlers.(*AnalyticsHandler).GetEquipmentAPI-fm (5 handlers)
[GIN-debug] GET    /analytics/export         --> go-barcode-webapp/internal/handlers.(*AnalyticsHandler).ExportAnalytics-fm (5 handlers)
[GIN-debug] GET    /search/global            --> go-barcode-webapp/internal/handlers.(*SearchHandler).GlobalSearch-fm (5 handlers)
[GIN-debug] POST   /search/advanced          --> go-barcode-webapp/internal/handlers.(*SearchHandler).AdvancedSearch-fm (5 handlers)
[GIN-debug] GET    /search/suggestions       --> go-barcode-webapp/internal/handlers.(*SearchHandler).SearchSuggestions-fm (5 handlers)
[GIN-debug] GET    /search/saved             --> go-barcode-webapp/internal/handlers.(*SearchHandler).SavedSearches-fm (5 handlers)
[GIN-debug] DELETE /search/saved/:id         --> go-barcode-webapp/internal/handlers.(*SearchHandler).DeleteSavedSearch-fm (5 handlers)
[GIN-debug] POST   /pwa/subscribe            --> go-barcode-webapp/internal/handlers.(*PWAHandler).SubscribePush-fm (5 handlers)
[GIN-debug] POST   /pwa/unsubscribe          --> go-barcode-webapp/internal/handlers.(*PWAHandler).UnsubscribePush-fm (5 handlers)
[GIN-debug] POST   /pwa/sync                 --> go-barcode-webapp/internal/handlers.(*PWAHandler).SyncOfflineData-fm (5 handlers)
[GIN-debug] GET    /pwa/manifest             --> go-barcode-webapp/internal/handlers.(*PWAHandler).GetOfflineManifest-fm (5 handlers)
[GIN-debug] GET    /pwa/install              --> go-barcode-webapp/internal/handlers.(*PWAHandler).InstallPrompt-fm (5 handlers)
[GIN-debug] GET    /pwa/status               --> go-barcode-webapp/internal/handlers.(*PWAHandler).GetConnectionStatus-fm (5 handlers)
[GIN-debug] GET    /workflow/templates       --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).ListJobTemplates-fm (5 handlers)
[GIN-debug] GET    /workflow/templates/new   --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).NewJobTemplateForm-fm (5 handlers)
[GIN-debug] POST   /workflow/templates       --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).CreateJobTemplate-fm (5 handlers)
[GIN-debug] GET    /workflow/templates/:id   --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).GetJobTemplate-fm (5 handlers)
[GIN-debug] GET    /workflow/templates/:id/edit --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).EditJobTemplateForm-fm (5 handlers)
[GIN-debug] PUT    /workflow/templates/:id   --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).UpdateJobTemplate-fm (5 handlers)
[GIN-debug] DELETE /workflow/templates/:id   --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).DeleteJobTemplate-fm (5 handlers)
[GIN-debug] POST   /workflow/templates/:id/create-job --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).CreateJobFromTemplate-fm (5 handlers)
[GIN-debug] GET    /workflow/packages        --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).ListEquipmentPackages-fm (5 handlers)
[GIN-debug] GET    /workflow/packages/new    --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).NewEquipmentPackageForm-fm (5 handlers)
[GIN-debug] GET    /workflow/packages/debug  --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).DebugPackageForm-fm (5 handlers)
[GIN-debug] POST   /workflow/packages        --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).CreateEquipmentPackage-fm (5 handlers)
[GIN-debug] GET    /workflow/packages/:id    --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).GetEquipmentPackage-fm (5 handlers)
[GIN-debug] GET    /workflow/bulk            --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).BulkOperationsForm-fm (5 handlers)
[GIN-debug] POST   /workflow/bulk/update-status --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).BulkUpdateDeviceStatus-fm (5 handlers)
[GIN-debug] POST   /workflow/bulk/assign-job --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).BulkAssignToJob-fm (5 handlers)
[GIN-debug] POST   /workflow/bulk/generate-qr --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).BulkGenerateQRCodes-fm (5 handlers)
[GIN-debug] GET    /workflow/stats           --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).GetWorkflowStats-fm (5 handlers)
[GIN-debug] GET    /documents                --> go-barcode-webapp/internal/handlers.(*DocumentHandler).ListDocuments-fm (5 handlers)
[GIN-debug] GET    /documents/upload         --> go-barcode-webapp/internal/handlers.(*DocumentHandler).UploadDocumentForm-fm (5 handlers)
[GIN-debug] POST   /documents/upload         --> go-barcode-webapp/internal/handlers.(*DocumentHandler).UploadDocument-fm (5 handlers)
[GIN-debug] GET    /documents/:id            --> go-barcode-webapp/internal/handlers.(*DocumentHandler).GetDocument-fm (5 handlers)
[GIN-debug] GET    /documents/:id/view       --> go-barcode-webapp/internal/handlers.(*DocumentHandler).ViewDocument-fm (5 handlers)
[GIN-debug] GET    /documents/:id/download   --> go-barcode-webapp/internal/handlers.(*DocumentHandler).DownloadDocument-fm (5 handlers)
[GIN-debug] DELETE /documents/:id            --> go-barcode-webapp/internal/handlers.(*DocumentHandler).DeleteDocument-fm (5 handlers)
[GIN-debug] GET    /documents/:id/sign       --> go-barcode-webapp/internal/handlers.(*DocumentHandler).SignatureForm-fm (5 handlers)
[GIN-debug] POST   /documents/:id/sign       --> go-barcode-webapp/internal/handlers.(*DocumentHandler).AddSignature-fm (5 handlers)
[GIN-debug] GET    /documents/signatures/:id/verify --> go-barcode-webapp/internal/handlers.(*DocumentHandler).VerifySignature-fm (5 handlers)
[GIN-debug] GET    /financial                --> go-barcode-webapp/internal/handlers.(*FinancialHandler).FinancialDashboard-fm (5 handlers)
[GIN-debug] GET    /financial/transactions   --> go-barcode-webapp/internal/handlers.(*FinancialHandler).ListTransactions-fm (5 handlers)
[GIN-debug] GET    /financial/transactions/new --> go-barcode-webapp/internal/handlers.(*FinancialHandler).NewTransactionForm-fm (5 handlers)
[GIN-debug] POST   /financial/transactions   --> go-barcode-webapp/internal/handlers.(*FinancialHandler).CreateTransaction-fm (5 handlers)
[GIN-debug] GET    /financial/transactions/:id --> go-barcode-webapp/internal/handlers.(*FinancialHandler).GetTransaction-fm (5 handlers)
[GIN-debug] PUT    /financial/transactions/:id/status --> go-barcode-webapp/internal/handlers.(*FinancialHandler).UpdateTransactionStatus-fm (5 handlers)
[GIN-debug] POST   /financial/jobs/:jobId/invoice --> go-barcode-webapp/internal/handlers.(*FinancialHandler).GenerateInvoice-fm (5 handlers)
[GIN-debug] GET    /financial/reports        --> go-barcode-webapp/internal/handlers.(*FinancialHandler).FinancialReports-fm (5 handlers)
[GIN-debug] GET    /financial/api/revenue-report --> go-barcode-webapp/internal/handlers.(*FinancialHandler).GetRevenueReport-fm (5 handlers)
[GIN-debug] GET    /financial/api/payment-report --> go-barcode-webapp/internal/handlers.(*FinancialHandler).GetPaymentReport-fm (5 handlers)
[GIN-debug] GET    /financial/api/export/transactions --> go-barcode-webapp/internal/handlers.(*FinancialHandler).ExportTransactions-fm (5 handlers)
[GIN-debug] GET    /financial/api/export/revenue --> go-barcode-webapp/internal/handlers.(*FinancialHandler).ExportRevenue-fm (5 handlers)
[GIN-debug] GET    /financial/api/export/tax-report --> go-barcode-webapp/internal/handlers.(*FinancialHandler).ExportTaxReportCSV-fm (5 handlers)
[GIN-debug] GET    /invoices                 --> go-barcode-webapp/internal/handlers.(*InvoiceHandlerNew).ListInvoices-fm (5 handlers)
[GIN-debug] GET    /invoices/new             --> go-barcode-webapp/internal/handlers.(*InvoiceHandlerNew).NewInvoiceForm-fm (5 handlers)
[GIN-debug] POST   /invoices                 --> go-barcode-webapp/internal/handlers.(*InvoiceHandlerNew).CreateInvoice-fm (5 handlers)
[GIN-debug] GET    /invoices/:id/edit        --> go-barcode-webapp/internal/handlers.(*InvoiceHandlerNew).EditInvoiceForm-fm (5 handlers)
[GIN-debug] GET    /invoices/:id/preview     --> go-barcode-webapp/internal/handlers.(*InvoiceHandlerNew).PreviewInvoice-fm (5 handlers)
[GIN-debug] DELETE /invoices/:id             --> go-barcode-webapp/internal/handlers.(*InvoiceHandlerNew).DeleteInvoice-fm (5 handlers)
[GIN-debug] GET    /invoices/:id             --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).GetInvoice-fm (5 handlers)
[GIN-debug] PUT    /invoices/:id             --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).UpdateInvoice-fm (5 handlers)
[GIN-debug] PUT    /invoices/:id/status      --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).UpdateInvoiceStatus-fm (5 handlers)
[GIN-debug] GET    /invoices/:id/pdf         --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).GenerateInvoicePDF-fm (5 handlers)
[GIN-debug] POST   /invoices/:id/email       --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).EmailInvoice-fm (5 handlers)
[GIN-debug] GET    /invoice-templates        --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).ListInvoiceTemplates-fm (5 handlers)
[GIN-debug] GET    /invoice-templates/new    --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).NewInvoiceTemplateForm-fm (5 handlers)
[GIN-debug] POST   /invoice-templates        --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).CreateInvoiceTemplate-fm (5 handlers)
[GIN-debug] GET    /invoice-templates/:id    --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).GetInvoiceTemplate-fm (5 handlers)
[GIN-debug] GET    /invoice-templates/:id/edit --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).EditInvoiceTemplateForm-fm (5 handlers)
[GIN-debug] GET    /invoice-templates/:id/preview --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).PreviewInvoiceTemplate-fm (5 handlers)
[GIN-debug] PUT    /invoice-templates/:id    --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).UpdateInvoiceTemplate-fm (5 handlers)
[GIN-debug] DELETE /invoice-templates/:id    --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).DeleteInvoiceTemplate-fm (5 handlers)
[GIN-debug] GET    /settings/company         --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).CompanySettingsForm-fm (5 handlers)
[GIN-debug] PUT    /settings/company         --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).UpdateCompanySettings-fm (5 handlers)
[GIN-debug] GET    /settings/invoices        --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).InvoiceSettingsForm-fm (5 handlers)
[GIN-debug] PUT    /settings/invoices        --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).UpdateInvoiceSettings-fm (5 handlers)
[GIN-debug] GET    /security/roles           --> main.setupRoutes.func3 (5 handlers)
[GIN-debug] GET    /security/audit           --> main.setupRoutes.func4 (5 handlers)
[GIN-debug] GET    /security/api/roles       --> go-barcode-webapp/internal/handlers.(*SecurityHandler).GetRoles-fm (5 handlers)
[GIN-debug] GET    /security/api/roles/:id   --> go-barcode-webapp/internal/handlers.(*SecurityHandler).GetRole-fm (5 handlers)
[GIN-debug] POST   /security/api/roles       --> go-barcode-webapp/internal/handlers.(*SecurityHandler).CreateRole-fm (5 handlers)
[GIN-debug] PUT    /security/api/roles/:id   --> go-barcode-webapp/internal/handlers.(*SecurityHandler).UpdateRole-fm (5 handlers)
[GIN-debug] DELETE /security/api/roles/:id   --> go-barcode-webapp/internal/handlers.(*SecurityHandler).DeleteRole-fm (5 handlers)
[GIN-debug] GET    /security/api/users/:userId/roles --> go-barcode-webapp/internal/handlers.(*SecurityHandler).GetUserRoles-fm (5 handlers)
[GIN-debug] POST   /security/api/users/:userId/roles --> go-barcode-webapp/internal/handlers.(*SecurityHandler).AssignUserRole-fm (5 handlers)
[GIN-debug] DELETE /security/api/users/:userId/roles/:roleId --> go-barcode-webapp/internal/handlers.(*SecurityHandler).RevokeUserRole-fm (5 handlers)
[GIN-debug] GET    /security/api/audit       --> go-barcode-webapp/internal/handlers.(*SecurityHandler).GetAuditLogs-fm (5 handlers)
[GIN-debug] GET    /security/api/audit/:id   --> go-barcode-webapp/internal/handlers.(*SecurityHandler).GetAuditLog-fm (5 handlers)
[GIN-debug] GET    /security/api/audit/export --> go-barcode-webapp/internal/handlers.(*SecurityHandler).ExportAuditLogs-fm (5 handlers)
[GIN-debug] GET    /security/api/permissions --> go-barcode-webapp/internal/handlers.(*SecurityHandler).GetPermissions-fm (5 handlers)
[GIN-debug] GET    /security/api/permissions/definitions --> go-barcode-webapp/internal/handlers.(*SecurityHandler).GetPermissionDefinitionsAPI-fm (5 handlers)
[GIN-debug] GET    /security/api/permissions/check --> go-barcode-webapp/internal/handlers.(*SecurityHandler).CheckPermission-fm (5 handlers)
[GIN-debug] GET    /mobile/scanner/:jobId    --> main.setupRoutes.func5 (5 handlers)
[GIN-debug] GET    /mobile/scanner/:jobId/enhanced --> main.setupRoutes.func6 (5 handlers)
[GIN-debug] GET    /users                    --> go-barcode-webapp/internal/handlers.(*AuthHandler).ListUsers-fm (5 handlers)
[GIN-debug] POST   /users                    --> go-barcode-webapp/internal/handlers.(*AuthHandler).CreateUserWeb-fm (5 handlers)
[GIN-debug] GET    /user-management/new      --> go-barcode-webapp/internal/handlers.(*AuthHandler).NewUserForm-fm (5 handlers)
[GIN-debug] GET    /user-management/:id/edit --> go-barcode-webapp/internal/handlers.(*AuthHandler).EditUserForm-fm (5 handlers)
[GIN-debug] GET    /user-management/:id/view --> go-barcode-webapp/internal/handlers.(*AuthHandler).GetUser-fm (5 handlers)
[GIN-debug] PUT    /user-management/:id      --> go-barcode-webapp/internal/handlers.(*AuthHandler).UpdateUser-fm (5 handlers)
[GIN-debug] DELETE /user-management/:id      --> go-barcode-webapp/internal/handlers.(*AuthHandler).DeleteUser-fm (5 handlers)
[GIN-debug] GET    /users/new                --> main.setupRoutes.func7 (5 handlers)
[GIN-debug] GET    /api/v1/jobs              --> go-barcode-webapp/internal/handlers.(*JobHandler).ListJobsAPI-fm (5 handlers)
[GIN-debug] POST   /api/v1/jobs              --> go-barcode-webapp/internal/handlers.(*JobHandler).CreateJobAPI-fm (5 handlers)
[GIN-debug] GET    /api/v1/jobs/:id          --> go-barcode-webapp/internal/handlers.(*JobHandler).GetJobAPI-fm (5 handlers)
[GIN-debug] PUT    /api/v1/jobs/:id          --> go-barcode-webapp/internal/handlers.(*JobHandler).UpdateJobAPI-fm (5 handlers)
[GIN-debug] DELETE /api/v1/jobs/:id          --> go-barcode-webapp/internal/handlers.(*JobHandler).DeleteJobAPI-fm (5 handlers)
[GIN-debug] POST   /api/v1/jobs/:id/devices/:deviceId --> go-barcode-webapp/internal/handlers.(*JobHandler).AssignDeviceAPI-fm (5 handlers)
[GIN-debug] DELETE /api/v1/jobs/:id/devices/:deviceId --> go-barcode-webapp/internal/handlers.(*JobHandler).RemoveDeviceAPI-fm (5 handlers)
[GIN-debug] POST   /api/v1/jobs/:id/bulk-scan --> go-barcode-webapp/internal/handlers.(*JobHandler).BulkScanDevicesAPI-fm (5 handlers)
[GIN-debug] POST   /api/v1/jobs/:id/assign-device --> go-barcode-webapp/internal/handlers.(*ScannerHandler).ScanDevice-fm (5 handlers)
[GIN-debug] POST   /api/v1/jobs/:id/assign-case --> go-barcode-webapp/internal/handlers.(*ScannerHandler).ScanCase-fm (5 handlers)
[GIN-debug] GET    /api/v1/devices           --> go-barcode-webapp/internal/handlers.(*DeviceHandler).ListDevicesAPI-fm (5 handlers)
[GIN-debug] POST   /api/v1/devices           --> go-barcode-webapp/internal/handlers.(*DeviceHandler).CreateDeviceAPI-fm (5 handlers)
[GIN-debug] GET    /api/v1/devices/:id       --> go-barcode-webapp/internal/handlers.(*DeviceHandler).GetDeviceAPI-fm (5 handlers)
[GIN-debug] PUT    /api/v1/devices/:id       --> go-barcode-webapp/internal/handlers.(*DeviceHandler).UpdateDeviceAPI-fm (5 handlers)
[GIN-debug] DELETE /api/v1/devices/:id       --> go-barcode-webapp/internal/handlers.(*DeviceHandler).DeleteDeviceAPI-fm (5 handlers)
[GIN-debug] GET    /api/v1/devices/available --> go-barcode-webapp/internal/handlers.(*DeviceHandler).GetAvailableDevicesAPI-fm (5 handlers)
[GIN-debug] GET    /api/v1/customers         --> go-barcode-webapp/internal/handlers.(*CustomerHandler).ListCustomersAPI-fm (5 handlers)
[GIN-debug] POST   /api/v1/customers         --> go-barcode-webapp/internal/handlers.(*CustomerHandler).CreateCustomerAPI-fm (5 handlers)
[GIN-debug] GET    /api/v1/customers/:id     --> go-barcode-webapp/internal/handlers.(*CustomerHandler).GetCustomerAPI-fm (5 handlers)
[GIN-debug] PUT    /api/v1/customers/:id     --> go-barcode-webapp/internal/handlers.(*CustomerHandler).UpdateCustomerAPI-fm (5 handlers)
[GIN-debug] DELETE /api/v1/customers/:id     --> go-barcode-webapp/internal/handlers.(*CustomerHandler).DeleteCustomerAPI-fm (5 handlers)
[GIN-debug] GET    /api/v1/cases             --> go-barcode-webapp/internal/handlers.(*CaseHandler).ListCasesAPI-fm (5 handlers)
[GIN-debug] POST   /api/v1/cases             --> go-barcode-webapp/internal/handlers.(*CaseHandler).CreateCaseAPI-fm (5 handlers)
[GIN-debug] GET    /api/v1/cases/:id         --> go-barcode-webapp/internal/handlers.(*CaseHandler).GetCaseAPI-fm (5 handlers)
[GIN-debug] PUT    /api/v1/cases/:id         --> go-barcode-webapp/internal/handlers.(*CaseHandler).UpdateCaseAPI-fm (5 handlers)
[GIN-debug] DELETE /api/v1/cases/:id         --> go-barcode-webapp/internal/handlers.(*CaseHandler).DeleteCaseAPI-fm (5 handlers)
[GIN-debug] GET    /api/v1/cases/:id/devices --> go-barcode-webapp/internal/handlers.(*CaseHandler).GetCaseDevicesAPI-fm (5 handlers)
[GIN-debug] GET    /api/v1/workflow/templates --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).ListJobTemplatesAPI-fm (5 handlers)
[GIN-debug] POST   /api/v1/workflow/templates --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).CreateJobTemplate-fm (5 handlers)
[GIN-debug] GET    /api/v1/workflow/templates/most-used --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).GetMostUsedTemplatesAPI-fm (5 handlers)
[GIN-debug] GET    /api/v1/workflow/templates/category/:categoryId --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).GetTemplatesByCategoryAPI-fm (5 handlers)
[GIN-debug] GET    /api/v1/workflow/templates/:id --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).GetJobTemplate-fm (5 handlers)
[GIN-debug] PUT    /api/v1/workflow/templates/:id --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).UpdateJobTemplate-fm (5 handlers)
[GIN-debug] DELETE /api/v1/workflow/templates/:id --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).DeleteJobTemplate-fm (5 handlers)
[GIN-debug] POST   /api/v1/workflow/templates/:id/create-job --> go-barcode-webapp/internal/handlers.(*WorkflowHandler).CreateJobFromTemplate-fm (5 handlers)
[GIN-debug] GET    /api/v1/documents         --> go-barcode-webapp/internal/handlers.(*DocumentHandler).ListDocumentsAPI-fm (5 handlers)
[GIN-debug] GET    /api/v1/documents/stats   --> go-barcode-webapp/internal/handlers.(*DocumentHandler).GetDocumentStats-fm (5 handlers)
[GIN-debug] GET    /api/v1/documents/:id     --> go-barcode-webapp/internal/handlers.(*DocumentHandler).GetDocument-fm (5 handlers)
[GIN-debug] DELETE /api/v1/documents/:id     --> go-barcode-webapp/internal/handlers.(*DocumentHandler).DeleteDocument-fm (5 handlers)
[GIN-debug] GET    /api/v1/financial/transactions --> go-barcode-webapp/internal/handlers.(*FinancialHandler).ListTransactionsAPI-fm (5 handlers)
[GIN-debug] GET    /api/v1/financial/stats   --> go-barcode-webapp/internal/handlers.(*FinancialHandler).GetFinancialStatsAPI-fm (5 handlers)
[GIN-debug] GET    /api/v1/financial/revenue-report --> go-barcode-webapp/internal/handlers.(*FinancialHandler).GetRevenueReport-fm (5 handlers)
[GIN-debug] GET    /api/v1/financial/payment-report --> go-barcode-webapp/internal/handlers.(*FinancialHandler).GetPaymentReport-fm (5 handlers)
[GIN-debug] POST   /api/v1/invoices          --> go-barcode-webapp/internal/handlers.(*InvoiceHandlerNew).CreateInvoice-fm (5 handlers)
[GIN-debug] DELETE /api/v1/invoices/:id      --> go-barcode-webapp/internal/handlers.(*InvoiceHandlerNew).DeleteInvoice-fm (5 handlers)
[GIN-debug] GET    /api/v1/invoices          --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).GetInvoicesAPI-fm (5 handlers)
[GIN-debug] GET    /api/v1/invoices/:id      --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).GetInvoice-fm (5 handlers)
[GIN-debug] PUT    /api/v1/invoices/:id      --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).UpdateInvoice-fm (5 handlers)
[GIN-debug] PUT    /api/v1/invoices/:id/status --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).UpdateInvoiceStatus-fm (5 handlers)
[GIN-debug] GET    /api/v1/invoices/stats    --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).GetInvoiceStatsAPI-fm (5 handlers)
[GIN-debug] GET    /api/v1/security/audit    --> go-barcode-webapp/internal/handlers.(*SecurityHandler).GetAuditLogs-fm (5 handlers)
[GIN-debug] GET    /api/v1/security/audit/:id --> go-barcode-webapp/internal/handlers.(*SecurityHandler).GetAuditLog-fm (5 handlers)
[GIN-debug] GET    /api/v1/security/audit/export --> go-barcode-webapp/internal/handlers.(*SecurityHandler).ExportAuditLogs-fm (5 handlers)
[GIN-debug] GET    /api/v1/security/auth/users --> go-barcode-webapp/internal/handlers.(*AuthHandler).ListUsersAPI-fm (5 handlers)
[GIN-debug] POST   /api/invoices             --> go-barcode-webapp/internal/handlers.(*InvoiceHandlerNew).CreateInvoice-fm (5 handlers)
[GIN-debug] DELETE /api/invoices/:id         --> go-barcode-webapp/internal/handlers.(*InvoiceHandlerNew).DeleteInvoice-fm (5 handlers)
[GIN-debug] GET    /api/invoices             --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).GetInvoicesAPI-fm (5 handlers)
[GIN-debug] GET    /api/invoices/:id         --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).GetInvoice-fm (5 handlers)
[GIN-debug] PUT    /api/invoices/:id         --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).UpdateInvoice-fm (5 handlers)
[GIN-debug] PUT    /api/invoices/:id/status  --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).UpdateInvoiceStatus-fm (5 handlers)
[GIN-debug] GET    /api/invoices/stats       --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).GetInvoiceStatsAPI-fm (5 handlers)
[GIN-debug] GET    /api/company-settings     --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).CompanySettingsForm-fm (5 handlers)
[GIN-debug] PUT    /api/company-settings     --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).UpdateCompanySettings-fm (5 handlers)
[GIN-debug] GET    /api/invoice-settings     --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).InvoiceSettingsForm-fm (5 handlers)
[GIN-debug] PUT    /api/invoice-settings     --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).UpdateInvoiceSettings-fm (5 handlers)
[GIN-debug] POST   /api/test-email           --> go-barcode-webapp/internal/handlers.(*InvoiceHandler).TestEmailSettings-fm (5 handlers)
[GIN-debug] GET    /api/security/roles       --> go-barcode-webapp/internal/handlers.(*SecurityHandler).GetRoles-fm (5 handlers)
[GIN-debug] GET    /api/security/roles/:id   --> go-barcode-webapp/internal/handlers.(*SecurityHandler).GetRole-fm (5 handlers)
[GIN-debug] POST   /api/security/roles       --> go-barcode-webapp/internal/handlers.(*SecurityHandler).CreateRole-fm (5 handlers)
[GIN-debug] PUT    /api/security/roles/:id   --> go-barcode-webapp/internal/handlers.(*SecurityHandler).UpdateRole-fm (5 handlers)
[GIN-debug] DELETE /api/security/roles/:id   --> go-barcode-webapp/internal/handlers.(*SecurityHandler).DeleteRole-fm (5 handlers)
[GIN-debug] GET    /api/security/users/:userId/roles --> go-barcode-webapp/internal/handlers.(*SecurityHandler).GetUserRoles-fm (5 handlers)
[GIN-debug] POST   /api/security/users/:userId/roles --> go-barcode-webapp/internal/handlers.(*SecurityHandler).AssignUserRole-fm (5 handlers)
[GIN-debug] DELETE /api/security/users/:userId/roles/:roleId --> go-barcode-webapp/internal/handlers.(*SecurityHandler).RevokeUserRole-fm (5 handlers)
[GIN-debug] GET    /api/security/audit       --> go-barcode-webapp/internal/handlers.(*SecurityHandler).GetAuditLogs-fm (5 handlers)
[GIN-debug] GET    /api/security/audit/:id   --> go-barcode-webapp/internal/handlers.(*SecurityHandler).GetAuditLog-fm (5 handlers)
[GIN-debug] GET    /api/security/audit/export --> go-barcode-webapp/internal/handlers.(*SecurityHandler).ExportAuditLogs-fm (5 handlers)
[GIN-debug] GET    /api/security/permissions --> go-barcode-webapp/internal/handlers.(*SecurityHandler).GetPermissions-fm (5 handlers)
[GIN-debug] GET    /api/security/check-permission --> go-barcode-webapp/internal/handlers.(*SecurityHandler).CheckPermission-fm (5 handlers)
2025/06/17 23:53:47 Server starting on 0.0.0.0:8080
[GIN] 2025/06/17 - 23:53:55 | 200 |      28.973Âµs |       127.0.0.1 | GET      "/debug/invoice-test"
DEBUG: AuthMiddleware called for URL: /
DEBUG: No session cookie found, redirecting to login
[GIN] 2025/06/18 - 00:07:42 | 303 |      96.247Âµs |       10.0.0.20 | GET      "/"
[GIN] 2025/06/18 - 00:07:42 | 200 |   12.859616ms |       10.0.0.20 | GET      "/login"
[GIN] 2025/06/18 - 00:07:42 | 200 |    4.994589ms |       10.0.0.20 | GET      "/static/css/app.css"
2025/06/18 00:07:43 NotFoundHandler: 404 for path: /static/images/icon-180.png
2025/06/18 00:07:43 renderErrorPage: Rendering error page - Status: 404, Message: Page not found
2025/06/18 00:07:43 NotFoundHandler: 404 for path: /favicon.ico
2025/06/18 00:07:43 renderErrorPage: Rendering error page - Status: 404, Message: Page not found
[GIN] 2025/06/18 - 00:07:43 | 404 |   18.347188ms |       10.0.0.20 | GET      "/favicon.ico"
[GIN] 2025/06/18 - 00:07:43 | 404 |   19.493476ms |       10.0.0.20 | GET      "/static/images/icon-180.png"
2025/06/18 00:07:48 POST request to /login with Content-Type: 'application/x-www-form-urlencoded'
2025/06/18 00:07:48 Form _method parameter: ''

2025/06/18 00:07:48 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:60
[0m[33m[23.338ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = 'admin' AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Creating session for user admin (ID: 5)

2025/06/18 00:07:50 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:88
[0m[33m[188.911ms] [34;1m[rows:1][0m INSERT INTO `sessions` (`session_id`,`user_id`,`expires_at`,`created_at`) VALUES ('c39f9f7bc6577aa7f890491a12db5f2131f1daf6208ee982cfb509f272d249c3',5,'2025-06-18 01:07:49.928','2025-06-18 00:07:49.928')

2025/06/18 00:07:50 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:100
[0m[33m[76.555ms] [34;1m[rows:1][0m UPDATE `users` SET `username`='admin',`email`='admin@yourdomain.com',`password_hash`='$2a$14$1ELNSd1HK/CifiJ4inuCbe.UAk5xR0VWWBeprfzLygbTPd1BRUt7C',`first_name`='',`last_name`='',`is_active`=true,`created_at`='2025-06-13 01:13:45.593',`updated_at`='2025-06-18 00:07:50.129',`last_login`='2025-06-18 00:07:50.117' WHERE `userID` = 5
DEBUG: Login successful, session created: c39f9f7bc6577aa7f890491a12db5f2131f1daf6208ee982cfb509f272d249c3
[GIN] 2025/06/18 - 00:07:50 | 303 |  1.241531827s |       10.0.0.20 | POST     "/login"
DEBUG: AuthMiddleware called for URL: /
DEBUG: Found session cookie: c39f9f7bc6577aa7f890491a12db5f2131f1daf6208ee982cfb509f272d249c3

2025/06/18 00:07:50 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.201ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c39f9f7bc6577aa7f890491a12db5f2131f1daf6208ee982cfb509f272d249c3' AND expires_at > '2025-06-18 00:07:50.208' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 00:07:50 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.896ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 00:07:50 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:41
[0m[33m[10.843ms] [34;1m[rows:1][0m SELECT count(*) FROM `jobs`

2025/06/18 00:07:50 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:42
[0m[33m[11.478ms] [34;1m[rows:1][0m SELECT count(*) FROM `devices`

2025/06/18 00:07:50 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:43
[0m[33m[11.463ms] [34;1m[rows:1][0m SELECT count(*) FROM `customers`

2025/06/18 00:07:50 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:44
[0m[33m[11.971ms] [34;1m[rows:1][0m SELECT count(*) FROM `cases`

2025/06/18 00:07:50 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[11.672ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 5
[GIN] 2025/06/18 - 00:07:50 | 200 |  113.520266ms |       10.0.0.20 | GET      "/"
[GIN] 2025/06/18 - 00:07:50 | 200 |     293.088Âµs |       10.0.0.20 | GET      "/static/css/app-new.css"
[GIN] 2025/06/18 - 00:07:50 | 200 |     225.006Âµs |       10.0.0.20 | GET      "/static/js/app.js"
DEBUG: AuthMiddleware called for URL: /invoices
DEBUG: Found session cookie: c39f9f7bc6577aa7f890491a12db5f2131f1daf6208ee982cfb509f272d249c3

2025/06/18 00:07:54 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.410ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c39f9f7bc6577aa7f890491a12db5f2131f1daf6208ee982cfb509f272d249c3' AND expires_at > '2025-06-18 00:07:54.128' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 00:07:54 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.937ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 00:07:54 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:72
[0m[33m[11.848ms] [34;1m[rows:1][0m SELECT count(*) FROM `invoices`

2025/06/18 00:07:54 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.027ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 00:07:54 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.831ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 5

2025/06/18 00:07:54 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.866ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 5

2025/06/18 00:07:54 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.067ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 5

2025/06/18 00:07:54 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.290ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 5

2025/06/18 00:07:54 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.408ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 5

2025/06/18 00:07:54 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[147.986ms] [34;1m[rows:1][0m SELECT * FROM `invoices` ORDER BY issue_date DESC, created_at DESC LIMIT 20
[GIN] 2025/06/18 - 00:07:54 | 200 |  215.045977ms |       10.0.0.20 | GET      "/invoices"
DEBUG: AuthMiddleware called for URL: /invoices/5
DEBUG: Found session cookie: c39f9f7bc6577aa7f890491a12db5f2131f1daf6208ee982cfb509f272d249c3

2025/06/18 00:07:59 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.143ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c39f9f7bc6577aa7f890491a12db5f2131f1daf6208ee982cfb509f272d249c3' AND expires_at > '2025-06-18 00:07:58.998' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 00:07:59 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.815ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 00:07:59 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.696ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 00:07:59 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.877ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 5

2025/06/18 00:07:59 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.373ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 5

2025/06/18 00:07:59 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.844ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 5

2025/06/18 00:07:59 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[46.038ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 5 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 00:07:59 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[21.645ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 5 ORDER BY payment_date DESC

2025/06/18 00:07:59 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.709ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 5

2025/06/18 00:07:59 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[181.686ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 5 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 00:07:59 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.832ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 00:07:59 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.501ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
[GIN] 2025/06/18 - 00:07:59 | 200 |  260.995204ms |       10.0.0.20 | GET      "/invoices/5"
DEBUG: AuthMiddleware called for URL: /invoices/5/preview
DEBUG: Found session cookie: c39f9f7bc6577aa7f890491a12db5f2131f1daf6208ee982cfb509f272d249c3

2025/06/18 00:08:01 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.508ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c39f9f7bc6577aa7f890491a12db5f2131f1daf6208ee982cfb509f272d249c3' AND expires_at > '2025-06-18 00:08:01.56' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 00:08:01 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.662ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 00:08:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[24.568ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 00:08:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.953ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 5

2025/06/18 00:08:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.293ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 5

2025/06/18 00:08:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[24.148ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 5

2025/06/18 00:08:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[47.624ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 5 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 00:08:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.832ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 5 ORDER BY payment_date DESC

2025/06/18 00:08:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.954ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 5

2025/06/18 00:08:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[190.839ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 5 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 00:08:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.418ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 00:08:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.995ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 00:08:01 PreviewInvoice: Showing preview for invoice INV-2025060001
[GIN] 2025/06/18 - 00:08:01 | 200 |  271.422145ms |       10.0.0.20 | GET      "/invoices/5/preview"
Error #01: template: invoice_preview_new.html:298:29: executing "invoice_preview_new.html" at <gt .invoice.DiscountAmount 0>: error calling gt: incompatible types for comparison
DEBUG: AuthMiddleware called for URL: /invoices/5/pdf
DEBUG: Found session cookie: c39f9f7bc6577aa7f890491a12db5f2131f1daf6208ee982cfb509f272d249c3

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[24.776ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c39f9f7bc6577aa7f890491a12db5f2131f1daf6208ee982cfb509f272d249c3' AND expires_at > '2025-06-18 00:08:14.274' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.666ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.948ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.162ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 5

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.832ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 5

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.567ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 5

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[47.187ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 5 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.611ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 5 ORDER BY payment_date DESC

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.264ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 5

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[189.102ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 5 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.887ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[10.992ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 00:08:14 PDFService: Generating PDF for invoice INV-2025060001 with 1 line items
2025/06/18 00:08:14 PDFService: Generated HTML content (8496 bytes)
2025/06/18 00:08:14 PDFService: Generated PDF (1393 bytes)
2025/06/18 00:08:14 GenerateInvoicePDF: Detected fallback PDF, redirecting to HTML preview
[GIN] 2025/06/18 - 00:08:14 | 303 |  263.577296ms |       10.0.0.20 | GET      "/invoices/5/pdf"
DEBUG: AuthMiddleware called for URL: /invoices/5/preview
DEBUG: Found session cookie: c39f9f7bc6577aa7f890491a12db5f2131f1daf6208ee982cfb509f272d249c3

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.819ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c39f9f7bc6577aa7f890491a12db5f2131f1daf6208ee982cfb509f272d249c3' AND expires_at > '2025-06-18 00:08:14.547' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.752ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.919ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.150ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 5

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.926ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 5

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.964ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 5

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[47.681ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 5 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.293ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 5 ORDER BY payment_date DESC

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.168ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 5

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[187.342ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 5 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.981ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 00:08:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[12.008ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 00:08:14 PreviewInvoice: Showing preview for invoice INV-2025060001
[GIN] 2025/06/18 - 00:08:14 | 200 |  269.568053ms |       10.0.0.20 | GET      "/invoices/5/preview"
Error #01: template: invoice_preview_new.html:298:29: executing "invoice_preview_new.html" at <gt .invoice.DiscountAmount 0>: error calling gt: incompatible types for comparison
DEBUG: AuthMiddleware called for URL: /invoices/5/pdf
DEBUG: Found session cookie: c39f9f7bc6577aa7f890491a12db5f2131f1daf6208ee982cfb509f272d249c3

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.576ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c39f9f7bc6577aa7f890491a12db5f2131f1daf6208ee982cfb509f272d249c3' AND expires_at > '2025-06-18 00:08:19.068' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.074ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.378ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.903ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 5

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.927ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 5

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.928ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 5

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[46.179ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 5 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.195ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 5 ORDER BY payment_date DESC

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.486ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 5

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[183.524ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 5 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.464ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.357ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 00:08:19 PDFService: Generating PDF for invoice INV-2025060001 with 1 line items
2025/06/18 00:08:19 PDFService: Generated HTML content (8496 bytes)
2025/06/18 00:08:19 PDFService: Generated PDF (1393 bytes)
2025/06/18 00:08:19 GenerateInvoicePDF: Detected fallback PDF, redirecting to HTML preview
[GIN] 2025/06/18 - 00:08:19 | 303 |  255.004834ms |       10.0.0.20 | GET      "/invoices/5/pdf"
DEBUG: AuthMiddleware called for URL: /invoices/5/preview
DEBUG: Found session cookie: c39f9f7bc6577aa7f890491a12db5f2131f1daf6208ee982cfb509f272d249c3

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.568ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c39f9f7bc6577aa7f890491a12db5f2131f1daf6208ee982cfb509f272d249c3' AND expires_at > '2025-06-18 00:08:19.346' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.985ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.751ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.841ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 5

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.835ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 5

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[21.921ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 5

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[44.634ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 5 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.837ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 5 ORDER BY payment_date DESC

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.695ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 5

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[182.304ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 5 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.521ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 00:08:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.581ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 00:08:19 PreviewInvoice: Showing preview for invoice INV-2025060001
[GIN] 2025/06/18 - 00:08:19 | 200 |  260.985744ms |       10.0.0.20 | GET      "/invoices/5/preview"
Error #01: template: invoice_preview_new.html:298:29: executing "invoice_preview_new.html" at <gt .invoice.DiscountAmount 0>: error calling gt: incompatible types for comparison

2025/06/18 00:23:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[138.778ms] [34;1m[rows:12][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 00:23:46.971'
DEBUG: Cleaned up 12 expired sessions

2025/06/18 00:53:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[157.633ms] [34;1m[rows:3][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 00:53:47.071'
DEBUG: Cleaned up 3 expired sessions

2025/06/18 01:23:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[152.418ms] [34;1m[rows:1][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 01:23:47.027'
DEBUG: Cleaned up 1 expired sessions

2025/06/18 01:53:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[142.597ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 01:53:47.071'

2025/06/18 02:23:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[150.955ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 02:23:47.07'

2025/06/18 02:53:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[152.281ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 02:53:47.07'

2025/06/18 03:23:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[163.798ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 03:23:46.975'

2025/06/18 03:53:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[172.089ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 03:53:47.071'

2025/06/18 04:23:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[179.406ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 04:23:47.07'

2025/06/18 04:53:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[167.113ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 04:53:47.055'

2025/06/18 05:23:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[138.959ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 05:23:47.009'

2025/06/18 05:53:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[145.634ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 05:53:47.07'

2025/06/18 06:23:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[146.546ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 06:23:47.011'

2025/06/18 06:53:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[149.794ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 06:53:47.035'

2025/06/18 07:23:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[154.192ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 07:23:47.07'

2025/06/18 07:53:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[145.464ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 07:53:46.985'
DEBUG: AuthMiddleware called for URL: /
DEBUG: No session cookie found, redirecting to login
[GIN] 2025/06/18 - 08:15:02 | 303 |      58.702Âµs |        10.0.0.7 | GET      "/"
[GIN] 2025/06/18 - 08:15:03 | 200 |    9.392786ms |        10.0.0.7 | GET      "/login"
[GIN] 2025/06/18 - 08:15:03 | 200 |     171.651Âµs |        10.0.0.7 | GET      "/static/css/app.css"
2025/06/18 08:15:04 NotFoundHandler: 404 for path: /static/images/icon-180.png
2025/06/18 08:15:04 renderErrorPage: Rendering error page - Status: 404, Message: Page not found
[GIN] 2025/06/18 - 08:15:04 | 404 |    8.931158ms |        10.0.0.7 | GET      "/static/images/icon-180.png"
2025/06/18 08:15:04 NotFoundHandler: 404 for path: /favicon.ico
2025/06/18 08:15:04 renderErrorPage: Rendering error page - Status: 404, Message: Page not found
[GIN] 2025/06/18 - 08:15:04 | 404 |    8.818198ms |        10.0.0.7 | GET      "/favicon.ico"
2025/06/18 08:15:10 POST request to /login with Content-Type: 'application/x-www-form-urlencoded'
2025/06/18 08:15:10 Form _method parameter: ''

2025/06/18 08:15:10 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:60
[0m[33m[114.942ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = 'admin' AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Creating session for user admin (ID: 5)

2025/06/18 08:15:11 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:88
[0m[33m[52.235ms] [34;1m[rows:1][0m INSERT INTO `sessions` (`session_id`,`user_id`,`expires_at`,`created_at`) VALUES ('b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e',5,'2025-06-18 09:15:11.583','2025-06-18 08:15:11.583')

2025/06/18 08:15:11 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:100
[0m[33m[48.124ms] [34;1m[rows:1][0m UPDATE `users` SET `username`='admin',`email`='admin@yourdomain.com',`password_hash`='$2a$14$1ELNSd1HK/CifiJ4inuCbe.UAk5xR0VWWBeprfzLygbTPd1BRUt7C',`first_name`='',`last_name`='',`is_active`=true,`created_at`='2025-06-13 01:13:45.593',`updated_at`='2025-06-18 08:15:11.647',`last_login`='2025-06-18 08:15:11.635' WHERE `userID` = 5
DEBUG: Login successful, session created: b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e
[GIN] 2025/06/18 - 08:15:11 | 303 |  1.153083583s |        10.0.0.7 | POST     "/login"
DEBUG: AuthMiddleware called for URL: /
DEBUG: Found session cookie: b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e

2025/06/18 08:15:11 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.823ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e' AND expires_at > '2025-06-18 08:15:11.773' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:15:11 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.822ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:15:11 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:41
[0m[33m[11.385ms] [34;1m[rows:1][0m SELECT count(*) FROM `jobs`

2025/06/18 08:15:11 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:42
[0m[33m[11.494ms] [34;1m[rows:1][0m SELECT count(*) FROM `devices`

2025/06/18 08:15:11 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:43
[0m[33m[12.087ms] [34;1m[rows:1][0m SELECT count(*) FROM `customers`

2025/06/18 08:15:11 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:44
[0m[33m[11.966ms] [34;1m[rows:1][0m SELECT count(*) FROM `cases`

2025/06/18 08:15:11 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[12.041ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 5
[GIN] 2025/06/18 - 08:15:11 | 200 |  113.127222ms |        10.0.0.7 | GET      "/"
[GIN] 2025/06/18 - 08:15:12 | 200 |     168.335Âµs |        10.0.0.7 | GET      "/static/css/app-new.css"
[GIN] 2025/06/18 - 08:15:12 | 200 |     166.754Âµs |        10.0.0.7 | GET      "/static/js/app.js"
DEBUG: AuthMiddleware called for URL: /invoices
DEBUG: Found session cookie: b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e

2025/06/18 08:15:16 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.980ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e' AND expires_at > '2025-06-18 08:15:16.906' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:15:16 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.466ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:15:16 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:72
[0m[33m[11.331ms] [34;1m[rows:1][0m SELECT count(*) FROM `invoices`

2025/06/18 08:15:16 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.481ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 08:15:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.098ms] [34;1m[rows:2][0m SELECT * FROM `customers` WHERE `customers`.`customerID` IN (6,5)

2025/06/18 08:15:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.373ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` IN (6,5)

2025/06/18 08:15:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.477ms] [34;1m[rows:3][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` IN (6,5)

2025/06/18 08:15:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.521ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` IN (6,5)

2025/06/18 08:15:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.614ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` IN (6,5)

2025/06/18 08:15:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[147.706ms] [34;1m[rows:2][0m SELECT * FROM `invoices` ORDER BY issue_date DESC, created_at DESC LIMIT 20
[GIN] 2025/06/18 - 08:15:17 | 200 |  213.980961ms |        10.0.0.7 | GET      "/invoices"
2025/06/18 08:15:17 NotFoundHandler: 404 for path: /favicon.ico
2025/06/18 08:15:17 renderErrorPage: Rendering error page - Status: 404, Message: Page not found
[GIN] 2025/06/18 - 08:15:17 | 404 |    8.787587ms |        10.0.0.7 | GET      "/favicon.ico"
DEBUG: AuthMiddleware called for URL: /invoices/6/preview
DEBUG: Found session cookie: b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e

2025/06/18 08:15:31 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.289ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e' AND expires_at > '2025-06-18 08:15:31.79' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:15:31 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.545ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:15:31 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.428ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 6

2025/06/18 08:15:31 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.871ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 6

2025/06/18 08:15:31 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.476ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` IN (6,7)

2025/06/18 08:15:31 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[46.701ms] [34;1m[rows:2][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 6 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 08:15:31 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.270ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 6 ORDER BY payment_date DESC

2025/06/18 08:15:31 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.480ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 6

2025/06/18 08:15:31 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[160.320ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 6 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 08:15:32 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.394ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 08:15:32 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.082ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 08:15:32 PreviewInvoice: Showing preview for invoice INV-2025{month}2025060002
[GIN] 2025/06/18 - 08:15:32 | 200 |  238.873844ms |        10.0.0.7 | GET      "/invoices/6/preview"
Error #01: template: invoice_preview_new.html:298:29: executing "invoice_preview_new.html" at <gt .invoice.DiscountAmount 0>: error calling gt: incompatible types for comparison
DEBUG: AuthMiddleware called for URL: /invoices/new
DEBUG: Found session cookie: b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e

2025/06/18 08:15:38 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.706ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e' AND expires_at > '2025-06-18 08:15:38.873' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:15:38 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.421ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:15:38 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:55
[0m[33m[12.282ms] [34;1m[rows:50][0m SELECT * FROM `customers` ORDER BY companyname ASC LIMIT 50

2025/06/18 08:15:38 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[11.514ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 50

2025/06/18 08:15:39 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:489
[0m[33m[110.015ms] [34;1m[rows:1][0m SELECT * FROM `invoice_templates` WHERE is_active = true ORDER BY is_default DESC, name ASC
2025/06/18 08:15:39 NewInvoiceForm: Loaded 50 customers, 3 jobs, 1 templates
[GIN] 2025/06/18 - 08:15:39 | 200 |  188.220345ms |        10.0.0.7 | GET      "/invoices/new"
2025/06/18 08:16:12 POST request to /api/invoices with Content-Type: 'application/json'
DEBUG: AuthMiddleware called for URL: /api/invoices
DEBUG: Found session cookie: b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e

2025/06/18 08:16:12 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.678ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e' AND expires_at > '2025-06-18 08:16:12.926' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:16:12 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.065ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)
2025/06/18 08:16:12 CreateInvoice: Request data: CustomerID=52, JobID=0xc000239720, TemplateID=0xc000239730

2025/06/18 08:16:13 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:21
[0m[33m[22.643ms] [34;1m[rows:1][0m SELECT * FROM `jobs` WHERE `jobs`.`customerID` = 52

2025/06/18 08:16:13 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:21
[0m[33m[46.509ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 52 ORDER BY `customers`.`customerID` LIMIT 1

2025/06/18 08:16:13 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:175
[0m[33m[25.213ms] [34;1m[rows:1][0m INSERT INTO `invoice_line_items` (`invoice_id`,`item_type`,`device_id`,`package_id`,`description`,`quantity`,`unit_price`,`total_price`,`rental_start_date`,`rental_end_date`,`rental_days`,`sort_order`,`created_at`,`updated_at`) VALUES (7,'custom',NULL,NULL,'SUB1001',1,50,50,NULL,NULL,NULL,0,'2025-06-18 08:16:13.019','2025-06-18 08:16:13.019') ON DUPLICATE KEY UPDATE `invoice_id`=VALUES(`invoice_id`)

2025/06/18 08:16:13 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:175
[0m[33m[49.286ms] [34;1m[rows:1][0m INSERT INTO `invoices` (`invoice_number`,`customer_id`,`job_id`,`template_id`,`status`,`issue_date`,`due_date`,`payment_terms`,`subtotal`,`tax_rate`,`tax_amount`,`discount_amount`,`total_amount`,`paid_amount`,`balance_due`,`notes`,`terms_conditions`,`internal_notes`,`sent_at`,`paid_at`,`created_by`,`created_at`,`updated_at`) VALUES ('INV-2025062414',52,1004,2,'draft','2025-06-18 02:00:00','2025-07-18 02:00:00','Net 30',50,0.19,0.095,0,50.095,0,50.095,'','',NULL,NULL,NULL,5,'2025-06-18 08:16:13.03','2025-06-18 08:16:13.03')
2025/06/18 08:16:13 CreateInvoice: Successfully created invoice INV-2025062414 (ID: 7) for customer Noah Ben Tielmann
[GIN] 2025/06/18 - 08:16:13 | 201 |  291.592548ms |        10.0.0.7 | POST     "/api/invoices"
DEBUG: AuthMiddleware called for URL: /invoices
DEBUG: Found session cookie: b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e

2025/06/18 08:16:14 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.561ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e' AND expires_at > '2025-06-18 08:16:14.954' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:16:15 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.099ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:16:15 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:72
[0m[33m[11.273ms] [34;1m[rows:1][0m SELECT count(*) FROM `invoices`

2025/06/18 08:16:15 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.928ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 08:16:15 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.027ms] [34;1m[rows:3][0m SELECT * FROM `customers` WHERE `customers`.`customerID` IN (7,6,5)

2025/06/18 08:16:15 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.848ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` IN (7,6,5)

2025/06/18 08:16:15 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.504ms] [34;1m[rows:4][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` IN (7,6,5)

2025/06/18 08:16:15 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.294ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` IN (7,6,5)

2025/06/18 08:16:15 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.469ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` IN (7,6,5)

2025/06/18 08:16:15 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[151.532ms] [34;1m[rows:3][0m SELECT * FROM `invoices` ORDER BY issue_date DESC, created_at DESC LIMIT 20
[GIN] 2025/06/18 - 08:16:15 | 200 |  221.091889ms |        10.0.0.7 | GET      "/invoices"
DEBUG: AuthMiddleware called for URL: /invoices/7/preview
DEBUG: Found session cookie: b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e

2025/06/18 08:16:22 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.187ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e' AND expires_at > '2025-06-18 08:16:22.16' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:16:22 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.563ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:16:22 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.341ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 08:16:22 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.058ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 7

2025/06/18 08:16:22 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.846ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 7

2025/06/18 08:16:22 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.432ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 8

2025/06/18 08:16:22 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[46.656ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 7 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 08:16:22 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.782ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 7 ORDER BY payment_date DESC

2025/06/18 08:16:22 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.023ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 7

2025/06/18 08:16:22 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[185.507ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 7 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 08:16:22 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.271ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 08:16:22 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.450ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 08:16:22 PreviewInvoice: Showing preview for invoice INV-2025062414
[GIN] 2025/06/18 - 08:16:22 | 200 |  265.629697ms |        10.0.0.7 | GET      "/invoices/7/preview"
Error #01: template: invoice_preview_new.html:298:29: executing "invoice_preview_new.html" at <gt .invoice.DiscountAmount 0>: error calling gt: incompatible types for comparison
DEBUG: AuthMiddleware called for URL: /invoices/7/pdf
DEBUG: Found session cookie: b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e

2025/06/18 08:16:28 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.152ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e' AND expires_at > '2025-06-18 08:16:28.858' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:16:28 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.115ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:16:28 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.033ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 08:16:28 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.891ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 7

2025/06/18 08:16:28 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.906ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 7

2025/06/18 08:16:29 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.968ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 8

2025/06/18 08:16:29 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[46.188ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 7 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 08:16:29 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.906ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 7 ORDER BY payment_date DESC

2025/06/18 08:16:29 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.403ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 7

2025/06/18 08:16:29 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[184.319ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 7 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 08:16:29 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[10.976ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 08:16:29 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.624ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 08:16:29 PDFService: Generating PDF for invoice INV-2025062414 with 1 line items
2025/06/18 08:16:29 PDFService: Generated HTML content (8639 bytes)
2025/06/18 08:16:29 PDFService: Generated PDF (1393 bytes)
2025/06/18 08:16:29 GenerateInvoicePDF: Detected fallback PDF, redirecting to HTML preview
[GIN] 2025/06/18 - 08:16:29 | 303 |  254.840879ms |        10.0.0.7 | GET      "/invoices/7/pdf"
DEBUG: AuthMiddleware called for URL: /invoices/7/preview
DEBUG: Found session cookie: b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e

2025/06/18 08:16:29 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.680ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e' AND expires_at > '2025-06-18 08:16:29.139' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:16:29 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.678ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:16:29 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.215ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 08:16:29 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.726ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 7

2025/06/18 08:16:29 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.409ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 7

2025/06/18 08:16:29 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.987ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 8

2025/06/18 08:16:29 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[46.153ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 7 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 08:16:29 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[21.791ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 7 ORDER BY payment_date DESC

2025/06/18 08:16:29 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[21.991ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 7

2025/06/18 08:16:29 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[181.950ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 7 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 08:16:29 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.437ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 08:16:29 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.438ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 08:16:29 PreviewInvoice: Showing preview for invoice INV-2025062414
[GIN] 2025/06/18 - 08:16:29 | 200 |  260.099768ms |        10.0.0.7 | GET      "/invoices/7/preview"
Error #01: template: invoice_preview_new.html:298:29: executing "invoice_preview_new.html" at <gt .invoice.DiscountAmount 0>: error calling gt: incompatible types for comparison
DEBUG: AuthMiddleware called for URL: /invoices/7/pdf
DEBUG: Found session cookie: b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.266ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e' AND expires_at > '2025-06-18 08:16:34.239' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.364ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.668ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.911ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 7

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.928ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 7

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.586ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 8

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[45.604ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 7 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.827ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 7 ORDER BY payment_date DESC

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.559ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 7

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[183.589ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 7 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.377ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[12.000ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 08:16:34 PDFService: Generating PDF for invoice INV-2025062414 with 1 line items
2025/06/18 08:16:34 PDFService: Generated HTML content (8639 bytes)
2025/06/18 08:16:34 PDFService: Generated PDF (1393 bytes)
2025/06/18 08:16:34 GenerateInvoicePDF: Detected fallback PDF, redirecting to HTML preview
[GIN] 2025/06/18 - 08:16:34 | 303 |  255.626069ms |        10.0.0.7 | GET      "/invoices/7/pdf"
DEBUG: AuthMiddleware called for URL: /invoices/7/preview
DEBUG: Found session cookie: b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.462ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e' AND expires_at > '2025-06-18 08:16:34.533' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.549ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.470ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.320ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 7

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.561ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 7

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.428ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 8

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[46.620ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 7 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.461ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 7 ORDER BY payment_date DESC

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.865ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 7

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[183.896ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 7 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.452ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 08:16:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.042ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 08:16:34 PreviewInvoice: Showing preview for invoice INV-2025062414
[GIN] 2025/06/18 - 08:16:34 | 200 |  259.869635ms |        10.0.0.7 | GET      "/invoices/7/preview"
Error #01: template: invoice_preview_new.html:298:29: executing "invoice_preview_new.html" at <gt .invoice.DiscountAmount 0>: error calling gt: incompatible types for comparison
DEBUG: AuthMiddleware called for URL: /invoices/7/preview
DEBUG: Found session cookie: b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e

2025/06/18 08:17:14 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.100ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'b1bddf8c82e3ee21183db2ffaeaee7f263cdf6368e2160c3a11008eb24142d0e' AND expires_at > '2025-06-18 08:17:14.482' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:17:14 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.565ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:17:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.696ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 08:17:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.652ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 7

2025/06/18 08:17:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.301ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 7

2025/06/18 08:17:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.986ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 8

2025/06/18 08:17:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[45.726ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 7 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 08:17:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.744ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 7 ORDER BY payment_date DESC

2025/06/18 08:17:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.889ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 7

2025/06/18 08:17:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[182.456ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 7 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 08:17:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.485ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 08:17:14 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.515ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 08:17:14 PreviewInvoice: Showing preview for invoice INV-2025062414
[GIN] 2025/06/18 - 08:17:14 | 200 |   260.63683ms |        10.0.0.7 | GET      "/invoices/7/preview"
Error #01: template: invoice_preview_new.html:298:29: executing "invoice_preview_new.html" at <gt .invoice.DiscountAmount 0>: error calling gt: incompatible types for comparison

2025/06/18 08:23:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[116.103ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 08:23:47.059'
DEBUG: AuthMiddleware called for URL: /
DEBUG: No session cookie found, redirecting to login
[GIN] 2025/06/18 - 08:28:37 | 303 |      64.468Âµs |        10.0.0.7 | GET      "/"
[GIN] 2025/06/18 - 08:28:37 | 200 |   11.872292ms |        10.0.0.7 | GET      "/login"
[GIN] 2025/06/18 - 08:28:38 | 200 |     152.612Âµs |        10.0.0.7 | GET      "/static/css/app.css"
2025/06/18 08:28:38 NotFoundHandler: 404 for path: /static/images/icon-180.png
2025/06/18 08:28:38 renderErrorPage: Rendering error page - Status: 404, Message: Page not found
[GIN] 2025/06/18 - 08:28:38 | 404 |    8.856846ms |        10.0.0.7 | GET      "/static/images/icon-180.png"
2025/06/18 08:28:38 NotFoundHandler: 404 for path: /favicon.ico
2025/06/18 08:28:38 renderErrorPage: Rendering error page - Status: 404, Message: Page not found
[GIN] 2025/06/18 - 08:28:38 | 404 |    7.943037ms |        10.0.0.7 | GET      "/favicon.ico"
2025/06/18 08:28:44 POST request to /login with Content-Type: 'application/x-www-form-urlencoded'
2025/06/18 08:28:44 Form _method parameter: ''

2025/06/18 08:28:44 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:60
[0m[33m[23.346ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = 'admin' AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Creating session for user admin (ID: 5)

2025/06/18 08:28:45 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:88
[0m[33m[47.658ms] [34;1m[rows:1][0m INSERT INTO `sessions` (`session_id`,`user_id`,`expires_at`,`created_at`) VALUES ('1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132',5,'2025-06-18 09:28:45.173','2025-06-18 08:28:45.173')

2025/06/18 08:28:45 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:100
[0m[33m[48.150ms] [34;1m[rows:1][0m UPDATE `users` SET `username`='admin',`email`='admin@yourdomain.com',`password_hash`='$2a$14$1ELNSd1HK/CifiJ4inuCbe.UAk5xR0VWWBeprfzLygbTPd1BRUt7C',`first_name`='',`last_name`='',`is_active`=true,`created_at`='2025-06-13 01:13:45.593',`updated_at`='2025-06-18 08:28:45.233',`last_login`='2025-06-18 08:28:45.221' WHERE `userID` = 5
DEBUG: Login successful, session created: 1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132
[GIN] 2025/06/18 - 08:28:45 | 303 |  1.056742343s |        10.0.0.7 | POST     "/login"
DEBUG: AuthMiddleware called for URL: /
DEBUG: Found session cookie: 1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132

2025/06/18 08:28:45 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[29.821ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132' AND expires_at > '2025-06-18 08:28:45.357' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:28:45 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.073ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:28:45 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:41
[0m[33m[11.157ms] [34;1m[rows:1][0m SELECT count(*) FROM `jobs`

2025/06/18 08:28:45 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:42
[0m[33m[11.553ms] [34;1m[rows:1][0m SELECT count(*) FROM `devices`

2025/06/18 08:28:45 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:43
[0m[33m[12.009ms] [34;1m[rows:1][0m SELECT count(*) FROM `customers`

2025/06/18 08:28:45 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:44
[0m[33m[12.058ms] [34;1m[rows:1][0m SELECT count(*) FROM `cases`

2025/06/18 08:28:45 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[11.949ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 5
[GIN] 2025/06/18 - 08:28:45 | 200 |  120.206435ms |        10.0.0.7 | GET      "/"
[GIN] 2025/06/18 - 08:28:45 | 200 |     227.065Âµs |        10.0.0.7 | GET      "/static/css/app-new.css"
[GIN] 2025/06/18 - 08:28:45 | 200 |     188.706Âµs |        10.0.0.7 | GET      "/static/js/app.js"
DEBUG: AuthMiddleware called for URL: /invoices
DEBUG: Found session cookie: 1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132

2025/06/18 08:28:48 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.738ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132' AND expires_at > '2025-06-18 08:28:48.807' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:28:48 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.311ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:28:48 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:72
[0m[33m[11.228ms] [34;1m[rows:1][0m SELECT count(*) FROM `invoices`

2025/06/18 08:28:48 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.430ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 08:28:48 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.963ms] [34;1m[rows:5][0m SELECT * FROM `customers` WHERE `customers`.`customerID` IN (9,8,7,6,5)

2025/06/18 08:28:48 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.914ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` IN (9,8,7,6,5)

2025/06/18 08:28:48 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.113ms] [34;1m[rows:6][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` IN (9,8,7,6,5)

2025/06/18 08:28:48 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.933ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` IN (9,8,7,6,5)

2025/06/18 08:28:49 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.986ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` IN (9,8,7,6,5)

2025/06/18 08:28:49 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[149.725ms] [34;1m[rows:5][0m SELECT * FROM `invoices` ORDER BY issue_date DESC, created_at DESC LIMIT 20
[GIN] 2025/06/18 - 08:28:49 | 200 |  215.779103ms |        10.0.0.7 | GET      "/invoices"
DEBUG: AuthMiddleware called for URL: /invoices/9/preview
DEBUG: Found session cookie: 1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132

2025/06/18 08:28:56 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.504ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132' AND expires_at > '2025-06-18 08:28:56.572' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:28:56 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.062ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:28:56 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.233ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 9

2025/06/18 08:28:56 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.334ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 9

2025/06/18 08:28:56 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.403ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 10

2025/06/18 08:28:56 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[45.618ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 9 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 08:28:56 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.340ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 9 ORDER BY payment_date DESC

2025/06/18 08:28:56 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.876ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 9

2025/06/18 08:28:56 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[159.502ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 9 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 08:28:56 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.466ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 08:28:56 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.468ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 08:28:56 PreviewInvoice: Showing preview for invoice INV-2025{month}2025062416
[GIN] 2025/06/18 - 08:28:56 | 200 |  238.435281ms |        10.0.0.7 | GET      "/invoices/9/preview"
Error #01: template: invoice_preview_new.html:298:29: executing "invoice_preview_new.html" at <gt .invoice.DiscountAmount 0>: error calling gt: incompatible types for comparison
DEBUG: AuthMiddleware called for URL: /invoices/9/pdf
DEBUG: Found session cookie: 1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.860ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132' AND expires_at > '2025-06-18 08:29:00.226' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.101ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.524ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 9

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.451ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 9

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.996ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 10

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[46.090ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 9 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.201ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 9 ORDER BY payment_date DESC

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.889ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 9

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[160.208ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 9 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.886ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.247ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 08:29:00 PDFService: Generating PDF for invoice INV-2025{month}2025062416 with 1 line items
2025/06/18 08:29:00 PDFService: Generated HTML content (8569 bytes)
2025/06/18 08:29:00 PDFService: Generated PDF (1393 bytes)
2025/06/18 08:29:00 GenerateInvoicePDF: Detected fallback PDF, redirecting to HTML preview
[GIN] 2025/06/18 - 08:29:00 | 303 |  231.398494ms |        10.0.0.7 | GET      "/invoices/9/pdf"
DEBUG: AuthMiddleware called for URL: /invoices/9/preview
DEBUG: Found session cookie: 1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[24.176ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132' AND expires_at > '2025-06-18 08:29:00.619' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.291ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.129ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 9

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.941ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 9

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.529ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 10

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[46.827ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 9 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[24.236ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 9 ORDER BY payment_date DESC

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.531ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 9

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[164.988ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 9 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.608ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 08:29:00 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.618ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 08:29:00 PreviewInvoice: Showing preview for invoice INV-2025{month}2025062416
[GIN] 2025/06/18 - 08:29:00 | 200 |  243.105397ms |        10.0.0.7 | GET      "/invoices/9/preview"
Error #01: template: invoice_preview_new.html:298:29: executing "invoice_preview_new.html" at <gt .invoice.DiscountAmount 0>: error calling gt: incompatible types for comparison
DEBUG: AuthMiddleware called for URL: /invoices/new
DEBUG: Found session cookie: 1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132

2025/06/18 08:29:06 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.568ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132' AND expires_at > '2025-06-18 08:29:06.192' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:29:06 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.000ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:29:06 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:55
[0m[33m[12.576ms] [34;1m[rows:50][0m SELECT * FROM `customers` ORDER BY companyname ASC LIMIT 50

2025/06/18 08:29:06 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[12.406ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 50

2025/06/18 08:29:06 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:489
[0m[33m[112.817ms] [34;1m[rows:1][0m SELECT * FROM `invoice_templates` WHERE is_active = true ORDER BY is_default DESC, name ASC
2025/06/18 08:29:06 NewInvoiceForm: Loaded 50 customers, 3 jobs, 1 templates
[GIN] 2025/06/18 - 08:29:06 | 200 |   193.27399ms |        10.0.0.7 | GET      "/invoices/new"
2025/06/18 08:29:22 POST request to /api/invoices with Content-Type: 'application/json'
DEBUG: AuthMiddleware called for URL: /api/invoices
DEBUG: Found session cookie: 1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132

2025/06/18 08:29:22 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.670ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132' AND expires_at > '2025-06-18 08:29:22.248' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:29:22 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.109ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)
2025/06/18 08:29:22 CreateInvoice: Binding error: Key: 'InvoiceCreateRequest.LineItems[0].UnitPrice' Error:Field validation for 'UnitPrice' failed on the 'required' tag
[GIN] 2025/06/18 - 08:29:22 | 400 |   47.095791ms |        10.0.0.7 | POST     "/api/invoices"
2025/06/18 08:29:29 POST request to /api/invoices with Content-Type: 'application/json'
DEBUG: AuthMiddleware called for URL: /api/invoices
DEBUG: Found session cookie: 1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132

2025/06/18 08:29:29 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.579ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132' AND expires_at > '2025-06-18 08:29:29.179' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:29:29 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.703ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)
2025/06/18 08:29:29 CreateInvoice: Request data: CustomerID=52, JobID=0xc00037c5f8, TemplateID=0xc00037c668

2025/06/18 08:29:29 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:21
[0m[33m[23.240ms] [34;1m[rows:1][0m SELECT * FROM `jobs` WHERE `jobs`.`customerID` = 52

2025/06/18 08:29:29 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:21
[0m[33m[46.069ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 52 ORDER BY `customers`.`customerID` LIMIT 1

2025/06/18 08:29:29 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:175
[0m[33m[22.569ms] [34;1m[rows:1][0m INSERT INTO `invoice_line_items` (`invoice_id`,`item_type`,`device_id`,`package_id`,`description`,`quantity`,`unit_price`,`total_price`,`rental_start_date`,`rental_end_date`,`rental_days`,`sort_order`,`created_at`,`updated_at`) VALUES (10,'custom',NULL,NULL,'SUb1001',1,10,10,NULL,NULL,NULL,0,'2025-06-18 08:29:29.271','2025-06-18 08:29:29.271') ON DUPLICATE KEY UPDATE `invoice_id`=VALUES(`invoice_id`)

2025/06/18 08:29:29 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:175
[0m[33m[45.800ms] [34;1m[rows:1][0m INSERT INTO `invoices` (`invoice_number`,`customer_id`,`job_id`,`template_id`,`status`,`issue_date`,`due_date`,`payment_terms`,`subtotal`,`tax_rate`,`tax_amount`,`discount_amount`,`total_amount`,`paid_amount`,`balance_due`,`notes`,`terms_conditions`,`internal_notes`,`sent_at`,`paid_at`,`created_by`,`created_at`,`updated_at`) VALUES ('INV-2025063210',52,1004,2,'draft','2025-06-18 02:00:00','2025-07-18 02:00:00','Net 30',10,0.19,0.019,0,10.019,0,10.019,'','',NULL,NULL,NULL,5,'2025-06-18 08:29:29.282','2025-06-18 08:29:29.282')
2025/06/18 08:29:29 CreateInvoice: Successfully created invoice INV-2025063210 (ID: 10) for customer Noah Ben Tielmann
[GIN] 2025/06/18 - 08:29:29 | 201 |  160.724877ms |        10.0.0.7 | POST     "/api/invoices"
DEBUG: AuthMiddleware called for URL: /invoices
DEBUG: Found session cookie: 1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132

2025/06/18 08:29:31 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.519ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132' AND expires_at > '2025-06-18 08:29:31.086' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:29:31 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.719ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:29:31 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:72
[0m[33m[11.266ms] [34;1m[rows:1][0m SELECT count(*) FROM `invoices`

2025/06/18 08:29:31 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.067ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 08:29:31 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.043ms] [34;1m[rows:6][0m SELECT * FROM `customers` WHERE `customers`.`customerID` IN (10,9,8,7,6,5)

2025/06/18 08:29:31 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.850ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` IN (10,9,8,7,6,5)

2025/06/18 08:29:31 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.561ms] [34;1m[rows:7][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` IN (10,9,8,7,6,5)

2025/06/18 08:29:31 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.319ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` IN (10,9,8,7,6,5)

2025/06/18 08:29:31 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.910ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` IN (10,9,8,7,6,5)

2025/06/18 08:29:31 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[149.645ms] [34;1m[rows:6][0m SELECT * FROM `invoices` ORDER BY issue_date DESC, created_at DESC LIMIT 20
[GIN] 2025/06/18 - 08:29:31 | 200 |  217.969268ms |        10.0.0.7 | GET      "/invoices"
DEBUG: AuthMiddleware called for URL: /invoices/new
DEBUG: Found session cookie: 1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132

2025/06/18 08:29:31 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.575ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132' AND expires_at > '2025-06-18 08:29:31.85' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:29:31 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.079ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:29:31 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:55
[0m[33m[12.316ms] [34;1m[rows:50][0m SELECT * FROM `customers` ORDER BY companyname ASC LIMIT 50

2025/06/18 08:29:31 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[11.586ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 50

2025/06/18 08:29:32 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:489
[0m[33m[110.426ms] [34;1m[rows:1][0m SELECT * FROM `invoice_templates` WHERE is_active = true ORDER BY is_default DESC, name ASC
2025/06/18 08:29:32 NewInvoiceForm: Loaded 50 customers, 3 jobs, 1 templates
[GIN] 2025/06/18 - 08:29:32 | 200 |  188.698251ms |        10.0.0.7 | GET      "/invoices/new"
DEBUG: AuthMiddleware called for URL: /invoices
DEBUG: Found session cookie: 1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132

2025/06/18 08:29:34 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.228ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '1b47fbae31371ae22b1759596ce5315021baf2cad676cd33551f170221396132' AND expires_at > '2025-06-18 08:29:34.25' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:29:34 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.069ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:29:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:72
[0m[33m[11.397ms] [34;1m[rows:1][0m SELECT count(*) FROM `invoices`

2025/06/18 08:29:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.131ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 08:29:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.953ms] [34;1m[rows:6][0m SELECT * FROM `customers` WHERE `customers`.`customerID` IN (10,9,8,7,6,5)

2025/06/18 08:29:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.432ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` IN (10,9,8,7,6,5)

2025/06/18 08:29:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.146ms] [34;1m[rows:7][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` IN (10,9,8,7,6,5)

2025/06/18 08:29:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.836ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` IN (10,9,8,7,6,5)

2025/06/18 08:29:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.487ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` IN (10,9,8,7,6,5)

2025/06/18 08:29:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[149.201ms] [34;1m[rows:6][0m SELECT * FROM `invoices` ORDER BY issue_date DESC, created_at DESC LIMIT 20
[GIN] 2025/06/18 - 08:29:34 | 200 |  215.691187ms |        10.0.0.7 | GET      "/invoices"
DEBUG: AuthMiddleware called for URL: /
DEBUG: No session cookie found, redirecting to login
[GIN] 2025/06/18 - 08:30:48 | 303 |      77.949Âµs |        10.0.0.7 | GET      "/"
[GIN] 2025/06/18 - 08:30:48 | 200 |    9.254221ms |        10.0.0.7 | GET      "/login"
[GIN] 2025/06/18 - 08:30:48 | 200 |     163.153Âµs |        10.0.0.7 | GET      "/static/css/app.css"
2025/06/18 08:30:49 NotFoundHandler: 404 for path: /static/images/icon-180.png
2025/06/18 08:30:49 renderErrorPage: Rendering error page - Status: 404, Message: Page not found
[GIN] 2025/06/18 - 08:30:49 | 404 |    8.258922ms |        10.0.0.7 | GET      "/static/images/icon-180.png"
2025/06/18 08:30:49 NotFoundHandler: 404 for path: /favicon.ico
2025/06/18 08:30:49 renderErrorPage: Rendering error page - Status: 404, Message: Page not found
[GIN] 2025/06/18 - 08:30:49 | 404 |     8.67942ms |        10.0.0.7 | GET      "/favicon.ico"
2025/06/18 08:30:57 POST request to /login with Content-Type: 'application/x-www-form-urlencoded'
2025/06/18 08:30:57 Form _method parameter: ''

2025/06/18 08:30:57 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:60
[0m[33m[23.173ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = 'admin' AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Creating session for user admin (ID: 5)

2025/06/18 08:30:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:88
[0m[33m[46.602ms] [34;1m[rows:1][0m INSERT INTO `sessions` (`session_id`,`user_id`,`expires_at`,`created_at`) VALUES ('fdeb598257580ffdfaa7d332fd5d195d9801f60bde09f03e8ee7d7440a778d9f',5,'2025-06-18 09:30:58.219','2025-06-18 08:30:58.219')

2025/06/18 08:30:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:100
[0m[33m[46.508ms] [34;1m[rows:1][0m UPDATE `users` SET `username`='admin',`email`='admin@yourdomain.com',`password_hash`='$2a$14$1ELNSd1HK/CifiJ4inuCbe.UAk5xR0VWWBeprfzLygbTPd1BRUt7C',`first_name`='',`last_name`='',`is_active`=true,`created_at`='2025-06-13 01:13:45.593',`updated_at`='2025-06-18 08:30:58.278',`last_login`='2025-06-18 08:30:58.266' WHERE `userID` = 5
DEBUG: Login successful, session created: fdeb598257580ffdfaa7d332fd5d195d9801f60bde09f03e8ee7d7440a778d9f
[GIN] 2025/06/18 - 08:30:58 | 303 |  1.057109411s |        10.0.0.7 | POST     "/login"
DEBUG: AuthMiddleware called for URL: /
DEBUG: Found session cookie: fdeb598257580ffdfaa7d332fd5d195d9801f60bde09f03e8ee7d7440a778d9f

2025/06/18 08:30:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.201ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'fdeb598257580ffdfaa7d332fd5d195d9801f60bde09f03e8ee7d7440a778d9f' AND expires_at > '2025-06-18 08:30:58.395' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:30:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.568ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:30:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:41
[0m[33m[11.219ms] [34;1m[rows:1][0m SELECT count(*) FROM `jobs`

2025/06/18 08:30:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:42
[0m[33m[11.174ms] [34;1m[rows:1][0m SELECT count(*) FROM `devices`

2025/06/18 08:30:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:43
[0m[33m[11.965ms] [34;1m[rows:1][0m SELECT count(*) FROM `customers`

2025/06/18 08:30:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:44
[0m[33m[11.982ms] [34;1m[rows:1][0m SELECT count(*) FROM `cases`

2025/06/18 08:30:58 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[12.126ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 5
[GIN] 2025/06/18 - 08:30:58 | 200 |  114.580312ms |        10.0.0.7 | GET      "/"
[GIN] 2025/06/18 - 08:30:58 | 200 |     159.676Âµs |        10.0.0.7 | GET      "/static/css/app-new.css"
[GIN] 2025/06/18 - 08:30:58 | 200 |     145.769Âµs |        10.0.0.7 | GET      "/static/js/app.js"
DEBUG: AuthMiddleware called for URL: /invoices
DEBUG: Found session cookie: fdeb598257580ffdfaa7d332fd5d195d9801f60bde09f03e8ee7d7440a778d9f

2025/06/18 08:31:01 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.810ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'fdeb598257580ffdfaa7d332fd5d195d9801f60bde09f03e8ee7d7440a778d9f' AND expires_at > '2025-06-18 08:31:01.755' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:31:01 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.122ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:31:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:72
[0m[33m[10.847ms] [34;1m[rows:1][0m SELECT count(*) FROM `invoices`

2025/06/18 08:31:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.502ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 08:31:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.920ms] [34;1m[rows:6][0m SELECT * FROM `customers` WHERE `customers`.`customerID` IN (10,9,8,7,6,5)

2025/06/18 08:31:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.864ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` IN (10,9,8,7,6,5)

2025/06/18 08:31:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.557ms] [34;1m[rows:7][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` IN (10,9,8,7,6,5)

2025/06/18 08:31:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.382ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` IN (10,9,8,7,6,5)

2025/06/18 08:31:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.009ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` IN (10,9,8,7,6,5)

2025/06/18 08:31:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[147.598ms] [34;1m[rows:6][0m SELECT * FROM `invoices` ORDER BY issue_date DESC, created_at DESC LIMIT 20
[GIN] 2025/06/18 - 08:31:01 | 200 |  212.348112ms |        10.0.0.7 | GET      "/invoices"
DEBUG: AuthMiddleware called for URL: /invoices/new
DEBUG: Found session cookie: fdeb598257580ffdfaa7d332fd5d195d9801f60bde09f03e8ee7d7440a778d9f

2025/06/18 08:31:04 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.160ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'fdeb598257580ffdfaa7d332fd5d195d9801f60bde09f03e8ee7d7440a778d9f' AND expires_at > '2025-06-18 08:31:04.291' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:31:04 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.633ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:31:04 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:55
[0m[33m[12.101ms] [34;1m[rows:50][0m SELECT * FROM `customers` ORDER BY companyname ASC LIMIT 50

2025/06/18 08:31:04 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[11.954ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 50

2025/06/18 08:31:04 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:489
[0m[33m[110.042ms] [34;1m[rows:1][0m SELECT * FROM `invoice_templates` WHERE is_active = true ORDER BY is_default DESC, name ASC
2025/06/18 08:31:04 NewInvoiceForm: Loaded 50 customers, 3 jobs, 1 templates
[GIN] 2025/06/18 - 08:31:04 | 200 |  190.759159ms |        10.0.0.7 | GET      "/invoices/new"
2025/06/18 08:31:17 POST request to /api/invoices with Content-Type: 'application/json'
DEBUG: AuthMiddleware called for URL: /api/invoices
DEBUG: Found session cookie: fdeb598257580ffdfaa7d332fd5d195d9801f60bde09f03e8ee7d7440a778d9f

2025/06/18 08:31:17 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.717ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'fdeb598257580ffdfaa7d332fd5d195d9801f60bde09f03e8ee7d7440a778d9f' AND expires_at > '2025-06-18 08:31:17.069' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:31:17 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.041ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)
2025/06/18 08:31:17 CreateInvoice: Request data: CustomerID=52, JobID=0xc000015218, TemplateID=0xc000015228

2025/06/18 08:31:17 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:21
[0m[33m[23.046ms] [34;1m[rows:1][0m SELECT * FROM `jobs` WHERE `jobs`.`customerID` = 52

2025/06/18 08:31:17 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:21
[0m[33m[46.155ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 52 ORDER BY `customers`.`customerID` LIMIT 1

2025/06/18 08:31:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:175
[0m[33m[22.557ms] [34;1m[rows:1][0m INSERT INTO `invoice_line_items` (`invoice_id`,`item_type`,`device_id`,`package_id`,`description`,`quantity`,`unit_price`,`total_price`,`rental_start_date`,`rental_end_date`,`rental_days`,`sort_order`,`created_at`,`updated_at`) VALUES (11,'custom',NULL,NULL,'test',1,10,10,NULL,NULL,NULL,0,'2025-06-18 08:31:17.162','2025-06-18 08:31:17.162') ON DUPLICATE KEY UPDATE `invoice_id`=VALUES(`invoice_id`)

2025/06/18 08:31:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:175
[0m[33m[46.257ms] [34;1m[rows:1][0m INSERT INTO `invoices` (`invoice_number`,`customer_id`,`job_id`,`template_id`,`status`,`issue_date`,`due_date`,`payment_terms`,`subtotal`,`tax_rate`,`tax_amount`,`discount_amount`,`total_amount`,`paid_amount`,`balance_due`,`notes`,`terms_conditions`,`internal_notes`,`sent_at`,`paid_at`,`created_by`,`created_at`,`updated_at`) VALUES ('INV-2025063318',52,1004,2,'draft','2025-06-18 02:00:00','2025-07-18 02:00:00','Net 30',10,0.19,0.019,0,10.019,0,10.019,'','',NULL,NULL,NULL,5,'2025-06-18 08:31:17.173','2025-06-18 08:31:17.173')
2025/06/18 08:31:17 CreateInvoice: Successfully created invoice INV-2025063318 (ID: 11) for customer Noah Ben Tielmann
[GIN] 2025/06/18 - 08:31:17 | 201 |  178.742146ms |        10.0.0.7 | POST     "/api/invoices"
DEBUG: AuthMiddleware called for URL: /invoices
DEBUG: Found session cookie: fdeb598257580ffdfaa7d332fd5d195d9801f60bde09f03e8ee7d7440a778d9f

2025/06/18 08:31:18 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[24.097ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'fdeb598257580ffdfaa7d332fd5d195d9801f60bde09f03e8ee7d7440a778d9f' AND expires_at > '2025-06-18 08:31:18.94' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:31:18 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.603ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:31:18 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:72
[0m[33m[11.324ms] [34;1m[rows:1][0m SELECT count(*) FROM `invoices`
DEBUG: AuthMiddleware called for URL: /invoices
DEBUG: Found session cookie: fdeb598257580ffdfaa7d332fd5d195d9801f60bde09f03e8ee7d7440a778d9f

2025/06/18 08:31:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.990ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 08:31:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.657ms] [34;1m[rows:7][0m SELECT * FROM `customers` WHERE `customers`.`customerID` IN (11,10,9,8,7,6,5)

2025/06/18 08:31:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.291ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` IN (11,10,9,8,7,6,5)

2025/06/18 08:31:19 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[91.723ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'fdeb598257580ffdfaa7d332fd5d195d9801f60bde09f03e8ee7d7440a778d9f' AND expires_at > '2025-06-18 08:31:18.999' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:31:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.025ms] [34;1m[rows:8][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` IN (11,10,9,8,7,6,5)

2025/06/18 08:31:19 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.578ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:31:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:72
[0m[33m[11.368ms] [34;1m[rows:1][0m SELECT count(*) FROM `invoices`

2025/06/18 08:31:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.404ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` IN (11,10,9,8,7,6,5)

2025/06/18 08:31:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.979ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` IN (11,10,9,8,7,6,5)

2025/06/18 08:31:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[151.206ms] [34;1m[rows:7][0m SELECT * FROM `invoices` ORDER BY issue_date DESC, created_at DESC LIMIT 20
[GIN] 2025/06/18 - 08:31:19 | 200 |  217.816086ms |        10.0.0.7 | GET      "/invoices"
Error #01: write tcp 10.0.0.100:8080->10.0.0.101:57948: write: broken pipe

2025/06/18 08:31:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.611ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 08:31:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.598ms] [34;1m[rows:7][0m SELECT * FROM `customers` WHERE `customers`.`customerID` IN (11,10,9,8,7,6,5)

2025/06/18 08:31:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.322ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` IN (11,10,9,8,7,6,5)

2025/06/18 08:31:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.155ms] [34;1m[rows:8][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` IN (11,10,9,8,7,6,5)

2025/06/18 08:31:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.818ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` IN (11,10,9,8,7,6,5)

2025/06/18 08:31:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.005ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` IN (11,10,9,8,7,6,5)

2025/06/18 08:31:19 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[149.872ms] [34;1m[rows:7][0m SELECT * FROM `invoices` ORDER BY issue_date DESC, created_at DESC LIMIT 20
[GIN] 2025/06/18 - 08:31:19 | 200 |  285.500634ms |        10.0.0.7 | GET      "/invoices"
DEBUG: AuthMiddleware called for URL: /invoices/11/pdf
DEBUG: Found session cookie: fdeb598257580ffdfaa7d332fd5d195d9801f60bde09f03e8ee7d7440a778d9f

2025/06/18 08:31:33 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.387ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'fdeb598257580ffdfaa7d332fd5d195d9801f60bde09f03e8ee7d7440a778d9f' AND expires_at > '2025-06-18 08:31:33.571' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:31:33 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.091ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:31:33 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.054ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 08:31:33 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.964ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 11

2025/06/18 08:31:33 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.354ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 11

2025/06/18 08:31:33 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.503ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 12

2025/06/18 08:31:33 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[47.274ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 11 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 08:31:33 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[24.039ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 11 ORDER BY payment_date DESC

2025/06/18 08:31:33 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.438ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 11

2025/06/18 08:31:33 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[188.821ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 11 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 08:31:33 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.898ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 08:31:33 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.420ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 08:31:33 PDFService: Generating PDF for invoice INV-2025063318 with 1 line items
2025/06/18 08:31:33 PDFService: Generated HTML content (8632 bytes)
2025/06/18 08:31:33 PDFService: Generated PDF (1393 bytes)
2025/06/18 08:31:33 GenerateInvoicePDF: Detected fallback PDF, redirecting to HTML preview
[GIN] 2025/06/18 - 08:31:33 | 303 |  260.330311ms |        10.0.0.7 | GET      "/invoices/11/pdf"
DEBUG: AuthMiddleware called for URL: /invoices/11/preview
DEBUG: Found session cookie: fdeb598257580ffdfaa7d332fd5d195d9801f60bde09f03e8ee7d7440a778d9f

2025/06/18 08:31:34 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.285ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'fdeb598257580ffdfaa7d332fd5d195d9801f60bde09f03e8ee7d7440a778d9f' AND expires_at > '2025-06-18 08:31:33.987' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 08:31:34 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.013ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 08:31:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.463ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 08:31:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.963ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 11

2025/06/18 08:31:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.293ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 11

2025/06/18 08:31:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.077ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 12

2025/06/18 08:31:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[45.720ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 11 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 08:31:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.859ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 11 ORDER BY payment_date DESC

2025/06/18 08:31:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.334ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 11

2025/06/18 08:31:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[181.918ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 11 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 08:31:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.461ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 08:31:34 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.497ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 08:31:34 PreviewInvoice: Showing preview for invoice INV-2025063318
[GIN] 2025/06/18 - 08:31:34 | 200 |  260.455298ms |        10.0.0.7 | GET      "/invoices/11/preview"
Error #01: template: invoice_preview_new.html:298:29: executing "invoice_preview_new.html" at <gt .invoice.DiscountAmount 0>: error calling gt: incompatible types for comparison

2025/06/18 08:53:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[143.407ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 08:53:46.971'

2025/06/18 09:23:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[174.520ms] [34;1m[rows:1][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 09:23:47.07'
DEBUG: Cleaned up 1 expired sessions

2025/06/18 09:53:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[155.635ms] [34;1m[rows:2][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 09:53:47.071'
DEBUG: Cleaned up 2 expired sessions

2025/06/18 10:23:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[149.962ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 10:23:47.03'

2025/06/18 10:53:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[157.310ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 10:53:47.012'
DEBUG: AuthMiddleware called for URL: /
DEBUG: No session cookie found, redirecting to login
[GIN] 2025/06/18 - 11:12:59 | 303 |      67.205Âµs |        10.0.0.7 | GET      "/"
[GIN] 2025/06/18 - 11:12:59 | 200 |    8.427284ms |        10.0.0.7 | GET      "/login"
[GIN] 2025/06/18 - 11:12:59 | 200 |     146.143Âµs |        10.0.0.7 | GET      "/static/css/app.css"
2025/06/18 11:13:00 NotFoundHandler: 404 for path: /static/images/icon-180.png
2025/06/18 11:13:00 renderErrorPage: Rendering error page - Status: 404, Message: Page not found
[GIN] 2025/06/18 - 11:13:00 | 404 |     8.78289ms |        10.0.0.7 | GET      "/static/images/icon-180.png"
2025/06/18 11:13:00 NotFoundHandler: 404 for path: /favicon.ico
2025/06/18 11:13:00 renderErrorPage: Rendering error page - Status: 404, Message: Page not found
[GIN] 2025/06/18 - 11:13:00 | 404 |    9.088335ms |        10.0.0.7 | GET      "/favicon.ico"
2025/06/18 11:13:04 POST request to /login with Content-Type: 'application/x-www-form-urlencoded'
2025/06/18 11:13:04 Form _method parameter: ''

2025/06/18 11:13:04 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:60
[0m[33m[93.697ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = 'admin' AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Creating session for user admin (ID: 5)

2025/06/18 11:13:05 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:88
[0m[33m[46.641ms] [34;1m[rows:1][0m INSERT INTO `sessions` (`session_id`,`user_id`,`expires_at`,`created_at`) VALUES ('c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c',5,'2025-06-18 12:13:05.445','2025-06-18 11:13:05.445')

2025/06/18 11:13:05 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:100
[0m[33m[49.483ms] [34;1m[rows:1][0m UPDATE `users` SET `username`='admin',`email`='admin@yourdomain.com',`password_hash`='$2a$14$1ELNSd1HK/CifiJ4inuCbe.UAk5xR0VWWBeprfzLygbTPd1BRUt7C',`first_name`='',`last_name`='',`is_active`=true,`created_at`='2025-06-13 01:13:45.593',`updated_at`='2025-06-18 11:13:05.503',`last_login`='2025-06-18 11:13:05.491' WHERE `userID` = 5
DEBUG: Login successful, session created: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c
[GIN] 2025/06/18 - 11:13:05 | 303 |  1.128360711s |        10.0.0.7 | POST     "/login"
DEBUG: AuthMiddleware called for URL: /
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:13:05 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.233ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:13:05.655' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:13:05 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.582ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:13:05 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:41
[0m[33m[11.285ms] [34;1m[rows:1][0m SELECT count(*) FROM `jobs`

2025/06/18 11:13:05 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:42
[0m[33m[11.976ms] [34;1m[rows:1][0m SELECT count(*) FROM `devices`

2025/06/18 11:13:05 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:43
[0m[33m[11.478ms] [34;1m[rows:1][0m SELECT count(*) FROM `customers`

2025/06/18 11:13:05 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:44
[0m[33m[10.949ms] [34;1m[rows:1][0m SELECT count(*) FROM `cases`

2025/06/18 11:13:05 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[12.085ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 5
[GIN] 2025/06/18 - 11:13:05 | 200 |  112.008936ms |        10.0.0.7 | GET      "/"
[GIN] 2025/06/18 - 11:13:05 | 200 |     157.738Âµs |        10.0.0.7 | GET      "/static/css/app-new.css"
[GIN] 2025/06/18 - 11:13:05 | 200 |     180.798Âµs |        10.0.0.7 | GET      "/static/js/app.js"
DEBUG: AuthMiddleware called for URL: /invoices
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:13:09 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.941ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:13:09.438' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:13:09 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.039ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:13:09 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:72
[0m[33m[11.266ms] [34;1m[rows:1][0m SELECT count(*) FROM `invoices`

2025/06/18 11:13:09 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.968ms] [34;1m[rows:2][0m SELECT * FROM `customers` WHERE `customers`.`customerID` IN (15,14)

2025/06/18 11:13:09 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.961ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` IN (15,14)

2025/06/18 11:13:09 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.064ms] [34;1m[rows:2][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` IN (15,14)

2025/06/18 11:13:09 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.540ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` IN (15,14)

2025/06/18 11:13:09 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.384ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` IN (15,14)

2025/06/18 11:13:09 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[127.679ms] [34;1m[rows:2][0m SELECT * FROM `invoices` ORDER BY issue_date DESC, created_at DESC LIMIT 20
[GIN] 2025/06/18 - 11:13:09 | 200 |  193.315948ms |        10.0.0.7 | GET      "/invoices"
DEBUG: AuthMiddleware called for URL: /invoices/15
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:13:17 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.333ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:13:17.234' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:13:17 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.978ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:13:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.921ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 15

2025/06/18 11:13:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.798ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 15

2025/06/18 11:13:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.879ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 16

2025/06/18 11:13:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[46.073ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 15 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 11:13:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.243ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 15 ORDER BY payment_date DESC

2025/06/18 11:13:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[21.994ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 15

2025/06/18 11:13:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[159.973ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 15 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 11:13:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.276ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 11:13:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.510ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
[GIN] 2025/06/18 - 11:13:17 | 200 |  237.805025ms |        10.0.0.7 | GET      "/invoices/15"
DEBUG: AuthMiddleware called for URL: /invoices/15/preview
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:13:21 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.220ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:13:21.008' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:13:21 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.081ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:13:21 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.512ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 15

2025/06/18 11:13:21 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.403ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 15

2025/06/18 11:13:21 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.940ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 16

2025/06/18 11:13:21 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[46.077ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 15 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 11:13:21 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.313ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 15 ORDER BY payment_date DESC

2025/06/18 11:13:21 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.444ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 15

2025/06/18 11:13:21 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[160.340ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 15 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 11:13:21 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.939ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 11:13:21 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.462ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 11:13:21 PreviewInvoice: Showing preview for invoice INV-2025{month}2026
[GIN] 2025/06/18 - 11:13:21 | 200 |  242.711456ms |        10.0.0.7 | GET      "/invoices/15/preview"
Error #01: template: invoice_preview_new.html:298:29: executing "invoice_preview_new.html" at <gt .invoice.DiscountAmount 0>: error calling gt: incompatible types for comparison
DEBUG: AuthMiddleware called for URL: /invoices/15/pdf
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.482ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:13:23.329' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.009ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.999ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 15

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.764ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 15

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.357ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 16

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[47.152ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 15 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.603ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 15 ORDER BY payment_date DESC

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.880ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 15

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[162.355ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 15 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.376ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.540ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 11:13:23 PDFService: Generating PDF for invoice INV-2025{month}2026 with 1 line items
2025/06/18 11:13:23 PDFService: Generated HTML content (8545 bytes)
2025/06/18 11:13:23 PDFService: Generated PDF (1393 bytes)
2025/06/18 11:13:23 GenerateInvoicePDF: Detected fallback PDF, redirecting to HTML preview
[GIN] 2025/06/18 - 11:13:23 | 303 |  233.247096ms |        10.0.0.7 | GET      "/invoices/15/pdf"
DEBUG: AuthMiddleware called for URL: /invoices/15/preview
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.165ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:13:23.702' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.119ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.937ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 15

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.443ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 15

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.490ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 16

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[45.569ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 15 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.330ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 15 ORDER BY payment_date DESC

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.974ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 15

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[160.294ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 15 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.954ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 11:13:23 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.555ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 11:13:23 PreviewInvoice: Showing preview for invoice INV-2025{month}2026
[GIN] 2025/06/18 - 11:13:23 | 200 |  241.727306ms |        10.0.0.7 | GET      "/invoices/15/preview"
Error #01: template: invoice_preview_new.html:298:29: executing "invoice_preview_new.html" at <gt .invoice.DiscountAmount 0>: error calling gt: incompatible types for comparison
DEBUG: AuthMiddleware called for URL: /invoices/15/edit
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:13:27 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.956ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:13:27.676' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:13:27 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.567ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:13:27 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.475ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 15

2025/06/18 11:13:27 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.927ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 15

2025/06/18 11:13:27 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.930ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 16

2025/06/18 11:13:27 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[46.084ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 15 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 11:13:27 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.854ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 15 ORDER BY payment_date DESC

2025/06/18 11:13:27 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.920ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 15

2025/06/18 11:13:27 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[162.718ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 15 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 11:13:27 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:55
[0m[33m[12.718ms] [34;1m[rows:50][0m SELECT * FROM `customers` ORDER BY companyname ASC LIMIT 50

2025/06/18 11:13:27 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[11.737ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 50

2025/06/18 11:13:28 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:489
[0m[33m[109.106ms] [34;1m[rows:1][0m SELECT * FROM `invoice_templates` WHERE is_active = true ORDER BY is_default DESC, name ASC
2025/06/18 11:13:28 EditInvoiceForm: Invoice 15 has CustomerID 0, loaded 50 customers
[GIN] 2025/06/18 - 11:13:28 | 200 |   350.56361ms |        10.0.0.7 | GET      "/invoices/15/edit"
DEBUG: AuthMiddleware called for URL: /api/invoices/15
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:13:38 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.164ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:13:38.16' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:13:38 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.680ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:13:38 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.550ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 15

2025/06/18 11:13:38 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.373ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 15

2025/06/18 11:13:38 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.898ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 16

2025/06/18 11:13:38 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[45.603ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 15 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 11:13:38 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[21.948ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 15 ORDER BY payment_date DESC

2025/06/18 11:13:38 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.868ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 15

2025/06/18 11:13:38 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[158.888ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 15 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 11:13:38 [31;1m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:201 [35;1mError 1054 (42S22): Unknown column 'customer_id' in 'field list'
[0m[33m[11.549ms] [34;1m[rows:0][0m UPDATE `invoices` SET `invoice_number`='INV-2025{month}2026',`customer_id`=52,`job_id`=NULL,`template_id`=NULL,`status`='draft',`issue_date`='2025-06-18 02:00:00',`due_date`='2025-07-18 02:00:00',`payment_terms`='Net 30',`subtotal`=150,`tax_rate`=0.19,`tax_amount`=0.285,`discount_amount`=0,`total_amount`=150.285,`paid_amount`=0,`balance_due`=150.285,`notes`='Second test invoice for customer Vanessa Groos',`terms_conditions`='',`internal_notes`=NULL,`sent_at`=NULL,`paid_at`=NULL,`created_by`=NULL,`created_at`='2025-06-18 10:56:31',`updated_at`='2025-06-18 11:13:38.375' WHERE `invoice_id` = 15
2025/06/18 11:13:38 UpdateInvoice: Database error: failed to update invoice: Error 1054 (42S22): Unknown column 'customer_id' in 'field list'
[GIN] 2025/06/18 - 11:13:38 | 500 |  237.376331ms |        10.0.0.7 | PUT      "/api/invoices/15"
DEBUG: AuthMiddleware called for URL: /invoices/15/preview
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:14:01 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.137ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:14:01.24' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:14:01 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.144ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:14:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.022ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 15

2025/06/18 11:14:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.984ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 15

2025/06/18 11:14:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.045ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 16

2025/06/18 11:14:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[46.391ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 15 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 11:14:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.854ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 15 ORDER BY payment_date DESC

2025/06/18 11:14:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.453ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 15

2025/06/18 11:14:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[161.943ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 15 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 11:14:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.522ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 11:14:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.954ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 11:14:01 PreviewInvoice: Showing preview for invoice INV-2025{month}2026
[GIN] 2025/06/18 - 11:14:01 | 200 |  243.046444ms |        10.0.0.7 | GET      "/invoices/15/preview"
Error #01: template: invoice_preview_new.html:298:29: executing "invoice_preview_new.html" at <gt .invoice.DiscountAmount 0>: error calling gt: incompatible types for comparison
DEBUG: AuthMiddleware called for URL: /api/invoices/15
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:14:05 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.107ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:14:05.165' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:14:05 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.920ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:14:05 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.151ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 15

2025/06/18 11:14:05 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.899ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 15

2025/06/18 11:14:05 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.454ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 16

2025/06/18 11:14:05 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[45.181ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 15 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 11:14:05 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.317ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 15 ORDER BY payment_date DESC

2025/06/18 11:14:05 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[24.470ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 15

2025/06/18 11:14:05 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[162.568ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 15 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 11:14:05 [31;1m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:201 [35;1mError 1054 (42S22): Unknown column 'customer_id' in 'field list'
[0m[33m[12.483ms] [34;1m[rows:0][0m UPDATE `invoices` SET `invoice_number`='INV-2025{month}2026',`customer_id`=52,`job_id`=NULL,`template_id`=NULL,`status`='draft',`issue_date`='2025-06-18 02:00:00',`due_date`='2025-07-18 02:00:00',`payment_terms`='Net 30',`subtotal`=150,`tax_rate`=0.19,`tax_amount`=0.285,`discount_amount`=0,`total_amount`=150.285,`paid_amount`=0,`balance_due`=150.285,`notes`='Second test invoice for customer Vanessa Groos',`terms_conditions`='',`internal_notes`=NULL,`sent_at`=NULL,`paid_at`=NULL,`created_by`=NULL,`created_at`='2025-06-18 10:56:31',`updated_at`='2025-06-18 11:14:05.385' WHERE `invoice_id` = 15
2025/06/18 11:14:05 UpdateInvoice: Database error: failed to update invoice: Error 1054 (42S22): Unknown column 'customer_id' in 'field list'
[GIN] 2025/06/18 - 11:14:05 | 500 |  243.268754ms |        10.0.0.7 | PUT      "/api/invoices/15"
DEBUG: AuthMiddleware called for URL: /invoices
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:14:07 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.093ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:14:07.542' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:14:07 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.107ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:14:07 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:72
[0m[33m[11.624ms] [34;1m[rows:1][0m SELECT count(*) FROM `invoices`

2025/06/18 11:14:07 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.004ms] [34;1m[rows:2][0m SELECT * FROM `customers` WHERE `customers`.`customerID` IN (15,14)

2025/06/18 11:14:07 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.875ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` IN (15,14)

2025/06/18 11:14:07 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.133ms] [34;1m[rows:2][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` IN (15,14)

2025/06/18 11:14:07 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.375ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` IN (15,14)

2025/06/18 11:14:07 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[21.892ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` IN (15,14)

2025/06/18 11:14:07 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[126.565ms] [34;1m[rows:2][0m SELECT * FROM `invoices` ORDER BY issue_date DESC, created_at DESC LIMIT 20
[GIN] 2025/06/18 - 11:14:07 | 200 |  193.848403ms |        10.0.0.7 | GET      "/invoices"
DEBUG: AuthMiddleware called for URL: /invoices/new
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:14:08 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.023ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:14:08.694' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:14:08 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[26.651ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:14:08 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:55
[0m[33m[12.591ms] [34;1m[rows:50][0m SELECT * FROM `customers` ORDER BY companyname ASC LIMIT 50

2025/06/18 11:14:08 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[11.861ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 50

2025/06/18 11:14:08 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:489
[0m[33m[116.922ms] [34;1m[rows:1][0m SELECT * FROM `invoice_templates` WHERE is_active = true ORDER BY is_default DESC, name ASC
2025/06/18 11:14:08 NewInvoiceForm: Loaded 50 customers, 3 jobs, 1 templates
[GIN] 2025/06/18 - 11:14:08 | 200 |  200.440023ms |        10.0.0.7 | GET      "/invoices/new"
2025/06/18 11:14:20 POST request to /api/invoices with Content-Type: 'application/json'
DEBUG: AuthMiddleware called for URL: /api/invoices
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:14:20 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.481ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:14:20.865' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:14:20 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.090ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)
2025/06/18 11:14:20 CreateInvoice: Request data: CustomerID=52, JobID=0xc000ea38e8, TemplateID=0xc000ea3928

2025/06/18 11:14:20 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:21
[0m[33m[23.100ms] [34;1m[rows:1][0m SELECT * FROM `jobs` WHERE `jobs`.`customerID` = 52

2025/06/18 11:14:20 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:21
[0m[33m[45.695ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 52 ORDER BY `customers`.`customerID` LIMIT 1

2025/06/18 11:14:20 [31;1m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:175 [35;1mError 1054 (42S22): Unknown column 'customer_id' in 'field list'
[0m[33m[11.691ms] [34;1m[rows:0][0m INSERT INTO `invoices` (`invoice_number`,`customer_id`,`job_id`,`template_id`,`status`,`issue_date`,`due_date`,`payment_terms`,`subtotal`,`tax_rate`,`tax_amount`,`discount_amount`,`total_amount`,`paid_amount`,`balance_due`,`notes`,`terms_conditions`,`internal_notes`,`sent_at`,`paid_at`,`created_by`,`created_at`,`updated_at`) VALUES ('INV-2025063102',52,1004,2,'draft','2025-06-18 02:00:00','2025-07-18 02:00:00','Net 30',10,0.19,0.019,0,10.019,0,10.019,'','',NULL,NULL,NULL,5,'2025-06-18 11:14:20.968','2025-06-18 11:14:20.968')
2025/06/18 11:14:20 CreateInvoice: Database error: failed to create invoice: Error 1054 (42S22): Unknown column 'customer_id' in 'field list'
[GIN] 2025/06/18 - 11:14:20 | 500 |  126.855819ms |        10.0.0.7 | POST     "/api/invoices"
2025/06/18 11:15:01 POST request to /api/invoices with Content-Type: 'application/json'
DEBUG: AuthMiddleware called for URL: /api/invoices
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:15:01 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.838ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:15:01.642' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:15:01 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.355ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)
2025/06/18 11:15:01 CreateInvoice: Request data: CustomerID=52, JobID=0xc000ea3f98, TemplateID=0xc000ea3fa8

2025/06/18 11:15:01 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:21
[0m[33m[23.518ms] [34;1m[rows:1][0m SELECT * FROM `jobs` WHERE `jobs`.`customerID` = 52

2025/06/18 11:15:01 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:21
[0m[33m[47.634ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 52 ORDER BY `customers`.`customerID` LIMIT 1

2025/06/18 11:15:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:175
[0m[33m[24.238ms] [34;1m[rows:1][0m INSERT INTO `invoice_line_items` (`invoice_id`,`item_type`,`device_id`,`package_id`,`description`,`quantity`,`unit_price`,`total_price`,`rental_start_date`,`rental_end_date`,`rental_days`,`sort_order`,`created_at`,`updated_at`) VALUES (16,'custom',NULL,NULL,'1',1,10,10,NULL,NULL,NULL,0,'2025-06-18 11:15:01.737','2025-06-18 11:15:01.737') ON DUPLICATE KEY UPDATE `invoice_id`=VALUES(`invoice_id`)

2025/06/18 11:15:01 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:175
[0m[33m[48.357ms] [34;1m[rows:1][0m INSERT INTO `invoices` (`invoice_number`,`customer_id`,`job_id`,`template_id`,`status`,`issue_date`,`due_date`,`payment_terms`,`subtotal`,`tax_rate`,`tax_amount`,`discount_amount`,`total_amount`,`paid_amount`,`balance_due`,`notes`,`terms_conditions`,`internal_notes`,`sent_at`,`paid_at`,`created_by`,`created_at`,`updated_at`) VALUES ('INV-2025063143',52,1004,2,'draft','2025-06-18 02:00:00','2025-07-18 02:00:00','Net 30',10,0.19,0.019,0,10.019,0,10.019,'','',NULL,NULL,NULL,5,'2025-06-18 11:15:01.749','2025-06-18 11:15:01.749')
2025/06/18 11:15:01 CreateInvoice: Successfully created invoice INV-2025063143 (ID: 16) for customer Noah Ben Tielmann
[GIN] 2025/06/18 - 11:15:01 | 201 |  168.441202ms |        10.0.0.7 | POST     "/api/invoices"
DEBUG: AuthMiddleware called for URL: /invoices
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.192ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:15:03.374' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.315ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:72
[0m[33m[11.158ms] [34;1m[rows:1][0m SELECT count(*) FROM `invoices`
DEBUG: AuthMiddleware called for URL: /invoices
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.538ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.022ms] [34;1m[rows:3][0m SELECT * FROM `customers` WHERE `customers`.`customerID` IN (16,15,14)

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.762ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` IN (16,15,14)

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.111ms] [34;1m[rows:3][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` IN (16,15,14)

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[93.583ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:15:03.451' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.894ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` IN (16,15,14)

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.565ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:72
[0m[33m[11.421ms] [34;1m[rows:1][0m SELECT count(*) FROM `invoices`

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.033ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` IN (16,15,14)

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[150.969ms] [34;1m[rows:3][0m SELECT * FROM `invoices` ORDER BY issue_date DESC, created_at DESC LIMIT 20
[GIN] 2025/06/18 - 11:15:03 | 200 |  220.073018ms |        10.0.0.7 | GET      "/invoices"

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.189ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.948ms] [34;1m[rows:3][0m SELECT * FROM `customers` WHERE `customers`.`customerID` IN (16,15,14)

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.971ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` IN (16,15,14)

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.375ms] [34;1m[rows:3][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` IN (16,15,14)

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[31.878ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` IN (16,15,14)

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.481ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` IN (16,15,14)

2025/06/18 11:15:03 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[159.598ms] [34;1m[rows:3][0m SELECT * FROM `invoices` ORDER BY issue_date DESC, created_at DESC LIMIT 20
[GIN] 2025/06/18 - 11:15:03 | 200 |  295.453612ms |        10.0.0.7 | GET      "/invoices"
2025/06/18 11:15:03 NotFoundHandler: 404 for path: /favicon.ico
2025/06/18 11:15:03 renderErrorPage: Rendering error page - Status: 404, Message: Page not found
[GIN] 2025/06/18 - 11:15:03 | 404 |   12.049601ms |        10.0.0.7 | GET      "/favicon.ico"

2025/06/18 11:23:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[142.986ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 11:23:46.971'
DEBUG: AuthMiddleware called for URL: /
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:27:45 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.591ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:27:45.625' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:27:45 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.112ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:27:45 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:41
[0m[33m[11.209ms] [34;1m[rows:1][0m SELECT count(*) FROM `jobs`

2025/06/18 11:27:45 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:42
[0m[33m[11.531ms] [34;1m[rows:1][0m SELECT count(*) FROM `devices`

2025/06/18 11:27:45 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:43
[0m[33m[12.535ms] [34;1m[rows:1][0m SELECT count(*) FROM `customers`

2025/06/18 11:27:45 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:44
[0m[33m[12.021ms] [34;1m[rows:1][0m SELECT count(*) FROM `cases`

2025/06/18 11:27:45 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[11.916ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 5
[GIN] 2025/06/18 - 11:27:45 | 200 |  115.652758ms |        10.0.0.7 | GET      "/"
2025/06/18 11:27:46 NotFoundHandler: 404 for path: /favicon.ico
2025/06/18 11:27:46 renderErrorPage: Rendering error page - Status: 404, Message: Page not found
[GIN] 2025/06/18 - 11:27:46 | 404 |    7.837802ms |        10.0.0.7 | GET      "/favicon.ico"
DEBUG: AuthMiddleware called for URL: /invoices
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:27:53 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[27.054ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:27:53.585' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:27:53 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[26.790ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:27:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:72
[0m[33m[11.154ms] [34;1m[rows:1][0m SELECT count(*) FROM `invoices`

2025/06/18 11:27:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.559ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 11:27:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.945ms] [34;1m[rows:3][0m SELECT * FROM `customers` WHERE `customers`.`customerID` IN (16,15,14)

2025/06/18 11:27:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.379ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` IN (16,15,14)

2025/06/18 11:27:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.707ms] [34;1m[rows:3][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` IN (16,15,14)

2025/06/18 11:27:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.221ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` IN (16,15,14)

2025/06/18 11:27:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.416ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` IN (16,15,14)

2025/06/18 11:27:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[148.588ms] [34;1m[rows:3][0m SELECT * FROM `invoices` ORDER BY issue_date DESC, created_at DESC LIMIT 20
[GIN] 2025/06/18 - 11:27:53 | 200 |  223.537642ms |        10.0.0.7 | GET      "/invoices"
DEBUG: AuthMiddleware called for URL: /invoices/16/edit
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:27:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.768ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:27:58.281' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:27:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.027ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:27:58 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.054ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 11:27:58 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.552ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 16

2025/06/18 11:27:58 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.862ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 16

2025/06/18 11:27:58 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.327ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 17

2025/06/18 11:27:58 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[46.492ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 16 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 11:27:58 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.355ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 16 ORDER BY payment_date DESC

2025/06/18 11:27:58 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[21.974ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 16

2025/06/18 11:27:58 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[182.760ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 16 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 11:27:58 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:55
[0m[33m[12.206ms] [34;1m[rows:50][0m SELECT * FROM `customers` ORDER BY companyname ASC LIMIT 50

2025/06/18 11:27:58 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[11.900ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 50

2025/06/18 11:27:58 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:489
[0m[33m[111.176ms] [34;1m[rows:1][0m SELECT * FROM `invoice_templates` WHERE is_active = true ORDER BY is_default DESC, name ASC
2025/06/18 11:27:58 EditInvoiceForm: Invoice 16 has CustomerID 52, loaded 50 customers
[GIN] 2025/06/18 - 11:27:58 | 200 |    373.3586ms |        10.0.0.7 | GET      "/invoices/16/edit"
Error #01: template: invoice_form_new.html:97:98: executing "invoice_form_new.html" at <eq $.invoice.JobID .JobID>: error calling eq: incompatible types for comparison
2025/06/18 11:27:58 NotFoundHandler: 404 for path: /favicon.ico
2025/06/18 11:27:58 renderErrorPage: Rendering error page - Status: 404, Message: Page not found
[GIN] 2025/06/18 - 11:27:58 | 404 |    8.185981ms |        10.0.0.7 | GET      "/favicon.ico"
DEBUG: AuthMiddleware called for URL: /invoices/16/preview
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:28:02 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.152ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:28:02.767' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:28:02 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.038ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:28:02 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.029ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 11:28:02 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.336ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 16

2025/06/18 11:28:02 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.384ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 16

2025/06/18 11:28:02 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.037ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 17

2025/06/18 11:28:02 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[45.724ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 16 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 11:28:02 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.192ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 16 ORDER BY payment_date DESC

2025/06/18 11:28:02 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.454ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 16

2025/06/18 11:28:02 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[182.803ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 16 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 11:28:03 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.395ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 11:28:03 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.499ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 11:28:03 PreviewInvoice: Showing preview for invoice INV-2025063143
[GIN] 2025/06/18 - 11:28:03 | 200 |  261.448992ms |        10.0.0.7 | GET      "/invoices/16/preview"
Error #01: template: invoice_preview_new.html:298:29: executing "invoice_preview_new.html" at <gt .invoice.DiscountAmount 0>: error calling gt: incompatible types for comparison
DEBUG: AuthMiddleware called for URL: /
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:28:18 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.388ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:28:18.607' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:28:18 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.049ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:28:18 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:41
[0m[33m[11.294ms] [34;1m[rows:1][0m SELECT count(*) FROM `jobs`

2025/06/18 11:28:18 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:42
[0m[33m[11.503ms] [34;1m[rows:1][0m SELECT count(*) FROM `devices`

2025/06/18 11:28:18 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:43
[0m[33m[13.558ms] [34;1m[rows:1][0m SELECT count(*) FROM `customers`

2025/06/18 11:28:18 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:44
[0m[33m[11.349ms] [34;1m[rows:1][0m SELECT count(*) FROM `cases`

2025/06/18 11:28:18 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[11.936ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 5
[GIN] 2025/06/18 - 11:28:18 | 200 |  114.166807ms |        10.0.0.7 | GET      "/"
DEBUG: AuthMiddleware called for URL: /cases
DEBUG: Found session cookie: c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c

2025/06/18 11:28:28 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.306ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = 'c2f34dc56ac74a26f9bcce4cbb2832c56316909e952618905d2a00fbad42520c' AND expires_at > '2025-06-18 11:28:28.01' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 11:28:28 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.574ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 11:28:28 [32m/opt/dev/go-barcode-webapp/internal/repository/case_repository.go:141
[0m[33m[22.531ms] [34;1m[rows:16][0m SELECT * FROM `devicescases` WHERE `devicescases`.`caseID` IN (1001,1002,1003,1004,1005)

2025/06/18 11:28:28 [32m/opt/dev/go-barcode-webapp/internal/repository/case_repository.go:141
[0m[33m[34.019ms] [34;1m[rows:5][0m SELECT * FROM `cases`
[GIN] 2025/06/18 - 11:28:28 | 200 |   88.675633ms |        10.0.0.7 | GET      "/cases"

2025/06/18 11:53:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[152.097ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 11:53:47.071'

2025/06/18 12:23:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[156.852ms] [34;1m[rows:1][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 12:23:47.022'
DEBUG: Cleaned up 1 expired sessions

2025/06/18 12:53:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:198
[0m[33m[159.517ms] [34;1m[rows:0][0m DELETE FROM `sessions` WHERE expires_at < '2025-06-18 12:53:47.071'
DEBUG: AuthMiddleware called for URL: /invoices/17/pdf
DEBUG: No session cookie found, redirecting to login
[GIN] 2025/06/18 - 12:54:56 | 303 |      54.036Âµs |             ::1 | GET      "/invoices/17/pdf"
[GIN] 2025/06/18 - 12:54:56 | 200 |    8.876208ms |             ::1 | GET      "/login"
DEBUG: AuthMiddleware called for URL: /
DEBUG: No session cookie found, redirecting to login
[GIN] 2025/06/18 - 12:56:05 | 303 |      57.987Âµs |        10.0.0.7 | GET      "/"
[GIN] 2025/06/18 - 12:56:05 | 200 |    7.926477ms |        10.0.0.7 | GET      "/login"
[GIN] 2025/06/18 - 12:56:05 | 200 |     199.282Âµs |        10.0.0.7 | GET      "/static/css/app.css"
2025/06/18 12:56:06 NotFoundHandler: 404 for path: /static/images/icon-180.png
2025/06/18 12:56:06 renderErrorPage: Rendering error page - Status: 404, Message: Page not found
[GIN] 2025/06/18 - 12:56:06 | 404 |    8.838364ms |        10.0.0.7 | GET      "/static/images/icon-180.png"
2025/06/18 12:56:06 NotFoundHandler: 404 for path: /favicon.ico
2025/06/18 12:56:06 renderErrorPage: Rendering error page - Status: 404, Message: Page not found
[GIN] 2025/06/18 - 12:56:06 | 404 |    8.094881ms |        10.0.0.7 | GET      "/favicon.ico"
2025/06/18 12:56:11 POST request to /login with Content-Type: 'application/x-www-form-urlencoded'
2025/06/18 12:56:11 Form _method parameter: ''

2025/06/18 12:56:11 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:60
[0m[33m[23.241ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = 'admin' AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Creating session for user admin (ID: 5)

2025/06/18 12:56:12 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:88
[0m[33m[47.455ms] [34;1m[rows:1][0m INSERT INTO `sessions` (`session_id`,`user_id`,`expires_at`,`created_at`) VALUES ('69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad',5,'2025-06-18 13:56:12.432','2025-06-18 12:56:12.432')

2025/06/18 12:56:12 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:100
[0m[33m[49.454ms] [34;1m[rows:1][0m UPDATE `users` SET `username`='admin',`email`='admin@yourdomain.com',`password_hash`='$2a$14$1ELNSd1HK/CifiJ4inuCbe.UAk5xR0VWWBeprfzLygbTPd1BRUt7C',`first_name`='',`last_name`='',`is_active`=true,`created_at`='2025-06-13 01:13:45.593',`updated_at`='2025-06-18 12:56:12.491',`last_login`='2025-06-18 12:56:12.479' WHERE `userID` = 5
DEBUG: Login successful, session created: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad
[GIN] 2025/06/18 - 12:56:12 | 303 |  1.059737673s |        10.0.0.7 | POST     "/login"
DEBUG: AuthMiddleware called for URL: /
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:56:12 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.638ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:56:12.601' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:56:12 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.991ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:56:12 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:41
[0m[33m[11.266ms] [34;1m[rows:1][0m SELECT count(*) FROM `jobs`

2025/06/18 12:56:12 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:42
[0m[33m[11.172ms] [34;1m[rows:1][0m SELECT count(*) FROM `devices`

2025/06/18 12:56:12 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:43
[0m[33m[11.977ms] [34;1m[rows:1][0m SELECT count(*) FROM `customers`

2025/06/18 12:56:12 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:44
[0m[33m[11.801ms] [34;1m[rows:1][0m SELECT count(*) FROM `cases`

2025/06/18 12:56:12 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[12.092ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 5
[GIN] 2025/06/18 - 12:56:12 | 200 |  113.758773ms |        10.0.0.7 | GET      "/"
[GIN] 2025/06/18 - 12:56:13 | 200 |     147.896Âµs |        10.0.0.7 | GET      "/static/css/app-new.css"
[GIN] 2025/06/18 - 12:56:13 | 200 |     156.618Âµs |        10.0.0.7 | GET      "/static/js/app.js"
DEBUG: AuthMiddleware called for URL: /invoices
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:56:17 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.786ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:56:17.281' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:56:17 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.111ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:56:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:72
[0m[33m[11.337ms] [34;1m[rows:1][0m SELECT count(*) FROM `invoices`

2025/06/18 12:56:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.393ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 12:56:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.987ms] [34;1m[rows:4][0m SELECT * FROM `customers` WHERE `customers`.`customerID` IN (17,16,15,14)

2025/06/18 12:56:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.329ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` IN (17,16,15,14)

2025/06/18 12:56:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.100ms] [34;1m[rows:4][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` IN (17,16,15,14)

2025/06/18 12:56:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.764ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` IN (17,16,15,14)

2025/06/18 12:56:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.295ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` IN (17,16,15,14)

2025/06/18 12:56:17 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[149.928ms] [34;1m[rows:4][0m SELECT * FROM `invoices` ORDER BY issue_date DESC, created_at DESC LIMIT 20
[GIN] 2025/06/18 - 12:56:17 | 200 |  218.005847ms |        10.0.0.7 | GET      "/invoices"
DEBUG: AuthMiddleware called for URL: /invoices/new
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:56:22 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.630ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:56:22.723' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:56:22 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.031ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:56:22 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:55
[0m[33m[12.059ms] [34;1m[rows:50][0m SELECT * FROM `customers` ORDER BY companyname ASC LIMIT 50

2025/06/18 12:56:22 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[11.840ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 50

2025/06/18 12:56:22 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:489
[0m[33m[108.412ms] [34;1m[rows:1][0m SELECT * FROM `invoice_templates` WHERE is_active = true ORDER BY is_default DESC, name ASC
2025/06/18 12:56:22 NewInvoiceForm: Loaded 50 customers, 3 jobs, 1 templates
[GIN] 2025/06/18 - 12:56:22 | 200 |  189.556524ms |        10.0.0.7 | GET      "/invoices/new"
2025/06/18 12:56:38 POST request to /api/invoices with Content-Type: 'application/json'
DEBUG: AuthMiddleware called for URL: /api/invoices
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:56:38 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.205ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:56:38.278' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:56:38 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.527ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)
2025/06/18 12:56:38 CreateInvoice: Request data: CustomerID=52, JobID=0xc00069b468, TemplateID=0xc00069b478

2025/06/18 12:56:38 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:21
[0m[33m[23.595ms] [34;1m[rows:1][0m SELECT * FROM `jobs` WHERE `jobs`.`customerID` = 52

2025/06/18 12:56:38 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:21
[0m[33m[49.315ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 52 ORDER BY `customers`.`customerID` LIMIT 1

2025/06/18 12:56:38 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:175
[0m[33m[23.687ms] [34;1m[rows:1][0m INSERT INTO `invoice_line_items` (`invoice_id`,`item_type`,`device_id`,`package_id`,`description`,`quantity`,`unit_price`,`total_price`,`rental_start_date`,`rental_end_date`,`rental_days`,`sort_order`,`created_at`,`updated_at`) VALUES (18,'custom',NULL,NULL,'test',1,1,1,NULL,NULL,NULL,0,'2025-06-18 12:56:38.372','2025-06-18 12:56:38.372') ON DUPLICATE KEY UPDATE `invoice_id`=VALUES(`invoice_id`)

2025/06/18 12:56:38 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:175
[0m[33m[48.163ms] [34;1m[rows:1][0m INSERT INTO `invoices` (`invoice_number`,`customer_id`,`job_id`,`template_id`,`status`,`issue_date`,`due_date`,`payment_terms`,`subtotal`,`tax_rate`,`tax_amount`,`discount_amount`,`total_amount`,`paid_amount`,`balance_due`,`notes`,`terms_conditions`,`internal_notes`,`sent_at`,`paid_at`,`created_by`,`created_at`,`updated_at`) VALUES ('INV-2025069240',52,1004,2,'draft','2025-06-18 02:00:00','2025-07-18 02:00:00','Net 30',1,0.19,0.0019,0,1.0019,0,1.0019,'','',NULL,NULL,NULL,5,'2025-06-18 12:56:38.384','2025-06-18 12:56:38.384')
2025/06/18 12:56:38 CreateInvoice: Successfully created invoice INV-2025069240 (ID: 18) for customer Noah Ben Tielmann
[GIN] 2025/06/18 - 12:56:38 | 201 |  168.042577ms |        10.0.0.7 | POST     "/api/invoices"
DEBUG: AuthMiddleware called for URL: /invoices
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:56:40 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.181ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:56:40.089' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:56:40 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.187ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:56:40 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:72
[0m[33m[11.128ms] [34;1m[rows:1][0m SELECT count(*) FROM `invoices`

2025/06/18 12:56:40 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.103ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 12:56:40 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.900ms] [34;1m[rows:5][0m SELECT * FROM `customers` WHERE `customers`.`customerID` IN (18,17,16,15,14)

2025/06/18 12:56:40 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.813ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` IN (18,17,16,15,14)

2025/06/18 12:56:40 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.112ms] [34;1m[rows:5][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` IN (18,17,16,15,14)

2025/06/18 12:56:40 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.155ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` IN (18,17,16,15,14)

2025/06/18 12:56:40 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.875ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` IN (18,17,16,15,14)

2025/06/18 12:56:40 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[151.349ms] [34;1m[rows:5][0m SELECT * FROM `invoices` ORDER BY issue_date DESC, created_at DESC LIMIT 20
[GIN] 2025/06/18 - 12:56:40 | 200 |  217.406246ms |        10.0.0.7 | GET      "/invoices"
DEBUG: AuthMiddleware called for URL: /invoices/new
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:56:40 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.084ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:56:40.708' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:56:40 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.142ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:56:40 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:55
[0m[33m[12.220ms] [34;1m[rows:50][0m SELECT * FROM `customers` ORDER BY companyname ASC LIMIT 50

2025/06/18 12:56:40 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[11.633ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 50

2025/06/18 12:56:40 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:489
[0m[33m[108.207ms] [34;1m[rows:1][0m SELECT * FROM `invoice_templates` WHERE is_active = true ORDER BY is_default DESC, name ASC
2025/06/18 12:56:40 NewInvoiceForm: Loaded 50 customers, 3 jobs, 1 templates
[GIN] 2025/06/18 - 12:56:40 | 200 |  188.872059ms |        10.0.0.7 | GET      "/invoices/new"
DEBUG: AuthMiddleware called for URL: /invoices
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:56:41 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.232ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:56:41.884' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:56:41 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.529ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:56:41 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:72
[0m[33m[10.824ms] [34;1m[rows:1][0m SELECT count(*) FROM `invoices`

2025/06/18 12:56:41 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[21.929ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 12:56:41 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.511ms] [34;1m[rows:5][0m SELECT * FROM `customers` WHERE `customers`.`customerID` IN (18,17,16,15,14)

2025/06/18 12:56:42 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.893ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` IN (18,17,16,15,14)

2025/06/18 12:56:42 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[23.089ms] [34;1m[rows:5][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` IN (18,17,16,15,14)

2025/06/18 12:56:42 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.757ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` IN (18,17,16,15,14)

2025/06/18 12:56:42 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[22.992ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` IN (18,17,16,15,14)

2025/06/18 12:56:42 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:90
[0m[33m[148.472ms] [34;1m[rows:5][0m SELECT * FROM `invoices` ORDER BY issue_date DESC, created_at DESC LIMIT 20
[GIN] 2025/06/18 - 12:56:42 | 200 |   214.63062ms |        10.0.0.7 | GET      "/invoices"
DEBUG: AuthMiddleware called for URL: /invoices/18/pdf
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.258ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:56:53.332' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.499ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.435ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.042ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 18

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.064ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 18

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.849ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 19

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[46.493ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 18 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.305ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 18 ORDER BY payment_date DESC

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.989ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 18

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[184.965ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 18 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.738ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[12.042ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 12:56:53 PDFService: Generating PDF for invoice INV-2025069240 with 1 line items
2025/06/18 12:56:53 PDFService: Generated HTML content (8641 bytes)
2025/06/18 12:56:53 PDFService: Generated PDF (1393 bytes)
2025/06/18 12:56:53 GenerateInvoicePDF: Detected fallback PDF, redirecting to HTML preview
[GIN] 2025/06/18 - 12:56:53 | 303 |  256.151495ms |        10.0.0.7 | GET      "/invoices/18/pdf"
DEBUG: AuthMiddleware called for URL: /invoices/18/preview
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.012ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:56:53.744' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.516ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.418ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`userID` = 5

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.026ms] [34;1m[rows:1][0m SELECT * FROM `customers` WHERE `customers`.`customerID` = 18

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.442ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE `jobs`.`jobID` = 18

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[23.303ms] [34;1m[rows:0][0m SELECT * FROM `devices` WHERE `devices`.`deviceID` = 19

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[46.461ms] [34;1m[rows:1][0m SELECT * FROM `invoice_line_items` WHERE `invoice_line_items`.`invoice_id` = 18 ORDER BY sort_order ASC, line_item_id ASC

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.723ms] [34;1m[rows:0][0m SELECT * FROM `invoice_payments` WHERE `invoice_payments`.`invoice_id` = 18 ORDER BY payment_date DESC

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[22.484ms] [34;1m[rows:0][0m SELECT * FROM `invoice_templates` WHERE `invoice_templates`.`template_id` = 18

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:115
[0m[33m[182.805ms] [34;1m[rows:1][0m SELECT * FROM `invoices` WHERE `invoices`.`invoice_id` = 18 ORDER BY `invoices`.`invoice_id` LIMIT 1

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:364
[0m[33m[11.482ms] [34;1m[rows:1][0m SELECT * FROM `company_settings` ORDER BY `company_settings`.`id` LIMIT 1

2025/06/18 12:56:53 [32m/opt/dev/go-barcode-webapp/internal/repository/invoice_repository.go:411
[0m[33m[11.443ms] [34;1m[rows:9][0m SELECT * FROM `invoice_settings`
2025/06/18 12:56:53 PreviewInvoice: Showing preview for invoice INV-2025069240
[GIN] 2025/06/18 - 12:56:54 | 200 |  260.389249ms |        10.0.0.7 | GET      "/invoices/18/preview"
Error #01: template: invoice_preview_new.html:298:29: executing "invoice_preview_new.html" at <gt .invoice.DiscountAmount 0>: error calling gt: incompatible types for comparison
[GIN] 2025/06/18 - 12:57:51 | 200 |      25.113Âµs |       127.0.0.1 | GET      "/debug/invoice-test"
DEBUG: AuthMiddleware called for URL: /jobs
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:58:07 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.803ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:58:07.137' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:58:07 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.517ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:58:07 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[11.903ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC
DEBUG: Found 3 jobs
DEBUG: First job: {JobID:1004 CustomerID:52 StatusID:1001 Description:0xc000a7e3b0 StartDate:2025-06-07 00:00:00 +0200 CEST EndDate:2025-06-07 00:00:00 +0200 CEST Revenue:260 FinalRevenue:0xc000ea3430 CustomerName: Noah Ben Tielmann StatusName:open DeviceCount:8 TotalRevenue:260}
[GIN] 2025/06/18 - 12:58:07 | 200 |   66.573264ms |        10.0.0.7 | GET      "/jobs"
2025/06/18 12:58:07 NotFoundHandler: 404 for path: /favicon.ico
2025/06/18 12:58:07 renderErrorPage: Rendering error page - Status: 404, Message: Page not found
[GIN] 2025/06/18 - 12:58:07 | 404 |    9.064582ms |        10.0.0.7 | GET      "/favicon.ico"
DEBUG: AuthMiddleware called for URL: /users
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:58:15 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.694ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:58:15.677' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:58:15 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.679ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)
DEBUG: ListUsers called - URL: /users

2025/06/18 12:58:15 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:279
[0m[33m[11.354ms] [34;1m[rows:1][0m SELECT * FROM `users` ORDER BY created_at DESC
DEBUG: Found 1 users
DEBUG: Current user exists: true, User: &{UserID:5 Username:admin Email:admin@yourdomain.com PasswordHash:$2a$14$1ELNSd1HK/CifiJ4inuCbe.UAk5xR0VWWBeprfzLygbTPd1BRUt7C FirstName: LastName: IsActive:true CreatedAt:2025-06-13 01:13:45.593 +0200 CEST UpdatedAt:2025-06-18 12:56:12.491 +0200 CEST LastLogin:2025-06-18 12:56:12.48 +0200 CEST}
DEBUG: ListUsers template rendered
[GIN] 2025/06/18 - 12:58:15 | 200 |   66.514568ms |        10.0.0.7 | GET      "/users"
DEBUG: AuthMiddleware called for URL: /cases
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:58:18 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.567ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:58:18.128' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:58:18 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.477ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:58:18 [32m/opt/dev/go-barcode-webapp/internal/repository/case_repository.go:141
[0m[33m[22.526ms] [34;1m[rows:16][0m SELECT * FROM `devicescases` WHERE `devicescases`.`caseID` IN (1001,1002,1003,1004,1005)

2025/06/18 12:58:18 [32m/opt/dev/go-barcode-webapp/internal/repository/case_repository.go:141
[0m[33m[34.226ms] [34;1m[rows:5][0m SELECT * FROM `cases`
[GIN] 2025/06/18 - 12:58:18 | 200 |   89.825168ms |        10.0.0.7 | GET      "/cases"
DEBUG: AuthMiddleware called for URL: /customers
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:58:19 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.759ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:58:19.492' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:58:19 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.173ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:58:19 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:55
[0m[33m[12.647ms] [34;1m[rows:53][0m SELECT * FROM `customers` ORDER BY companyname ASC
[GIN] 2025/06/18 - 12:58:19 | 200 |   69.139265ms |        10.0.0.7 | GET      "/customers"
DEBUG: AuthMiddleware called for URL: /devices
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:58:21 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.755ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:58:21.927' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:58:21 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.578ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:58:22 [32m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:87
[0m[33m[24.259ms] [34;1m[rows:38][0m SELECT * FROM `products` WHERE `products`.`productID` IN (32,29,25,24,23,4,2,3,1,33,16,13,45,35,40,31,14,11,5,37,26,20,19,18,17,10,30,28,22,21,12,6,15,44,8,7,46,43)

2025/06/18 12:58:22 [32m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:87
[0m[33m[36.800ms] [34;1m[rows:89][0m SELECT * FROM `devices` ORDER BY deviceID DESC

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.392ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'TRS5001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.532ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'TRS4001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.063ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'TRS3001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.050ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'TRS2004' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.501ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'TRS2003' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.476ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'TRS2002' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.031ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'TRS2001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.986ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'TRS1003' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.041ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'TRS1002' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.065ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'TRS1001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.447ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'TOP2002' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.121ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'TOP2001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [32m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100
[0m[33m[22.969ms] [34;1m[rows:1][0m SELECT * FROM `jobdevices` WHERE deviceID = 'TOP1002' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [32m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100
[0m[33m[23.070ms] [34;1m[rows:1][0m SELECT * FROM `jobdevices` WHERE deviceID = 'TOP1001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.063ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'SUB2003' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.437ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'SUB2002' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.010ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'SUB2001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.124ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'SUB1004' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.469ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'SUB1003' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [32m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100
[0m[33m[22.460ms] [34;1m[rows:1][0m SELECT * FROM `jobdevices` WHERE deviceID = 'SUB1002' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [32m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100
[0m[33m[22.162ms] [34;1m[rows:1][0m SELECT * FROM `jobdevices` WHERE deviceID = 'SUB1001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.931ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'SRB2001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.942ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'SRB1004' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.050ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'SRB1003' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.934ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'SRB1002' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.599ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'SRB1001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.509ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PIX1004' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.019ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PIX1003' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.950ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PIX1002' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.016ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PIX1001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.072ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PER2001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.991ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PER1001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.482ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR2012' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.793ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR2011' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.205ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR2010' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.558ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR2009' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.999ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR2008' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.930ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR2007' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.640ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR2006' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.459ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR2005' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.479ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR2004' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.074ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR2003' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:22 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.021ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR2002' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.564ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR2001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.495ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR1012' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.910ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR1011' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.006ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR1010' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.168ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR1009' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.890ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR1008' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.037ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR1007' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.480ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR1006' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.090ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR1005' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.530ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR1004' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.442ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR1003' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.529ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR1002' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.796ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'PAR1001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.853ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'MIX2001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[21.999ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'MIX1004' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.147ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'MIX1003' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.471ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'MIX1002' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.554ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'MIC5001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.536ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'MIC4001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.471ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'MIC3002' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.028ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'MIC3001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[25.758ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'MIC2001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[26.053ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'MIC1002' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[26.854ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'MIC1001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [32m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100
[0m[33m[23.798ms] [34;1m[rows:1][0m SELECT * FROM `jobdevices` WHERE deviceID = 'MHD1004' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [32m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100
[0m[33m[23.231ms] [34;1m[rows:1][0m SELECT * FROM `jobdevices` WHERE deviceID = 'MHD1003' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [32m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100
[0m[33m[23.027ms] [34;1m[rows:1][0m SELECT * FROM `jobdevices` WHERE deviceID = 'MHD1002' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [32m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100
[0m[33m[22.478ms] [34;1m[rows:1][0m SELECT * FROM `jobdevices` WHERE deviceID = 'MHD1001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.075ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'LFT6002' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.025ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'LFT6001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.539ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'LFT5002' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.550ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'LFT5001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.435ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'LFT4003' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.981ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'LFT4002' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.021ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'LFT4001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.007ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'LFT3002' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.097ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'LFT3001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.500ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'LFT2001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.158ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'LFT1002' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[24.037ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'LFT1001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.013ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'FOG1001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.857ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'EXT1001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:23 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[23.134ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'CO22001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:24 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.866ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'CO21001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:24 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.623ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'ACC4001' ORDER BY `jobdevices`.`jobID` LIMIT 1

2025/06/18 12:58:24 [31;1m/opt/dev/go-barcode-webapp/internal/repository/device_repository.go:100 [35;1mrecord not found
[0m[33m[22.276ms] [34;1m[rows:0][0m SELECT * FROM `jobdevices` WHERE deviceID = 'ACC3001' ORDER BY `jobdevices`.`jobID` LIMIT 1
[GIN] 2025/06/18 - 12:58:24 | 200 |  2.150329192s |        10.0.0.7 | GET      "/devices"
DEBUG: AuthMiddleware called for URL: /analytics
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:58:35 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.746ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:58:35.725' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:58:35 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.630ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:58:35 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:83
[0m[33m[22.889ms] [34;1m[rows:-][0m SELECT COALESCE(SUM(final_revenue), 0) as total, COUNT(*) as count, COALESCE(AVG(final_revenue), 0) as avg FROM `jobs` WHERE endDate BETWEEN '2025-05-19 12:58:35.771' AND '2025-06-18 12:58:35.771' AND final_revenue IS NOT NULL

2025/06/18 12:58:35 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:94
[0m[33m[22.097ms] [34;1m[rows:-][0m SELECT COALESCE(SUM(final_revenue), 0) as total, COUNT(*) as count FROM `jobs` WHERE endDate BETWEEN '2025-04-19 12:58:35.771' AND '2025-05-19 12:58:35.771' AND final_revenue IS NOT NULL

2025/06/18 12:58:35 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:121
[0m[33m[10.845ms] [34;1m[rows:1][0m SELECT count(*) FROM `devices`

2025/06/18 12:58:35 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:124
[0m[33m[23.048ms] [34;1m[rows:1][0m SELECT count(*) FROM `devices` WHERE status IN ('checked out')

2025/06/18 12:58:35 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:127
[0m[33m[22.610ms] [34;1m[rows:1][0m SELECT count(*) FROM `devices` WHERE status = 'maintance'

2025/06/18 12:58:35 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:142
[0m[33m[23.089ms] [34;1m[rows:1][0m 
		SELECT COALESCE(SUM(j.final_revenue), 0)
		FROM jobs j
		INNER JOIN jobdevices jd ON j.jobID = jd.jobID
		WHERE j.endDate BETWEEN '2025-05-19 12:58:35.771' AND '2025-06-18 12:58:35.771'
	

2025/06/18 12:58:35 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:164
[0m[33m[11.356ms] [34;1m[rows:1][0m SELECT count(*) FROM `customers`

2025/06/18 12:58:35 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:171
[0m[33m[22.629ms] [34;1m[rows:1][0m SELECT COUNT(DISTINCT(`customers`.`customerID`)) FROM `customers` INNER JOIN jobs ON customers.customerID = jobs.customerID WHERE jobs.startDate BETWEEN '2025-05-19 12:58:35.771' AND '2025-06-18 12:58:35.771'

2025/06/18 12:58:35 [31;1m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:176 [35;1mError 1054 (42S22): Unknown column 'created_at' in 'where clause'
[0m[33m[11.369ms] [34;1m[rows:0][0m SELECT count(*) FROM `customers` WHERE created_at BETWEEN '2025-05-19 12:58:35.771' AND '2025-06-18 12:58:35.771'

2025/06/18 12:58:35 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:200
[0m[33m[22.688ms] [34;1m[rows:1][0m SELECT count(*) FROM `jobs` WHERE endDate BETWEEN '2025-05-19 12:58:35.771' AND '2025-06-18 12:58:35.771' AND statusID IN (3,4)

2025/06/18 12:58:35 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:206
[0m[33m[21.971ms] [34;1m[rows:1][0m SELECT count(*) FROM `jobs` WHERE startDate <= '2025-06-18 12:58:35.771' AND (endDate >= '2025-05-19 12:58:35.771' OR endDate IS NULL) AND statusID IN (1,2)

2025/06/18 12:58:36 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:211
[0m[33m[22.485ms] [34;1m[rows:1][0m SELECT count(*) FROM `jobs` WHERE endDate < '2025-06-18 12:58:35.987' AND statusID NOT IN (3,4)

2025/06/18 12:58:36 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:218
[0m[33m[23.083ms] [34;1m[rows:1][0m SELECT AVG(DATEDIFF(endDate, startDate)) FROM `jobs` WHERE endDate BETWEEN '2025-05-19 12:58:35.771' AND '2025-06-18 12:58:35.771' AND startDate IS NOT NULL AND endDate IS NOT NULL

2025/06/18 12:58:36 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:246
[0m[33m[23.088ms] [34;1m[rows:-][0m 
		SELECT 
			d.deviceID,
			p.name as product_name,
			COUNT(jd.jobID) as rental_count,
			COALESCE(SUM(j.final_revenue), 0) as total_revenue,
			COALESCE(AVG(j.final_revenue), 0) as avg_revenue
		FROM devices d
		LEFT JOIN products p ON d.productID = p.productID
		LEFT JOIN jobdevices jd ON d.deviceID = jd.deviceID
		LEFT JOIN jobs j ON jd.jobID = j.jobID AND j.endDate BETWEEN '2025-05-19 12:58:35.771' AND '2025-06-18 12:58:35.771'
		GROUP BY d.deviceID, p.name
		ORDER BY total_revenue DESC
		LIMIT 10
	

2025/06/18 12:58:36 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:292
[0m[33m[22.616ms] [34;1m[rows:-][0m 
		SELECT 
			c.customerID,
			COALESCE(c.companyname, CONCAT(c.firstname, ' ', c.lastname)) as customer_name,
			COUNT(j.jobID) as job_count,
			COALESCE(SUM(j.final_revenue), 0) as total_revenue,
			COALESCE(AVG(j.final_revenue), 0) as avg_revenue
		FROM customers c
		LEFT JOIN jobs j ON c.customerID = j.customerID 
			AND j.endDate BETWEEN '2025-05-19 12:58:35.771' AND '2025-06-18 12:58:35.771'
			AND j.final_revenue IS NOT NULL
		WHERE c.customerID IS NOT NULL
		GROUP BY c.customerID, c.companyname, c.firstname, c.lastname
		HAVING total_revenue > 0
		ORDER BY total_revenue DESC
		LIMIT 10
	

2025/06/18 12:58:36 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:334
[0m[33m[11.558ms] [34;1m[rows:-][0m 
		SELECT 
			p.name as product_name,
			COUNT(d.deviceID) as total_devices,
			SUM(CASE WHEN d.status = 'checked out' THEN 1 ELSE 0 END) as active_devices,
			ROUND((SUM(CASE WHEN d.status = 'checked out' THEN 1 ELSE 0 END) * 100.0) / COUNT(d.deviceID), 2) as utilization_rate
		FROM products p
		LEFT JOIN devices d ON p.productID = d.productID
		GROUP BY p.productID, p.name
		HAVING COUNT(d.deviceID) > 0
		ORDER BY utilization_rate DESC
	

2025/06/18 12:58:36 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:373
[0m[33m[22.638ms] [34;1m[rows:-][0m 
		SELECT 
			DATE(j.endDate) as date,
			COALESCE(SUM(j.final_revenue), 0) as revenue,
			COUNT(j.jobID) as jobs
		FROM jobs j
		WHERE j.endDate BETWEEN '2025-05-19 12:58:35.771' AND '2025-06-18 12:58:35.771'
		GROUP BY DATE(j.endDate)
		ORDER BY date
	
[GIN] 2025/06/18 - 12:58:36 | 200 |  397.828186ms |        10.0.0.7 | GET      "/analytics"
Error #01: template: analytics_dashboard.html:168:51: executing "analytics_dashboard.html" at <gt .analytics.revenue.revenueGrowth 0>: error calling gt: incompatible types for comparison
DEBUG: AuthMiddleware called for URL: /cases
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:58:40 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.695ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:58:40.372' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:58:40 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.668ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:58:40 [32m/opt/dev/go-barcode-webapp/internal/repository/case_repository.go:141
[0m[33m[23.048ms] [34;1m[rows:16][0m SELECT * FROM `devicescases` WHERE `devicescases`.`caseID` IN (1001,1002,1003,1004,1005)

2025/06/18 12:58:40 [32m/opt/dev/go-barcode-webapp/internal/repository/case_repository.go:141
[0m[33m[34.526ms] [34;1m[rows:5][0m SELECT * FROM `cases`
[GIN] 2025/06/18 - 12:58:40 | 200 |   90.131647ms |        10.0.0.7 | GET      "/cases"
DEBUG: AuthMiddleware called for URL: /customers
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:58:41 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.676ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:58:41.358' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:58:41 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.673ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:58:41 [32m/opt/dev/go-barcode-webapp/internal/repository/customer_repository.go:55
[0m[33m[12.393ms] [34;1m[rows:53][0m SELECT * FROM `customers` ORDER BY companyname ASC
[GIN] 2025/06/18 - 12:58:41 | 200 |    68.03673ms |        10.0.0.7 | GET      "/customers"
DEBUG: AuthMiddleware called for URL: /
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:58:42 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.686ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:58:42.194' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:58:42 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.002ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:58:42 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:41
[0m[33m[11.092ms] [34;1m[rows:1][0m SELECT count(*) FROM `jobs`

2025/06/18 12:58:42 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:42
[0m[33m[11.168ms] [34;1m[rows:1][0m SELECT count(*) FROM `devices`

2025/06/18 12:58:42 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:43
[0m[33m[11.780ms] [34;1m[rows:1][0m SELECT count(*) FROM `customers`

2025/06/18 12:58:42 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:44
[0m[33m[11.694ms] [34;1m[rows:1][0m SELECT count(*) FROM `cases`

2025/06/18 12:58:42 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[11.709ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 5
[GIN] 2025/06/18 - 12:58:42 | 200 |  112.980003ms |        10.0.0.7 | GET      "/"
DEBUG: AuthMiddleware called for URL: /search/global
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:58:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.162ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:58:47.692' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:58:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.670ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)
[GIN] 2025/06/18 - 12:58:47 | 200 |    55.78461ms |        10.0.0.7 | GET      "/search/global"
DEBUG: AuthMiddleware called for URL: /search/global
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:58:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.092ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:58:51.846' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:58:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.658ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:58:51 [31;1m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:519 [35;1mError 1146 (42S02): Table 'TS-Lager.search_histories' doesn't exist
[0m[33m[34.580ms] [34;1m[rows:0][0m INSERT INTO `search_histories` (`user_id`,`search_term`,`search_type`,`filters`,`results_count`,`execution_time_ms`,`searched_at`) VALUES (5,'SUB1001','global',(NULL),0,0,'2025-06-18 12:58:51.892')

2025/06/18 12:58:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:104
[0m[33m[22.899ms] [34;1m[rows:1][0m SELECT count(*) FROM `jobs` WHERE LOWER(description) LIKE '%sub1001%' OR jobID = 'SUB1001'

2025/06/18 12:58:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:110
[0m[33m[22.673ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE LOWER(description) LIKE '%sub1001%' OR jobID = 'SUB1001' LIMIT 20

2025/06/18 12:58:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:132
[0m[33m[22.860ms] [34;1m[rows:1][0m SELECT count(*) FROM `devices` LEFT JOIN products ON devices.productID = products.productID WHERE LOWER(devices.deviceID) LIKE '%sub1001%' OR LOWER(devices.serialnumber) LIKE '%sub1001%' OR LOWER(products.name) LIKE '%sub1001%'

2025/06/18 12:58:52 [32m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:140
[0m[33m[23.875ms] [34;1m[rows:1][0m SELECT * FROM `products` WHERE `products`.`productID` = 1

2025/06/18 12:58:52 [32m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:140
[0m[33m[47.094ms] [34;1m[rows:1][0m SELECT `devices`.`deviceID`,`devices`.`productID`,`devices`.`serialnumber`,`devices`.`purchaseDate`,`devices`.`lastmaintenance`,`devices`.`nextmaintenance`,`devices`.`insurancenumber`,`devices`.`status`,`devices`.`insuranceID` FROM `devices` LEFT JOIN products ON devices.productID = products.productID WHERE LOWER(devices.deviceID) LIKE '%sub1001%' OR LOWER(devices.serialnumber) LIKE '%sub1001%' OR LOWER(products.name) LIKE '%sub1001%' LIMIT 20

2025/06/18 12:58:52 [32m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:161
[0m[33m[22.671ms] [34;1m[rows:1][0m SELECT count(*) FROM `customers` WHERE LOWER(companyname) LIKE '%sub1001%' OR LOWER(firstname) LIKE '%sub1001%' OR LOWER(lastname) LIKE '%sub1001%' OR LOWER(email) LIKE '%sub1001%' OR customerID = 'SUB1001'

2025/06/18 12:58:52 [32m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:167
[0m[33m[23.682ms] [34;1m[rows:0][0m SELECT * FROM `customers` WHERE LOWER(companyname) LIKE '%sub1001%' OR LOWER(firstname) LIKE '%sub1001%' OR LOWER(lastname) LIKE '%sub1001%' OR LOWER(email) LIKE '%sub1001%' OR customerID = 'SUB1001' LIMIT 20

2025/06/18 12:58:52 [32m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:188
[0m[33m[22.899ms] [34;1m[rows:1][0m SELECT count(*) FROM `cases` WHERE LOWER(name) LIKE '%sub1001%' OR LOWER(description) LIKE '%sub1001%' OR caseID = 'SUB1001'

2025/06/18 12:58:52 [32m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:194
[0m[33m[22.044ms] [34;1m[rows:0][0m SELECT * FROM `cases` WHERE LOWER(name) LIKE '%sub1001%' OR LOWER(description) LIKE '%sub1001%' OR caseID = 'SUB1001' LIMIT 20
[GIN] 2025/06/18 - 12:58:52 | 200 |  296.997714ms |        10.0.0.7 | GET      "/search/global?q=SUB1001"
Error #01: template: search_results.html:135:70: executing "search_results.html" at <len .results.jobs.data>: error calling len: reflect: call of reflect.Value.Type on zero Value
DEBUG: AuthMiddleware called for URL: /search/global
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:58:54 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.232ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:58:54.616' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:58:54 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.184ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:58:54 [31;1m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:519 [35;1mError 1146 (42S02): Table 'TS-Lager.search_histories' doesn't exist
[0m[33m[33.401ms] [34;1m[rows:0][0m INSERT INTO `search_histories` (`user_id`,`search_term`,`search_type`,`filters`,`results_count`,`execution_time_ms`,`searched_at`) VALUES (5,'SUB1001','global',(NULL),0,0,'2025-06-18 12:58:54.662')

2025/06/18 12:58:54 [32m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:104
[0m[33m[22.082ms] [34;1m[rows:1][0m SELECT count(*) FROM `jobs` WHERE LOWER(description) LIKE '%sub1001%' OR jobID = 'SUB1001'

2025/06/18 12:58:54 [32m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:110
[0m[33m[22.151ms] [34;1m[rows:0][0m SELECT * FROM `jobs` WHERE LOWER(description) LIKE '%sub1001%' OR jobID = 'SUB1001' LIMIT 20

2025/06/18 12:58:54 [32m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:132
[0m[33m[22.948ms] [34;1m[rows:1][0m SELECT count(*) FROM `devices` LEFT JOIN products ON devices.productID = products.productID WHERE LOWER(devices.deviceID) LIKE '%sub1001%' OR LOWER(devices.serialnumber) LIKE '%sub1001%' OR LOWER(products.name) LIKE '%sub1001%'

2025/06/18 12:58:54 [32m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:140
[0m[33m[22.637ms] [34;1m[rows:1][0m SELECT * FROM `products` WHERE `products`.`productID` = 1

2025/06/18 12:58:54 [32m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:140
[0m[33m[45.335ms] [34;1m[rows:1][0m SELECT `devices`.`deviceID`,`devices`.`productID`,`devices`.`serialnumber`,`devices`.`purchaseDate`,`devices`.`lastmaintenance`,`devices`.`nextmaintenance`,`devices`.`insurancenumber`,`devices`.`status`,`devices`.`insuranceID` FROM `devices` LEFT JOIN products ON devices.productID = products.productID WHERE LOWER(devices.deviceID) LIKE '%sub1001%' OR LOWER(devices.serialnumber) LIKE '%sub1001%' OR LOWER(products.name) LIKE '%sub1001%' LIMIT 20

2025/06/18 12:58:54 [32m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:161
[0m[33m[22.416ms] [34;1m[rows:1][0m SELECT count(*) FROM `customers` WHERE LOWER(companyname) LIKE '%sub1001%' OR LOWER(firstname) LIKE '%sub1001%' OR LOWER(lastname) LIKE '%sub1001%' OR LOWER(email) LIKE '%sub1001%' OR customerID = 'SUB1001'

2025/06/18 12:58:54 [32m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:167
[0m[33m[23.200ms] [34;1m[rows:0][0m SELECT * FROM `customers` WHERE LOWER(companyname) LIKE '%sub1001%' OR LOWER(firstname) LIKE '%sub1001%' OR LOWER(lastname) LIKE '%sub1001%' OR LOWER(email) LIKE '%sub1001%' OR customerID = 'SUB1001' LIMIT 20

2025/06/18 12:58:54 [32m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:188
[0m[33m[22.417ms] [34;1m[rows:1][0m SELECT count(*) FROM `cases` WHERE LOWER(name) LIKE '%sub1001%' OR LOWER(description) LIKE '%sub1001%' OR caseID = 'SUB1001'

2025/06/18 12:58:54 [32m/opt/dev/go-barcode-webapp/internal/handlers/search_handler.go:194
[0m[33m[22.638ms] [34;1m[rows:0][0m SELECT * FROM `cases` WHERE LOWER(name) LIKE '%sub1001%' OR LOWER(description) LIKE '%sub1001%' OR caseID = 'SUB1001' LIMIT 20
[GIN] 2025/06/18 - 12:58:54 | 200 |  291.247227ms |        10.0.0.7 | GET      "/search/global?q=SUB1001&type=global"
Error #01: template: search_results.html:135:70: executing "search_results.html" at <len .results.jobs.data>: error calling len: reflect: call of reflect.Value.Type on zero Value
[GIN] 2025/06/18 - 12:58:57 | 200 |      27.218Âµs |       127.0.0.1 | GET      "/debug/customer-selection"
DEBUG: AuthMiddleware called for URL: /
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:59:06 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[24.037ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:59:06.554' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:59:06 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.007ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:59:06 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:41
[0m[33m[11.217ms] [34;1m[rows:1][0m SELECT count(*) FROM `jobs`

2025/06/18 12:59:06 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:42
[0m[33m[11.114ms] [34;1m[rows:1][0m SELECT count(*) FROM `devices`

2025/06/18 12:59:06 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:43
[0m[33m[13.474ms] [34;1m[rows:1][0m SELECT count(*) FROM `customers`

2025/06/18 12:59:06 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:44
[0m[33m[11.468ms] [34;1m[rows:1][0m SELECT count(*) FROM `cases`

2025/06/18 12:59:06 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[12.080ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 5
[GIN] 2025/06/18 - 12:59:06 | 200 |  115.762823ms |        10.0.0.7 | GET      "/"
[GIN] 2025/06/18 - 12:59:32 | 200 |      28.512Âµs |       127.0.0.1 | GET      "/debug/invoice-test"
DEBUG: AuthMiddleware called for URL: /analytics
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:59:54 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.271ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:59:54.921' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:59:54 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.487ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:59:54 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:83
[0m[33m[22.348ms] [34;1m[rows:-][0m SELECT COALESCE(SUM(final_revenue), 0) as total, COUNT(*) as count, COALESCE(AVG(final_revenue), 0) as avg FROM `jobs` WHERE endDate BETWEEN '2025-05-19 12:59:54.968' AND '2025-06-18 12:59:54.968' AND final_revenue IS NOT NULL

2025/06/18 12:59:55 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:94
[0m[33m[21.847ms] [34;1m[rows:-][0m SELECT COALESCE(SUM(final_revenue), 0) as total, COUNT(*) as count FROM `jobs` WHERE endDate BETWEEN '2025-04-19 12:59:54.968' AND '2025-05-19 12:59:54.968' AND final_revenue IS NOT NULL

2025/06/18 12:59:55 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:121
[0m[33m[10.917ms] [34;1m[rows:1][0m SELECT count(*) FROM `devices`

2025/06/18 12:59:55 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:124
[0m[33m[22.653ms] [34;1m[rows:1][0m SELECT count(*) FROM `devices` WHERE status IN ('checked out')

2025/06/18 12:59:55 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:127
[0m[33m[22.994ms] [34;1m[rows:1][0m SELECT count(*) FROM `devices` WHERE status = 'maintance'

2025/06/18 12:59:55 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:142
[0m[33m[22.942ms] [34;1m[rows:1][0m 
		SELECT COALESCE(SUM(j.final_revenue), 0)
		FROM jobs j
		INNER JOIN jobdevices jd ON j.jobID = jd.jobID
		WHERE j.endDate BETWEEN '2025-05-19 12:59:54.968' AND '2025-06-18 12:59:54.968'
	

2025/06/18 12:59:55 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:164
[0m[33m[11.250ms] [34;1m[rows:1][0m SELECT count(*) FROM `customers`

2025/06/18 12:59:55 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:171
[0m[33m[22.614ms] [34;1m[rows:1][0m SELECT COUNT(DISTINCT(`customers`.`customerID`)) FROM `customers` INNER JOIN jobs ON customers.customerID = jobs.customerID WHERE jobs.startDate BETWEEN '2025-05-19 12:59:54.968' AND '2025-06-18 12:59:54.968'

2025/06/18 12:59:55 [31;1m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:176 [35;1mError 1054 (42S22): Unknown column 'created_at' in 'where clause'
[0m[33m[11.448ms] [34;1m[rows:0][0m SELECT count(*) FROM `customers` WHERE created_at BETWEEN '2025-05-19 12:59:54.968' AND '2025-06-18 12:59:54.968'

2025/06/18 12:59:55 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:200
[0m[33m[22.231ms] [34;1m[rows:1][0m SELECT count(*) FROM `jobs` WHERE endDate BETWEEN '2025-05-19 12:59:54.968' AND '2025-06-18 12:59:54.968' AND statusID IN (3,4)

2025/06/18 12:59:55 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:206
[0m[33m[21.881ms] [34;1m[rows:1][0m SELECT count(*) FROM `jobs` WHERE startDate <= '2025-06-18 12:59:54.968' AND (endDate >= '2025-05-19 12:59:54.968' OR endDate IS NULL) AND statusID IN (1,2)

2025/06/18 12:59:55 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:211
[0m[33m[21.992ms] [34;1m[rows:1][0m SELECT count(*) FROM `jobs` WHERE endDate < '2025-06-18 12:59:55.182' AND statusID NOT IN (3,4)

2025/06/18 12:59:55 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:218
[0m[33m[22.520ms] [34;1m[rows:1][0m SELECT AVG(DATEDIFF(endDate, startDate)) FROM `jobs` WHERE endDate BETWEEN '2025-05-19 12:59:54.968' AND '2025-06-18 12:59:54.968' AND startDate IS NOT NULL AND endDate IS NOT NULL

2025/06/18 12:59:55 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:246
[0m[33m[23.091ms] [34;1m[rows:-][0m 
		SELECT 
			d.deviceID,
			p.name as product_name,
			COUNT(jd.jobID) as rental_count,
			COALESCE(SUM(j.final_revenue), 0) as total_revenue,
			COALESCE(AVG(j.final_revenue), 0) as avg_revenue
		FROM devices d
		LEFT JOIN products p ON d.productID = p.productID
		LEFT JOIN jobdevices jd ON d.deviceID = jd.deviceID
		LEFT JOIN jobs j ON jd.jobID = j.jobID AND j.endDate BETWEEN '2025-05-19 12:59:54.968' AND '2025-06-18 12:59:54.968'
		GROUP BY d.deviceID, p.name
		ORDER BY total_revenue DESC
		LIMIT 10
	

2025/06/18 12:59:55 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:292
[0m[33m[22.470ms] [34;1m[rows:-][0m 
		SELECT 
			c.customerID,
			COALESCE(c.companyname, CONCAT(c.firstname, ' ', c.lastname)) as customer_name,
			COUNT(j.jobID) as job_count,
			COALESCE(SUM(j.final_revenue), 0) as total_revenue,
			COALESCE(AVG(j.final_revenue), 0) as avg_revenue
		FROM customers c
		LEFT JOIN jobs j ON c.customerID = j.customerID 
			AND j.endDate BETWEEN '2025-05-19 12:59:54.968' AND '2025-06-18 12:59:54.968'
			AND j.final_revenue IS NOT NULL
		WHERE c.customerID IS NOT NULL
		GROUP BY c.customerID, c.companyname, c.firstname, c.lastname
		HAVING total_revenue > 0
		ORDER BY total_revenue DESC
		LIMIT 10
	

2025/06/18 12:59:55 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:334
[0m[33m[11.938ms] [34;1m[rows:-][0m 
		SELECT 
			p.name as product_name,
			COUNT(d.deviceID) as total_devices,
			SUM(CASE WHEN d.status = 'checked out' THEN 1 ELSE 0 END) as active_devices,
			ROUND((SUM(CASE WHEN d.status = 'checked out' THEN 1 ELSE 0 END) * 100.0) / COUNT(d.deviceID), 2) as utilization_rate
		FROM products p
		LEFT JOIN devices d ON p.productID = d.productID
		GROUP BY p.productID, p.name
		HAVING COUNT(d.deviceID) > 0
		ORDER BY utilization_rate DESC
	

2025/06/18 12:59:55 [32m/opt/dev/go-barcode-webapp/internal/handlers/analytics_handler.go:373
[0m[33m[21.915ms] [34;1m[rows:-][0m 
		SELECT 
			DATE(j.endDate) as date,
			COALESCE(SUM(j.final_revenue), 0) as revenue,
			COUNT(j.jobID) as jobs
		FROM jobs j
		WHERE j.endDate BETWEEN '2025-05-19 12:59:54.968' AND '2025-06-18 12:59:54.968'
		GROUP BY DATE(j.endDate)
		ORDER BY date
	
[GIN] 2025/06/18 - 12:59:55 | 200 |    393.8623ms |        10.0.0.7 | GET      "/analytics"
Error #01: template: analytics_dashboard.html:168:51: executing "analytics_dashboard.html" at <gt .analytics.revenue.revenueGrowth 0>: error calling gt: incompatible types for comparison
2025/06/18 12:59:55 NotFoundHandler: 404 for path: /favicon.ico
2025/06/18 12:59:55 renderErrorPage: Rendering error page - Status: 404, Message: Page not found
[GIN] 2025/06/18 - 12:59:55 | 404 |    8.900293ms |        10.0.0.7 | GET      "/favicon.ico"
DEBUG: AuthMiddleware called for URL: /financial
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.810ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:59:58.411' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.499ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:453
[0m[33m[23.909ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'completed' AND type IN ('rental','payment')

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:460
[0m[33m[22.459ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'pending' AND type IN ('rental','payment')

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:469
[0m[33m[23.027ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'completed' AND type IN ('rental','payment') AND transaction_date >= '2025-06-01 02:00:00'

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:476
[0m[33m[22.557ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'pending' AND due_date < '2025-06-18 12:59:58.526'

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:480
[0m[33m[11.384ms] [34;1m[rows:1][0m SELECT count(*) FROM `financial_transactions`

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:481
[0m[33m[22.011ms] [34;1m[rows:1][0m SELECT count(*) FROM `financial_transactions` WHERE status = 'pending'

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:482
[0m[33m[22.006ms] [34;1m[rows:1][0m SELECT count(*) FROM `financial_transactions` WHERE status = 'completed'
[GIN] 2025/06/18 - 12:59:58 | 200 |  201.260507ms |        10.0.0.7 | GET      "/financial"
DEBUG: AuthMiddleware called for URL: /financial/api/revenue-report
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad
DEBUG: AuthMiddleware called for URL: /financial/api/payment-report
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad
DEBUG: AuthMiddleware called for URL: /api/v1/financial/transactions
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad
DEBUG: AuthMiddleware called for URL: /api/v1/financial/stats
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.481ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:59:58.783' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.845ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:396
[0m[33m[22.964ms] [34;1m[rows:0][0m SELECT 
		DATE_FORMAT(transaction_date, '%Y-%m') as period,
		SUM(CASE WHEN type IN ('rental', 'payment') THEN amount ELSE 0 END) as revenue,
		SUM(CASE WHEN type IN ('fee', 'expense') THEN amount ELSE 0 END) as expenses,
		SUM(CASE WHEN type IN ('rental', 'payment') THEN amount ELSE -amount END) as net_profit,
		COUNT(*) as transactions
	 FROM `financial_transactions` WHERE status = 'completed' GROUP BY DATE_FORMAT(transaction_date, '%Y-%m') ORDER BY period DESC
[GIN] 2025/06/18 - 12:59:58 | 200 |   68.632745ms |        10.0.0.7 | GET      "/financial/api/revenue-report?period=monthly"

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[91.606ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:59:58.784' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[90.779ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:59:58.785' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[90.771ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 12:59:58.789' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.013ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.730ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.616ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:422
[0m[33m[11.312ms] [34;1m[rows:0][0m SELECT 
			status,
			COUNT(*) as count,
			SUM(amount) as total_amount,
			AVG(amount) as avg_amount
		 FROM `financial_transactions` GROUP BY `status`

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:561
[0m[33m[11.087ms] [34;1m[rows:0][0m SELECT * FROM `financial_transactions` ORDER BY transaction_date DESC
[GIN] 2025/06/18 - 12:59:58 | 200 |  124.992539ms |        10.0.0.7 | GET      "/api/v1/financial/transactions?limit=10"

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:453
[0m[33m[21.917ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'completed' AND type IN ('rental','payment')

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:430
[0m[33m[22.632ms] [34;1m[rows:-][0m SELECT COUNT(*), COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'pending' AND due_date < '2025-06-18 12:59:58.91'
[GIN] 2025/06/18 - 12:59:58 | 200 |  148.915307ms |        10.0.0.7 | GET      "/financial/api/payment-report"

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:460
[0m[33m[22.075ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'pending' AND type IN ('rental','payment')

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:469
[0m[33m[22.191ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'completed' AND type IN ('rental','payment') AND transaction_date >= '2025-06-01 02:00:00'

2025/06/18 12:59:58 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:476
[0m[33m[22.407ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'pending' AND due_date < '2025-06-18 12:59:58.969'

2025/06/18 12:59:59 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:480
[0m[33m[11.456ms] [34;1m[rows:1][0m SELECT count(*) FROM `financial_transactions`

2025/06/18 12:59:59 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:481
[0m[33m[23.005ms] [34;1m[rows:1][0m SELECT count(*) FROM `financial_transactions` WHERE status = 'pending'

2025/06/18 12:59:59 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:482
[0m[33m[21.963ms] [34;1m[rows:1][0m SELECT count(*) FROM `financial_transactions` WHERE status = 'completed'
[GIN] 2025/06/18 - 12:59:59 | 200 |  258.983516ms |        10.0.0.7 | GET      "/api/v1/financial/stats"
DEBUG: AuthMiddleware called for URL: /financial/reports
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 13:00:12 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.099ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 13:00:12.167' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 13:00:12 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.672ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)
[GIN] 2025/06/18 - 13:00:12 | 200 |   56.137629ms |        10.0.0.7 | GET      "/financial/reports"
2025/06/18 13:00:13 NotFoundHandler: 404 for path: /financial/api/reports/revenue
2025/06/18 13:00:13 renderErrorPage: Rendering error page - Status: 404, Message: Page not found
[GIN] 2025/06/18 - 13:00:13 | 404 |    9.044261ms |        10.0.0.7 | GET      "/financial/api/reports/revenue?period=monthly&startDate=2025-05-31&endDate=2025-06-29"
2025/06/18 13:00:22 POST request to /login with Content-Type: 'application/x-www-form-urlencoded'
2025/06/18 13:00:22 Form _method parameter: ''

2025/06/18 13:00:22 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:60
[0m[33m[23.558ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = 'admin' AND is_active = true ORDER BY `users`.`userID` LIMIT 1
[GIN] 2025/06/18 - 13:00:23 | 401 |  999.378451ms |             ::1 | POST     "/login"
[GIN] 2025/06/18 - 13:00:30 | 200 |    8.813659ms |       127.0.0.1 | GET      "/login"
DEBUG: AuthMiddleware called for URL: /financial
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 13:00:46 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.278ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 13:00:46.788' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 13:00:46 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.309ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 13:00:46 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:453
[0m[33m[22.398ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'completed' AND type IN ('rental','payment')

2025/06/18 13:00:46 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:460
[0m[33m[22.648ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'pending' AND type IN ('rental','payment')

2025/06/18 13:00:46 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:469
[0m[33m[23.088ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'completed' AND type IN ('rental','payment') AND transaction_date >= '2025-06-01 02:00:00'

2025/06/18 13:00:46 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:476
[0m[33m[22.151ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'pending' AND due_date < '2025-06-18 13:00:46.901'

2025/06/18 13:00:46 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:480
[0m[33m[11.446ms] [34;1m[rows:1][0m SELECT count(*) FROM `financial_transactions`

2025/06/18 13:00:46 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:481
[0m[33m[22.356ms] [34;1m[rows:1][0m SELECT count(*) FROM `financial_transactions` WHERE status = 'pending'

2025/06/18 13:00:46 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:482
[0m[33m[22.601ms] [34;1m[rows:1][0m SELECT count(*) FROM `financial_transactions` WHERE status = 'completed'
[GIN] 2025/06/18 - 13:00:46 | 200 |  200.214301ms |        10.0.0.7 | GET      "/financial"
DEBUG: AuthMiddleware called for URL: /financial/api/payment-report
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad
DEBUG: AuthMiddleware called for URL: /api/v1/financial/transactions
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad
DEBUG: AuthMiddleware called for URL: /financial/api/revenue-report
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad
DEBUG: AuthMiddleware called for URL: /api/v1/financial/stats
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 13:00:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.626ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 13:00:47.128' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 13:00:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.531ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 13:00:47.128' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 13:00:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.623ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 13:00:47.128' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 13:00:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.583ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 13:00:47.129' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 13:00:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.352ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 13:00:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.237ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 13:00:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.879ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 13:00:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.695ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 13:00:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:422
[0m[33m[11.055ms] [34;1m[rows:0][0m SELECT 
			status,
			COUNT(*) as count,
			SUM(amount) as total_amount,
			AVG(amount) as avg_amount
		 FROM `financial_transactions` GROUP BY `status`

2025/06/18 13:00:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:561
[0m[33m[11.022ms] [34;1m[rows:0][0m SELECT * FROM `financial_transactions` ORDER BY transaction_date DESC
[GIN] 2025/06/18 - 13:00:47 | 200 |   57.611765ms |        10.0.0.7 | GET      "/api/v1/financial/transactions?limit=10"

2025/06/18 13:00:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:396
[0m[33m[22.613ms] [34;1m[rows:0][0m SELECT 
		DATE_FORMAT(transaction_date, '%Y-%m') as period,
		SUM(CASE WHEN type IN ('rental', 'payment') THEN amount ELSE 0 END) as revenue,
		SUM(CASE WHEN type IN ('fee', 'expense') THEN amount ELSE 0 END) as expenses,
		SUM(CASE WHEN type IN ('rental', 'payment') THEN amount ELSE -amount END) as net_profit,
		COUNT(*) as transactions
	 FROM `financial_transactions` WHERE status = 'completed' GROUP BY DATE_FORMAT(transaction_date, '%Y-%m') ORDER BY period DESC
[GIN] 2025/06/18 - 13:00:47 | 200 |    67.92502ms |        10.0.0.7 | GET      "/financial/api/revenue-report?period=monthly"

2025/06/18 13:00:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:453
[0m[33m[22.136ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'completed' AND type IN ('rental','payment')

2025/06/18 13:00:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:430
[0m[33m[24.248ms] [34;1m[rows:-][0m SELECT COUNT(*), COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'pending' AND due_date < '2025-06-18 13:00:47.185'
[GIN] 2025/06/18 - 13:00:47 | 200 |   81.514107ms |        10.0.0.7 | GET      "/financial/api/payment-report"

2025/06/18 13:00:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:460
[0m[33m[24.327ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'pending' AND type IN ('rental','payment')

2025/06/18 13:00:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:469
[0m[33m[22.611ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'completed' AND type IN ('rental','payment') AND transaction_date >= '2025-06-01 02:00:00'

2025/06/18 13:00:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:476
[0m[33m[22.784ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'pending' AND due_date < '2025-06-18 13:00:47.243'

2025/06/18 13:00:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:480
[0m[33m[11.072ms] [34;1m[rows:1][0m SELECT count(*) FROM `financial_transactions`

2025/06/18 13:00:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:481
[0m[33m[23.076ms] [34;1m[rows:1][0m SELECT count(*) FROM `financial_transactions` WHERE status = 'pending'

2025/06/18 13:00:47 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:482
[0m[33m[22.081ms] [34;1m[rows:1][0m SELECT count(*) FROM `financial_transactions` WHERE status = 'completed'
[GIN] 2025/06/18 - 13:00:47 | 200 |  194.124417ms |        10.0.0.7 | GET      "/api/v1/financial/stats"
DEBUG: AuthMiddleware called for URL: /financial
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 13:00:50 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.527ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 13:00:50.867' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 13:00:50 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.619ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 13:00:50 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:453
[0m[33m[22.963ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'completed' AND type IN ('rental','payment')

2025/06/18 13:00:50 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:460
[0m[33m[22.558ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'pending' AND type IN ('rental','payment')

2025/06/18 13:00:50 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:469
[0m[33m[22.456ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'completed' AND type IN ('rental','payment') AND transaction_date >= '2025-06-01 02:00:00'

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:476
[0m[33m[22.354ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'pending' AND due_date < '2025-06-18 13:00:50.981'

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:480
[0m[33m[11.506ms] [34;1m[rows:1][0m SELECT count(*) FROM `financial_transactions`

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:481
[0m[33m[23.425ms] [34;1m[rows:1][0m SELECT count(*) FROM `financial_transactions` WHERE status = 'pending'

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:482
[0m[33m[48.035ms] [34;1m[rows:1][0m SELECT count(*) FROM `financial_transactions` WHERE status = 'completed'
[GIN] 2025/06/18 - 13:00:51 | 200 |  229.445388ms |        10.0.0.7 | GET      "/financial"
DEBUG: AuthMiddleware called for URL: /financial/api/revenue-report
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad
DEBUG: AuthMiddleware called for URL: /financial/api/payment-report
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad
DEBUG: AuthMiddleware called for URL: /api/v1/financial/transactions
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad
DEBUG: AuthMiddleware called for URL: /api/v1/financial/stats
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.452ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 13:00:51.302' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[23.241ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 13:00:51.304' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.622ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 13:00:51.306' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.328ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 13:00:51.308' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[24.008ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.447ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.115ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.602ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:422
[0m[33m[12.100ms] [34;1m[rows:0][0m SELECT 
			status,
			COUNT(*) as count,
			SUM(amount) as total_amount,
			AVG(amount) as avg_amount
		 FROM `financial_transactions` GROUP BY `status`

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:561
[0m[33m[12.220ms] [34;1m[rows:0][0m SELECT * FROM `financial_transactions` ORDER BY transaction_date DESC
[GIN] 2025/06/18 - 13:00:51 | 200 |   58.124039ms |        10.0.0.7 | GET      "/api/v1/financial/transactions?limit=10"

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:396
[0m[33m[22.868ms] [34;1m[rows:0][0m SELECT 
		DATE_FORMAT(transaction_date, '%Y-%m') as period,
		SUM(CASE WHEN type IN ('rental', 'payment') THEN amount ELSE 0 END) as revenue,
		SUM(CASE WHEN type IN ('fee', 'expense') THEN amount ELSE 0 END) as expenses,
		SUM(CASE WHEN type IN ('rental', 'payment') THEN amount ELSE -amount END) as net_profit,
		COUNT(*) as transactions
	 FROM `financial_transactions` WHERE status = 'completed' GROUP BY DATE_FORMAT(transaction_date, '%Y-%m') ORDER BY period DESC
[GIN] 2025/06/18 - 13:00:51 | 200 |   69.640063ms |        10.0.0.7 | GET      "/financial/api/revenue-report?period=monthly"

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:453
[0m[33m[22.910ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'completed' AND type IN ('rental','payment')

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:430
[0m[33m[23.524ms] [34;1m[rows:-][0m SELECT COUNT(*), COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'pending' AND due_date < '2025-06-18 13:00:51.362'
[GIN] 2025/06/18 - 13:00:51 | 200 |   81.633399ms |        10.0.0.7 | GET      "/financial/api/payment-report"

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:460
[0m[33m[22.976ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'pending' AND type IN ('rental','payment')

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:469
[0m[33m[23.360ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'completed' AND type IN ('rental','payment') AND transaction_date >= '2025-06-01 02:00:00'

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:476
[0m[33m[23.403ms] [34;1m[rows:1][0m SELECT COALESCE(SUM(amount), 0) FROM `financial_transactions` WHERE status = 'pending' AND due_date < '2025-06-18 13:00:51.423'

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:480
[0m[33m[11.759ms] [34;1m[rows:1][0m SELECT count(*) FROM `financial_transactions`

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:481
[0m[33m[23.295ms] [34;1m[rows:1][0m SELECT count(*) FROM `financial_transactions` WHERE status = 'pending'

2025/06/18 13:00:51 [32m/opt/dev/go-barcode-webapp/internal/handlers/financial_handler.go:482
[0m[33m[23.394ms] [34;1m[rows:1][0m SELECT count(*) FROM `financial_transactions` WHERE status = 'completed'
[GIN] 2025/06/18 - 13:00:51 | 200 |  196.668135ms |        10.0.0.7 | GET      "/api/v1/financial/stats"
DEBUG: AuthMiddleware called for URL: /
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 13:00:52 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.931ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 13:00:52.795' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 13:00:52 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[23.144ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)

2025/06/18 13:00:52 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:41
[0m[33m[11.287ms] [34;1m[rows:1][0m SELECT count(*) FROM `jobs`

2025/06/18 13:00:52 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:42
[0m[33m[11.158ms] [34;1m[rows:1][0m SELECT count(*) FROM `devices`

2025/06/18 13:00:52 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:43
[0m[33m[11.896ms] [34;1m[rows:1][0m SELECT count(*) FROM `customers`

2025/06/18 13:00:52 [32m/opt/dev/go-barcode-webapp/internal/handlers/home_handler.go:44
[0m[33m[11.454ms] [34;1m[rows:1][0m SELECT count(*) FROM `cases`

2025/06/18 13:00:52 [32m/opt/dev/go-barcode-webapp/internal/repository/job_repository.go:109
[0m[33m[12.033ms] [34;1m[rows:3][0m SELECT j.jobID, j.customerID, j.statusID, 
			j.description, j.startDate, j.endDate, 
			j.revenue, j.final_revenue,
			CONCAT(COALESCE(c.companyname, ''), ' ', COALESCE(c.firstname, ''), ' ', COALESCE(c.lastname, '')) as customer_name, 
			s.status as status_name,
			COUNT(DISTINCT jd.deviceID) as device_count,
			COALESCE(j.final_revenue, j.revenue) as total_revenue
		FROM jobs j 
		LEFT JOIN customers c ON j.customerID = c.customerID
		LEFT JOIN status s ON j.statusID = s.statusID
		LEFT JOIN jobdevices jd ON j.jobID = jd.jobID GROUP BY j.jobID, j.customerID, j.statusID, j.description, j.startDate, j.endDate, j.revenue, j.final_revenue, customer_name, s.status ORDER BY j.jobID DESC LIMIT 5
[GIN] 2025/06/18 - 13:00:52 | 200 |  113.472185ms |        10.0.0.7 | GET      "/"
DEBUG: AuthMiddleware called for URL: /users
DEBUG: Found session cookie: 69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad

2025/06/18 13:00:59 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:141
[0m[33m[22.912ms] [34;1m[rows:1][0m SELECT * FROM `sessions` WHERE session_id = '69784ecffc8c753fc85cdb4e798aa21cc2bcef41c9766ea2bc65fa22d6cd17ad' AND expires_at > '2025-06-18 13:00:59.012' ORDER BY `sessions`.`session_id` LIMIT 1

2025/06/18 13:00:59 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:152
[0m[33m[22.137ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE userID = 5 AND is_active = true ORDER BY `users`.`userID` LIMIT 1
DEBUG: Session valid for user: admin (ID: 5)
DEBUG: ListUsers called - URL: /users

2025/06/18 13:00:59 [32m/opt/dev/go-barcode-webapp/internal/handlers/auth_handler.go:279
[0m[33m[10.882ms] [34;1m[rows:1][0m SELECT * FROM `users` ORDER BY created_at DESC
DEBUG: Found 1 users
DEBUG: Current user exists: true, User: &{UserID:5 Username:admin Email:admin@yourdomain.com PasswordHash:$2a$14$1ELNSd1HK/CifiJ4inuCbe.UAk5xR0VWWBeprfzLygbTPd1BRUt7C FirstName: LastName: IsActive:true CreatedAt:2025-06-13 01:13:45.593 +0200 CEST UpdatedAt:2025-06-18 12:56:12.491 +0200 CEST LastLogin:2025-06-18 12:56:12.48 +0200 CEST}
DEBUG: ListUsers template rendered
[GIN] 2025/06/18 - 13:00:59 | 200 |   65.317278ms |        10.0.0.7 | GET      "/users"
